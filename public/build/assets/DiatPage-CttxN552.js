import{z as M,A as O,h as R,j as n,o as q,c as H,w as a,b as t,f as u,t as I,a as J,m as V}from"./app-Dh1CZWAD.js";import{u as K}from"./store-DeN-82_f.js";import{f as L,c as _,a as W,o as X,b as Y,d as Z,e as ee,g as te}from"./helper-Dzt7Lpsy.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"text-h5"},oe={__name:"DiatPage",setup(ne){const g=K(),e=M({endpoints:["accidente","seguro","tipo_accidente"],headers:[{title:"Folio",align:"start",sortable:!0,key:"folio"},{title:"Tipo de accidente",align:"start",sortable:!0,key:"tipo_accidente.descripcion"},{title:"Fecha de admision",align:"start",sortable:!0,key:"fecha_admision"},{title:"Estado",align:"start",sortable:!0,key:"estado_diat"},{title:"Acciones",align:"center",key:"actions"}],editedItem:{paciente_id:null,accidente:null,seguro:null,comentario:null,estado_diat:0,fecha_admision:null,folio:null,idpgp:null,numero_resolucion:null,origen_denuncia:null,sucursal:null,tipo_accidente:null,validado_por:null},defaultItem:{paciente_id:null,accidente:null,seguro:null,comentario:null,estado_diat:0,fecha_admision:null,folio:null,idpgp:null,numero_resolucion:null,origen_denuncia:null,sucursal:null,tipo_accidente:null,validado_por:null},searchQuery:{paciente_id:null},dialog:!1,tableItems:[],editedIndex:-1,list:[],valid:null,formTitle:"DIAT",formCrear:"Nueva DIAT",formEdit:"Editar DIAT ",urlShow:"/diat/show",urlUpdate:"/diat/update",urlDelete:"/diat/delete",urlStore:"/diat"});O(async()=>{e.list=await L(e.endpoints)});const A=R(()=>e.editedIndex===-1?e.formCrear:e.formEdit);function y(){_(e)}const p=async()=>{e.searchQuery.paciente_id=g.getSelected.id,await W(e)};function w(){X(e)}function x(){return e.editedIndex>-1?U():k()}const k=async()=>{await Y(e),_(e)};function C(r){Z(e,r)}const U=async()=>{await ee(e),_(e)},h=async r=>{await te(e,r)};return(r,o)=>{const D=n("v-toolbar-title"),T=n("v-divider"),v=n("v-spacer"),i=n("v-btn"),S=n("v-card-title"),d=n("v-text-field"),c=n("v-select"),s=n("v-col"),E=n("v-switch"),P=n("v-row"),f=n("v-container"),F=n("v-card-text"),N=n("v-card-actions"),B=n("v-form"),j=n("v-card"),G=n("v-dialog"),Q=n("v-toolbar"),b=n("v-tooltip"),$=n("v-data-table");return q(),H(f,null,{default:a(()=>[t($,{headers:e.headers,items:e.tableItems},{top:a(()=>[t(Q,{flat:""},{default:a(()=>[t(D,null,{default:a(()=>[u(I(e.formTitle),1)]),_:1}),t(T,{class:"mx-4",inset:"",vertical:""}),t(v),t(G,{modelValue:e.dialog,"onUpdate:modelValue":o[10]||(o[10]=l=>e.dialog=l)},{activator:a(({props:l})=>[t(i,{icon:"mdi-update",class:"ma-2",color:"#009AA4",variant:"tonal",onClick:p}),t(i,{icon:"mdi-account-multiple-plus",variant:"tonal",class:"ma-2",color:"#009AA4",onClick:w})]),default:a(()=>[t(j,null,{default:a(()=>[t(B,null,{default:a(()=>[t(S,null,{default:a(()=>[J("span",ae,I(A.value),1)]),_:1}),t(F,null,{default:a(()=>[t(f,null,{default:a(()=>[t(P,null,{default:a(()=>[t(s,null,{default:a(()=>[t(d,{modelValue:e.editedItem.folio,"onUpdate:modelValue":o[0]||(o[0]=l=>e.editedItem.folio=l),label:"Folio",type:"number",variant:"underlined",clearable:""},null,8,["modelValue"]),t(d,{modelValue:e.editedItem.idpgp,"onUpdate:modelValue":o[1]||(o[1]=l=>e.editedItem.idpgp=l),label:"IDPGP",type:"number",variant:"underlined",clearable:""},null,8,["modelValue"]),t(c,{modelValue:e.editedItem.accidente,"onUpdate:modelValue":o[2]||(o[2]=l=>e.editedItem.accidente=l),items:e.list.accidente,"item-title":"descripcion","item-value":"id",label:"Accidente",variant:"underlined",clearable:""},null,8,["modelValue","items"]),t(c,{modelValue:e.editedItem.seguro,"onUpdate:modelValue":o[3]||(o[3]=l=>e.editedItem.seguro=l),items:e.list.seguro,"item-title":"descripcion","item-value":"id",label:"Adm. Seguro de Vida",variant:"underlined",clearable:""},null,8,["modelValue","items"])]),_:1}),t(s,null,{default:a(()=>[t(E,{label:"Aprobado",modelValue:e.editedItem.estado_diat,"onUpdate:modelValue":o[4]||(o[4]=l=>e.editedItem.estado_diat=l),"hide-details":"","true-value":"1","false-value":"0",variant:"underlined",color:"green-darken-3",value:"0",inset:!0},null,8,["modelValue"]),t(d,{modelValue:e.editedItem.fecha_admision,"onUpdate:modelValue":o[5]||(o[5]=l=>e.editedItem.fecha_admision=l),label:"fecha_admision",type:"date",variant:"underlined",class:"mt-6",clearable:""},null,8,["modelValue"]),t(d,{modelValue:e.editedItem.numero_resolucion,"onUpdate:modelValue":o[6]||(o[6]=l=>e.editedItem.numero_resolucion=l),label:"Número de resolución",type:"number",variant:"underlined",clearable:""},null,8,["modelValue"]),t(d,{modelValue:e.editedItem.origen_denuncia,"onUpdate:modelValue":o[7]||(o[7]=l=>e.editedItem.origen_denuncia=l),label:"Origen denuncia",type:"text",variant:"underlined",clearable:""},null,8,["modelValue"])]),_:1}),t(s,null,{default:a(()=>[t(c,{modelValue:e.editedItem.tipo_accidente,"onUpdate:modelValue":o[8]||(o[8]=l=>e.editedItem.tipo_accidente=l),label:"Tipo de accidente",variant:"underlined",items:e.list.tipo_accidente,"item-title":"descripcion","item-value":"id",clearable:""},null,8,["modelValue","items"]),t(d,{modelValue:e.editedItem.validado_por,"onUpdate:modelValue":o[9]||(o[9]=l=>e.editedItem.validado_por=l),label:"Validado por",type:"text",variant:"underlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(N,null,{default:a(()=>[t(v),t(i,{color:"#009AA4",variant:"tonal",onClick:y},{default:a(()=>[u(" Cancelar ")]),_:1}),t(i,{color:"#009AA4",variant:"tonal",onClick:x},{default:a(()=>[u(" Guardar ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":a(({item:l})=>[t(b,{text:"Editar",location:"top"},{activator:a(({props:m})=>[t(i,V(m,{density:"compact",class:"mr-2 ml-2",color:"#009AA4",variant:"tonal",icon:"mdi-account-edit",onClick:z=>C(l)}),null,16,["onClick"])]),_:2},1024),t(b,{text:"Eliminar",location:"top"},{activator:a(({props:m})=>[t(i,V(m,{density:"compact",class:"mr-2 ml-2",color:"#009AA4",variant:"tonal",icon:"mdi-delete",onClick:z=>h(l)}),null,16,["onClick"])]),_:2},1024)]),"no-data":a(()=>[t(i,{variant:"tonal",color:"#009AA4",onClick:p},{default:a(()=>[u(" Iniciar ")]),_:1})]),_:1},8,["headers","items"])]),_:1})}}},ce=le(oe,[["__file","/home/blueshadows/www/vulco/resources/js/Pages/SubPages/DiatPage.vue"]]);export{ce as default};
//# sourceMappingURL=DiatPage-CttxN552.js.map
