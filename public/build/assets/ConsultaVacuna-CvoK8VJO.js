import{s as B,x as E,i as o,o as N,c as R,w as t,b as e,e as y,t as j,n as D,m as $,a as F}from"./app-DjDtHONg.js";import{A as L}from"./AppLayout-Cwfe0c1E.js";import{f as M,h as P}from"./helper-Ce_dXr38.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DIp7Rf8v.js";import"./store-CROuTJ1X.js";const K=Object.assign({layout:L},{__name:"ConsultaVacuna",setup(O){const a=B({endpoints:["area","ceco","empresa","planta","unidad"],headers:[{title:"RUT",align:"center",sortable:!0,key:"rut"},{title:"Nombre",align:"center",sortable:!0,key:"nombre"},{title:"Apellidos",sortable:!0,align:"center",key:"apellidos"},{title:"Empresa",sortable:!0,align:"center",key:"empresa.descripcion"},{title:"Tipo de Vacuna",sortable:!0,align:"center",key:"tipo_vacuna"},{title:"Vacuna",sortable:!0,align:"center",key:"vacuna"},{title:"Fecha vacuna",sortable:!0,align:"center",key:"fecha_vacuna"},{title:"Acciones",align:"center",key:"actions"}],searchQuery:{activo:"true",area:null,ceco:null,empresa:null,planta:null,rut:null,unidad:null},itemsView:{tipo_vacuna:"",vacuna:"",fecha_vacuna:""},rutRules:[u=>{if(!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(u))return!1;let c=u.split("-"),i=c[0],f=c[1].toLowerCase(),m=0,r=1;for(;i;i=Math.floor(i/10))r=(r+i%10*(9-m++%6))%11;let s=r?r-1:"k";return f===s?!0:"El rut es incorrecto"}],dialog:!1,tableItems:[],formItems:[],editedIndex:-1,loadingSearch:!1,list:[],valid:null,formTitle:"Consulta Vacuna",urlSearch:"/consulta/vacuna/search"});E(async()=>{a.list=await M(a.endpoints)});function x(u){a.itemsView={...u},a.dialog=!0}function k(){a.dialog=!1}const h=async()=>{var u=await P(a);console.log(u)};return(u,l)=>{const c=o("v-toolbar-title"),i=o("v-spacer"),f=o("v-toolbar"),m=o("v-card-title"),r=o("v-text-field"),s=o("v-select"),d=o("v-col"),C=o("v-switch"),b=o("v-row"),V=o("v-card-text"),p=o("v-btn"),A=o("download-excel"),g=o("v-card-actions"),v=o("v-container"),Q=o("v-tooltip"),U=o("v-data-table"),_=o("v-sheet"),w=o("v-card"),I=o("v-form"),S=o("v-dialog");return N(),R(v,{fluid:""},{default:t(()=>[e(w,null,{default:t(()=>[e(m,null,{default:t(()=>[e(f,{flat:""},{default:t(()=>[e(c,null,{default:t(()=>[y(j(a.formTitle),1)]),_:1}),e(i)]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(_,{color:"white",elevation:4,class:D("rounded-lg ma-2 pa-2")},{default:t(()=>[e(v,{fluid:""},{default:t(()=>[e(V,null,{default:t(()=>[e(b,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{clearable:"",label:"Rut",variant:"underlined",rules:a.rutRules,modelValue:a.searchQuery.rut,"onUpdate:modelValue":l[0]||(l[0]=n=>a.searchQuery.rut=n)},null,8,["rules","modelValue"]),e(s,{clearable:"",label:"Empresa",variant:"underlined",modelValue:a.searchQuery.empresa,"onUpdate:modelValue":l[1]||(l[1]=n=>a.searchQuery.empresa=n),items:a.list.empresa,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),e(s,{clearable:"",label:"Unidad",variant:"underlined",modelValue:a.searchQuery.unidad,"onUpdate:modelValue":l[2]||(l[2]=n=>a.searchQuery.unidad=n),items:a.list.unidad,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),e(s,{clearable:"",label:"Area",modelValue:a.searchQuery.area,"onUpdate:modelValue":l[3]||(l[3]=n=>a.searchQuery.area=n),variant:"underlined",items:a.list.area,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),e(s,{clearable:"",label:"Area (cecos)",modelValue:a.searchQuery.ceco,"onUpdate:modelValue":l[4]||(l[4]=n=>a.searchQuery.ceco=n),variant:"underlined",items:a.list.ceco,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"])]),_:1}),e(d,null,{default:t(()=>[e(r,{clearable:"",label:"Vacuna",variant:"underlined",type:"text",modelValue:a.searchQuery.vacuna,"onUpdate:modelValue":l[5]||(l[5]=n=>a.searchQuery.vacuna=n)},null,8,["modelValue"]),e(C,{modelValue:a.searchQuery.activo,"onUpdate:modelValue":l[6]||(l[6]=n=>a.searchQuery.activo=n),"hide-details":"","true-value":"true","false-value":"false",class:"ml-4 mb-4",variant:"underlined",color:"green-darken-3",inset:"",label:"Activo"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(p,{"prepend-icon":"mdi-file-search",variant:"tonal",loading:a.loadingSearch,color:"#009AA4",onClick:h},{default:t(()=>l[13]||(l[13]=[y(" Buscar ")])),_:1},8,["loading"]),e(p,{"prepend-icon":"mdi-microsoft-excel",variant:"tonal",color:"#009AA4"},{default:t(()=>[e(A,{data:a.tableItems,name:"consulta_vacunas.xls"},{default:t(()=>l[14]||(l[14]=[y(" Bajar archivo ")])),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),e(v,{fluid:""},{default:t(()=>[e(U,{headers:a.headers,items:a.tableItems,"sort-by":[{key:"apellidos",order:"asc"}]},{"item.actions":t(({item:n})=>[e(Q,{text:"Ver detalles",location:"top"},{activator:t(({props:T})=>[e(p,$(T,{density:"compact",color:"#009AA4",class:"mr-2 ml-2",variant:"tonal",icon:"mdi-eye",onClick:q=>x(n)}),null,16,["onClick"])]),_:2},1024)]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(S,{modelValue:a.dialog,"onUpdate:modelValue":l[12]||(l[12]=n=>a.dialog=n)},{default:t(()=>[e(_,{elevation:"4",class:"ma-4 pa-4"},{default:t(()=>[e(w,null,{default:t(()=>[e(I,{readonly:""},{default:t(()=>[e(_,{elevation:"2",class:"ma-2 pa-2"},{default:t(()=>[e(m,null,{default:t(()=>l[15]||(l[15]=[F("span",{class:"text-h5"}," Consulta de Vacunas ",-1)])),_:1})]),_:1}),e(V,null,{default:t(()=>[e(b,null,{default:t(()=>[e(d,null,{default:t(()=>[e(r,{modelValue:a.itemsView.fecha_vacuna,"onUpdate:modelValue":l[7]||(l[7]=n=>a.itemsView.fecha_vacuna=n),label:"Fecha Vacuna",type:"date",variant:"underlined",readonly:""},null,8,["modelValue"]),e(r,{modelValue:a.itemsView.tipo_vacuna,"onUpdate:modelValue":l[8]||(l[8]=n=>a.itemsView.tipo_vacuna=n),type:"text",label:"Tipo de vacuna",variant:"underlined",readonly:""},null,8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(r,{modelValue:a.itemsView.vacuna,"onUpdate:modelValue":l[9]||(l[9]=n=>a.itemsView.vacuna=n),readonly:"",type:"text",label:"Vacuna",variant:"underlined"},null,8,["modelValue"]),e(r,{modelValue:a.itemsView.comentario,"onUpdate:modelValue":l[10]||(l[10]=n=>a.itemsView.comentario=n),readonly:"",type:"text",label:"Comentario",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{elevation:"2",class:"ma-2 pa-2"},{default:t(()=>[e(g,null,{default:t(()=>[e(p,{class:"mr-2 ml-2",color:"#009AA4",text:"Cerrar",variant:"tonal",onClick:l[11]||(l[11]=n=>k())})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Z=z(K,[["__file","/home/omar/www/esalud/resources/js/Pages/Consultas/ConsultaVacuna.vue"]]);export{Z as default};
//# sourceMappingURL=ConsultaVacuna-CvoK8VJO.js.map
