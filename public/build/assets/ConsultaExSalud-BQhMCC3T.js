import{z as I,A as F,j as i,o as T,c as j,w as o,b as l,f as b,t as x,n as H,m as N,a as R}from"./app-Dh1CZWAD.js";import{A as $}from"./AppLayout-wiJd9DWD.js";import{f as L,h as P}from"./helper-Dzt7Lpsy.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DIp7Rf8v.js";import"./store-DeN-82_f.js";const G={class:"text-h5"},M=Object.assign({layout:$},{__name:"ConsultaExSalud",setup(O){const e=I({endpoints:["area","ceco","empresa","planta","unidad"],headers:[{title:"Rut",align:"start",sortable:!0,key:"rut"},{title:"Nombre",align:"start",sortable:!0,key:"nombre"},{title:"Apellidos",align:"start",sortable:!0,key:"apellidos"},{title:"Empresa",align:"start",sortable:!0,key:"empresa.descripcion"},{title:"Fecha de recepción",align:"start",sortable:!0,key:"fecha_recepcion"},{title:"Acciones",align:"center",key:"actions"}],searchQuery:{activo:!0,area:null,ceco:null,empresa:null,planta:null,rut:null,unidad:null,fecha_recepcion:{desde:null,hasta:null}},rutRules:[s=>{if(!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(s))return!1;for(var m=s.split("-"),r=m[0],_=m[1].toLowerCase(),c=0,n=1;r;r=Math.floor(r/10))n=(n+r%10*(9-c++%6))%11;var d=n?n-1:"k";return _==d?!0:"El rut es incorrecto"}],itemsView:{paciente_id:null,colesterol_hdl:null,colesterol_ldl:null,colesterol_total:null,comentario:null,creatinemia:null,ecg:null,espirometria:null,estatus:null,fecha_recepcion:null,framingham:null,glicemia:null,hba1c:null,hemoglobina:null,hemograma:null,optometria:null,trigliceridos:null},dialog:!1,tableItems:[],formItems:[],editedIndex:-1,list:[],valid:null,formTitle:"Consulta Exámenes de Salud",urlSearch:"/consulta/exsalud/search"});F(async()=>{e.list=await L(e.endpoints)});function h(s){e.dialog=!0,e.itemsView={...s}}function U(){e.dialog=!1}const C=async()=>{await P(e)};return(s,t)=>{const m=i("v-toolbar-title"),r=i("v-spacer"),_=i("v-toolbar"),c=i("v-card-title"),n=i("v-text-field"),d=i("v-select"),u=i("v-col"),Q=i("v-switch"),y=i("v-row"),f=i("v-card-text"),p=i("v-btn"),k=i("download-excel"),w=i("v-card-actions"),V=i("v-container"),E=i("v-tooltip"),S=i("v-data-table"),v=i("v-sheet"),g=i("v-card"),A=i("v-form"),D=i("v-dialog");return T(),j(V,{fluid:""},{default:o(()=>[l(g,null,{default:o(()=>[l(c,null,{default:o(()=>[l(_,{flat:""},{default:o(()=>[l(m,null,{default:o(()=>[b(x(e.formTitle),1)]),_:1}),l(r)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(v,{color:"white",elevation:4,class:H("rounded-lg ma-2 pa-2")},{default:o(()=>[l(V,{fluid:""},{default:o(()=>[l(f,null,{default:o(()=>[l(y,null,{default:o(()=>[l(u,null,{default:o(()=>[l(n,{label:"Rut",variant:"underlined",rules:e.rutRules,modelValue:e.searchQuery.rut,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchQuery.rut=a)},null,8,["rules","modelValue"]),l(d,{label:"Empresa",variant:"underlined",modelValue:e.searchQuery.empresa,"onUpdate:modelValue":t[1]||(t[1]=a=>e.searchQuery.empresa=a),items:e.list.empresa,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),l(d,{label:"Unidad",variant:"underlined",modelValue:e.searchQuery.unidad,"onUpdate:modelValue":t[2]||(t[2]=a=>e.searchQuery.unidad=a),items:e.list.unidad,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),l(d,{label:"Area",modelValue:e.searchQuery.area,"onUpdate:modelValue":t[3]||(t[3]=a=>e.searchQuery.area=a),variant:"underlined",items:e.list.area,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),l(d,{label:"Area (cecos)",modelValue:e.searchQuery.ceco,"onUpdate:modelValue":t[4]||(t[4]=a=>e.searchQuery.ceco=a),variant:"underlined",items:e.list.ceco,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(u,null,{default:o(()=>[l(n,{label:"Fecha recepción (desde)",variant:"underlined",modelValue:e.searchQuery.fecha_recepcion.desde,"onUpdate:modelValue":t[5]||(t[5]=a=>e.searchQuery.fecha_recepcion.desde=a),type:"date"},null,8,["modelValue"]),l(n,{label:"Fecha recepción (hasta)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_recepcion.hasta,"onUpdate:modelValue":t[6]||(t[6]=a=>e.searchQuery.fecha_recepcion.hasta=a)},null,8,["modelValue"]),l(Q,{modelValue:e.searchQuery.activo,"onUpdate:modelValue":t[7]||(t[7]=a=>e.searchQuery.activo=a),"hide-details":"","true-value":"true","false-value":"false",class:"ml-4 mt-4",variant:"underlined",color:"green-darken-3",inset:"",label:`Paciente: ${e.searchQuery.activo.toString()}`},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),l(w,null,{default:o(()=>[l(p,{"prepend-icon":"mdi-file-search",variant:"underlined",color:"#662D91",loading:e.loading,onClick:C},{default:o(()=>[b(" Buscar ")]),_:1},8,["loading"]),l(p,{"prepend-icon":"mdi-microsoft-excel",variant:"underlined",color:"#662D91"},{default:o(()=>[l(k,{data:e.tableItems,name:"consulta_exsalud.xls"},{default:o(()=>[b(" Bajar archivo ")]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),l(V,{fluid:""},{default:o(()=>[l(S,{headers:e.headers,items:e.tableItems,"sort-by":[{key:"apellidos",order:"asc"}]},{"item.actions":o(({item:a})=>[l(E,{text:"Ver detalles",location:"top"},{activator:o(({props:B})=>[l(p,N(B,{density:"compact",color:"#662D91",class:"mr-2 ml-2",icon:"mdi-eye",onClick:K=>h(a)}),null,16,["onClick"])]),_:2},1024)]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),l(V,null,{default:o(()=>[l(D,{modelValue:e.dialog,"onUpdate:modelValue":t[25]||(t[25]=a=>e.dialog=a)},{default:o(()=>[l(v,{elevation:"4",class:"ma-4 pa-4"},{default:o(()=>[l(g,null,{default:o(()=>[l(A,{readonly:""},{default:o(()=>[l(v,{elevation:"2",class:"ma-2 pa-2"},{default:o(()=>[l(c,null,{default:o(()=>[R("span",G,x(e.formTitle),1)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(y,null,{default:o(()=>[l(u,null,{default:o(()=>[l(n,{modelValue:e.itemsView.fecha_recepcion,"onUpdate:modelValue":t[8]||(t[8]=a=>e.itemsView.fecha_recepcion=a),label:"Fecha de recepcion",type:"date",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.estatus,"onUpdate:modelValue":t[9]||(t[9]=a=>e.itemsView.estatus=a),label:"Estatus",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.colesterol_hdl,"onUpdate:modelValue":t[10]||(t[10]=a=>e.itemsView.colesterol_hdl=a),label:"Colesterol HDL",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.colesterol_ldl,"onUpdate:modelValue":t[11]||(t[11]=a=>e.itemsView.colesterol_ldl=a),label:"Estatus",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.colesterol_total,"onUpdate:modelValue":t[12]||(t[12]=a=>e.itemsView.colesterol_total=a),label:"Colesterol total",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.creatinemia,"onUpdate:modelValue":t[13]||(t[13]=a=>e.itemsView.creatinemia=a),label:"Creatinemia",type:"text",variant:"underlined"},null,8,["modelValue"])]),_:1}),l(u,null,{default:o(()=>[l(n,{modelValue:e.itemsView.ecg,"onUpdate:modelValue":t[14]||(t[14]=a=>e.itemsView.ecg=a),label:"ECG",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.espirometria,"onUpdate:modelValue":t[15]||(t[15]=a=>e.itemsView.espirometria=a),label:"Espirometria",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.framingham,"onUpdate:modelValue":t[16]||(t[16]=a=>e.itemsView.framingham=a),label:"Framingham",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.glicemia,"onUpdate:modelValue":t[17]||(t[17]=a=>e.itemsView.glicemia=a),label:"Glicemia",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.hba1c,"onUpdate:modelValue":t[18]||(t[18]=a=>e.itemsView.hba1c=a),label:"HBA1C",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.hemoglobina,"onUpdate:modelValue":t[19]||(t[19]=a=>e.itemsView.hemoglobina=a),label:"Hemoglobina",type:"text",variant:"underlined"},null,8,["modelValue"])]),_:1}),l(u,null,{default:o(()=>[l(n,{modelValue:e.itemsView.hemograma,"onUpdate:modelValue":t[20]||(t[20]=a=>e.itemsView.hemograma=a),label:"Hemograma",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.optometria,"onUpdate:modelValue":t[21]||(t[21]=a=>e.itemsView.optometria=a),label:"Optometria",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.trigliceridos,"onUpdate:modelValue":t[22]||(t[22]=a=>e.itemsView.trigliceridos=a),label:"Trigléridos",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.comentario,"onUpdate:modelValue":t[23]||(t[23]=a=>e.itemsView.comentario=a),label:"Comentario",type:"text",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(v,{elevation:"2",class:"ma-2 pa-2"},{default:o(()=>[l(w,null,{default:o(()=>[l(p,{class:"mr-2 ml-2",color:"#662D91",text:"Cerrar",variant:"underlined",onClick:t[24]||(t[24]=a=>U())})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),ee=z(M,[["__file","/home/blueshadows/www/vulco/resources/js/Pages/Consultas/ConsultaExSalud.vue"]]);export{ee as default};
//# sourceMappingURL=ConsultaExSalud-BQhMCC3T.js.map
