{"version":3,"file":"MiPerfilPersonalV2-CnHwjaTh.js","sources":["../../../resources/js/Pages/Paciente/MiPerfilPersonalV2.vue"],"sourcesContent":["<script setup>\nimport AppLayout from \"@/Layouts/AppLayout.vue\";\nimport { ref, onMounted } from 'vue'\nimport { usePage, router } from '@inertiajs/vue3'\nimport axios from 'axios'\nimport {\n    fetchData,\n    handleRemoveItem,\n    handleShowItem,\n    handleStoreItem,\n    closeForm,\n    openToCreate,\n    openToEdit,\n} from \"@/helper.js\";\n\n    defineOptions({ layout: AppLayout });\n// Datos del paciente\nconst page = usePage()\nconst paciente = page.props.paciente\nconst user = page.props.auth.user\n\n// Estado del formulario\nconst editable = ref(false)\nconst form = ref({\n  nombre: paciente.nombre,\n  apellidos: paciente.apellidos,\n  rut: paciente.rut,\n  email: paciente.email,\n  telefono1: paciente.telefono1,\n  telefono2: paciente.telefono2,\n  direccion: paciente.direccion,\n  fecha_nacimiento: paciente.fecha_nacimiento,\n  \n  // Relaciones\n  genero: paciente.genero?.descripcion,\n  nacionalidad: paciente.nacionalidad?.descripcion,\n  grupo_sanguineo: paciente.grupoSanguineo?.descripcion,\n  estado_civil: paciente.estadoCivil?.descripcion,\n  nivel_instruccion: paciente.nivelInstruccion?.descripcion,\n  pueblo_originario: paciente.puebloOriginario?.descripcion,\n  religion: paciente.religion?.descripcion,\n  prevision: paciente.prevision?.descripcion,\n  seguro_salud: paciente.seguroSalud?.descripcion,\n  \n  // Datos laborales\n  unidad: paciente.unidad?.descripcion,\n  area: paciente.area?.descripcion,\n  ceco: paciente.ceco?.descripcion,\n  empresa: paciente.empresa?.descripcion,\n  afp: paciente.afp?.descripcion\n})\n\n// Listas para selects\n// const genero = ref([])\n// const nacionalidad = ref([])\n// const estadosCiviles = ref([])\n// const nivelesInstruccion = ref([])\n// const pueblosOriginarios = ref([])\n// const religiones = ref([])\n// const previsiones = ref([])\n// const seguros = ref([])\n// const unidades = ref([])\n// const areas = ref([])\n// const cecos = ref([])\n// const empresas = ref([])\n// const afps = ref([])\n\n// Cargar datos de selects\n// const cargarDatosSelects = async () => {\n//   try {\n//     const endpoints =  [\n//         \"afp\",\n//         \"area\",\n//         \"ceco\",\n//         \"estado_civil\",\n//         \"empresa\",\n//         \"exposicion\",\n//         \"genero\",\n//         \"grupo_sanguineo\",\n//         \"nivel_instruccion\",\n//         \"ley_social\",\n//         \"nacionalidad\",\n//         \"planta\",\n//         \"prevision\",\n//         \"pueblo_originario\",\n//         \"religion\",\n//         \"seguro\",\n//         \"unidad\",\n//     ];\n\n//     console.log(endpoints);\n\n//     const requests = endpoints.map(async (endpoint) => {\n//       const response = await axios.get(endpoint.url)\n//       endpoint.ref.value = response.data.map(item => ({\n//         title: item.descripcion,\n//         value: item.id\n//       }))\n//     })\n\n//     await Promise.all(requests)\n//   } catch (error) {\n//     console.error('Error cargando datos de selects:', error)\n//   }\n// }\nconst endpoints =  ref([\n        \"afp\",\n        \"area\",\n        \"ceco\",\n        \"estado_civil\",\n        \"empresa\",\n        \"exposicion\",\n        \"genero\",\n        \"grupo_sanguineo\",\n        \"nivel_instruccion\",\n        \"ley_social\",\n        \"nacionalidad\",\n        \"planta\",\n        \"prevision\",\n        \"pueblo_originario\",\n        \"religion\",\n        \"seguro\",\n        \"unidad\",\n    ]);\n\nconst listOfEndpoints = ref([])\n\n\n\n\nonMounted(async () => {\n    // listOfEndpoints = await fetchData(endpoints);\n    // console.log(listOfEndpoints);\n});\n\n// Métodos\nconst updatePerfil = () => {\n  router.put(route('paciente.perfil.update'), form.value, {\n    onSuccess: () => {\n      editable.value = false\n      // Mostrar notificación de éxito\n    },\n    onError: (errors) => {\n      console.error('Errores al actualizar:', errors)\n      // Manejar errores de validación\n    }\n  })\n}\n\nconst cancelEdit = () => {\n  // Restaurar valores originales\n  form.value = { \n    nombre: paciente.nombre,\n    apellidos: paciente.apellidos,\n    rut: paciente.rut,\n    email: paciente.email,\n    telefono1: paciente.telefono1,\n    telefono2: paciente.telefono2,\n    direccion: paciente.direccion,\n    fecha_nacimiento: paciente.fecha_nacimiento,\n    \n    genero: paciente.genero?.id,\n    nacionalidad: paciente.nacionalidad?.id,\n    estado_civil: paciente.estadoCivil?.id,\n    nivel_instruccion: paciente.nivelInstruccion?.id,\n    pueblo_originario: paciente.puebloOriginario?.id,\n    religion: paciente.religion?.id,\n    prevision: paciente.prevision?.id,\n    seguro_salud: paciente.seguroSalud?.id,\n    \n    unidad: paciente.unidad?.id,\n    area: paciente.area?.id,\n    ceco: paciente.ceco?.id,\n    empresa: paciente.empresa?.id,\n    afp: paciente.afp?.id\n  }\n  editable.value = false\n}\n</script>\n\n<template>\n  <v-container fluid>\n    <v-sheet color=\"white\" :elevation=\"6\" class=\"rounded-lg ma-4 pa-4\">\n      <v-form @submit.prevent=\"updatePerfil\">\n        <v-row>\n          <!-- Datos Personales -->\n          <v-col cols=\"12\" md=\"6\">\n            <v-text-field\n              v-model=\"form.nombre\"\n              label=\"Nombre\"\n              :readonly=\"!editable\"\n            />\n            <v-text-field\n              v-model=\"form.apellidos\"\n              label=\"Apellidos\"\n              :readonly=\"!editable\"\n            />\n            <v-text-field\n              v-model=\"form.rut\"\n              label=\"RUT\"\n              :readonly=\"true\"\n            />\n            <v-select\n              v-model=\"form.genero\"\n              :items=\"generos\"\n              label=\"Género\"\n              :readonly=\"!editable\"\n            />\n            <v-text-field\n              v-model=\"form.fecha_nacimiento\"\n              label=\"Fecha de Nacimiento\"\n              type=\"date\"\n              :readonly=\"!editable\"\n            />\n            <v-select\n              v-model=\"form.nacionalidad\"\n              :items=\"nacionalidades\"\n              label=\"Nacionalidad\"\n              :readonly=\"!editable\"\n            />\n            <v-select\n              v-model=\"form.estado_civil\"\n              :items=\"estadosCiviles\"\n              label=\"Estado Civil\"\n              :readonly=\"!editable\"\n            />\n            <v-select\n              v-model=\"form.religion\"\n              :items=\"religiones\"\n              label=\"Religión\"\n              :readonly=\"!editable\"\n            />\n          </v-col>\n\n          <!-- Datos de Contacto y Adicionales -->\n          <v-col cols=\"12\" md=\"6\">\n            <v-text-field\n              v-model=\"form.email\"\n              label=\"Correo Electrónico\"\n              :readonly=\"true\"\n            />\n            <v-text-field\n              v-model=\"form.telefono1\"\n              label=\"Teléfono Principal\"\n              :readonly=\"!editable\"\n            />\n            <v-text-field\n              v-model=\"form.telefono2\"\n              label=\"Teléfono Secundario\"\n              :readonly=\"!editable\"\n            />\n            <v-text-field\n              v-model=\"form.direccion\"\n              label=\"Dirección\"\n              :readonly=\"!editable\"\n            />\n            <v-select\n              v-model=\"form.nivel_instruccion\"\n              :items=\"nivelesInstruccion\"\n              label=\"Nivel de Instrucción\"\n              :readonly=\"!editable\"\n            />\n            <v-select\n              v-model=\"form.pueblo_originario\"\n              :items=\"pueblosOriginarios\"\n              label=\"Pueblo Originario\"\n              :readonly=\"!editable\"\n            />\n            <v-select\n              v-model=\"form.prevision\"\n              :items=\"previsiones\"\n              label=\"Previsión\"\n              :readonly=\"!editable\"\n            />\n            <v-select\n              v-model=\"form.seguro_salud\"\n              :items=\"seguros\"\n              label=\"Seguro de Salud\"\n              :readonly=\"!editable\"\n            />\n          </v-col>\n        </v-row>\n\n        <!-- Datos Laborales -->\n        <v-row>\n          <v-col cols=\"12\" md=\"6\">\n            <v-select\n              v-model=\"form.empresa\"\n              :items=\"empresas\"\n              label=\"Empresa\"\n              :readonly=\"!editable\"\n            />\n            <v-select\n              v-model=\"form.unidad\"\n              :items=\"unidades\"\n              label=\"Unidad\"\n              :readonly=\"!editable\"\n            />\n            <v-select\n              v-model=\"form.area\"\n              :items=\"areas\"\n              label=\"Área\"\n              :readonly=\"!editable\"\n            />\n          </v-col>\n          <v-col cols=\"12\" md=\"6\">\n            <v-select\n              v-model=\"form.ceco\"\n              :items=\"cecos\"\n              label=\"Centro de Costo\"\n              :readonly=\"!editable\"\n            />\n            <v-select\n              v-model=\"form.afp\"\n              :items=\"afps\"\n              label=\"AFP\"\n              :readonly=\"!editable\"\n            />\n          </v-col>\n        </v-row>\n\n        <!-- Botones de Acción -->\n        <v-row>\n          <v-col>\n            <v-btn \n              v-if=\"!editable\" \n              color=\"primary\" \n              @click=\"editable = true\"\n            >\n              Editar Perfil\n            </v-btn>\n            <v-btn \n              v-if=\"editable\" \n              color=\"success\" \n              type=\"submit\"\n            >\n              Guardar Cambios\n            </v-btn>\n            <v-btn \n              v-if=\"editable\" \n              color=\"error\" \n              @click=\"cancelEdit\"\n            >\n              Cancelar\n            </v-btn>\n          </v-col>\n        </v-row>\n      </v-form>\n    </v-sheet>\n  </v-container>\n</template>"],"names":["_a","_b","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","_m"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}