{"version":3,"file":"EnfermedadPage-DwgJFqS2.js","sources":["../../../resources/js/Pages/SubPages/EnfermedadPage.vue"],"sourcesContent":["<script setup>\n  import { reactive, computed, onMounted } from \"vue\";\n  import { useDataStore } from \"@/store.js\";\n  import {\n    fetchAllData,\n    handleRemoveItem,\n    handleShowItem,\n    handleStoreItem,\n    handleEditItem,\n    closeForm,\n    openToCreate,\n    openToEdit,\n  } from \"@/helper.js\";\n\n  const store = useDataStore();\n  const state = reactive({\n    endpoints: [\"\"],\n    headers: [\n      {\n        title: \"Enfermedad\",\n        align: \"start\",\n        sortable: true,\n      },\n      { title: \"Comentario\", key: \"comentario\", sortable: false },\n      { title: \"Acciones\", align: \"center\", key: \"actions\" },\n    ],\n    editedItem: {\n      paciente_id: null,\n      comentario: \"\",\n    },\n    defaultItem: {\n      paciente_id: null,\n      comentario: null,\n    },\n    searchQuery: {\n      paciente_id: null,\n    },\n    dialog: false,\n    tableItems: [],\n    editedIndex: -1,\n    list: [],\n    loading: false,\n    valid: null,\n    formTitle: \"Enfermedad\",\n    formCrear: \"Nueva enfermedad\",\n    formEdit: \"Editar enfermedad\",\n    urlShow: \"/enfermedad/show\",\n    urlUpdate: \"/enfermedad/update\",\n    urlDelete: \"/enfermedad/delete\",\n    urlStore: \"/enfermedad\",\n  });\n\n  //**********\\\\\\\\  LIFE CYCLE HOOKS ////*************/\n  onMounted(async () => {\n    state.list = await fetchAllData(state.endpoints);\n  });\n\n  //**********\\\\\\\\  COMPUTE PROPERTIES ////*************/\n  const editedItemTitle = computed(() =>\n    state.editedIndex === -1 ? state.formCrear : state.formEdit\n  );\n\n  function close() {\n    closeForm(state);\n  }\n  //**********\\\\\\\\  CRUD ////*************/\n  const handleShow = async () => {\n    state.searchQuery.paciente_id = store.getSelected.id;\n    await handleShowItem(state);\n  };\n\n  function openFormCreate() {\n    openToCreate(state);\n  }\n\n  function storeItems() {\n    return state.editedIndex > -1 ? update() : create();\n  }\n\n  const create = async () => {\n    await handleStoreItem(state);\n    closeForm(state);\n  };\n\n  function openFormEdit(item) {\n    openToEdit(state, item);\n  }\n\n  const update = async () => {\n    await handleEditItem(state);\n    closeForm(state);\n  };\n\n  const remove = async (item) => {\n    await handleRemoveItem(state, item);\n  };\n</script>\n\n<template>\n  <v-container>\n    <v-data-table :headers=\"state.headers\" :items=\"state.tableItems\">\n      <template v-slot:top>\n        <v-toolbar flat>\n          <v-toolbar-title>{{ state.formTitle }}</v-toolbar-title>\n          <v-divider class=\"mx-4\" inset vertical></v-divider>\n          <v-spacer></v-spacer>\n          <v-dialog v-model=\"state.dialog\">\n            <template v-slot:activator=\"{ props }\">\n              <v-btn\n                icon=\"mdi-update\"\n                variant=\"tonal\"\n                class=\"ma-2\"\n                color=\"#009AA4\"\n                @click=\"handleShow\"\n              >\n              </v-btn>\n              <v-btn\n                icon=\"mdi-account-multiple-plus\"\n                variant=\"tonal\"\n                class=\"ma-2\"\n                color=\"#009AA4\"\n                @click=\"openFormCreate\"\n              >\n              </v-btn>\n            </template>\n\n            <v-card>\n              <form @submit.prevent=\"submit\">\n                <v-card-title>\n                  <span class=\"text-h5\">{{ editedItemTitle }} </span>\n                </v-card-title>\n\n                <v-card-text>\n                  <v-container>\n                    <v-row>\n                      <v-col>\n\n                        <v-text-field\n                          v-model=\"state.editedItem.comentario\"\n                          label=\"comentario\"\n                          type=\"text\"\n                          variant=\"underlined\"\n                        ></v-text-field>\n                      </v-col>\n                    </v-row>\n                  </v-container>\n                </v-card-text>\n\n                <v-card-actions>\n                  <v-spacer></v-spacer>\n                  <v-btn color=\"blue-darken-1\" variant=\"tonal\" @click=\"close\">\n                    Cancelar\n                  </v-btn>\n                  <v-btn color=\"blue-darken-1\" variant=\"tonal\" @click=\"storeItems\">\n                    Guardar\n                  </v-btn>\n                </v-card-actions>\n              </form>\n            </v-card>\n          </v-dialog>\n        </v-toolbar>\n      </template>\n\n      <template v-slot:item.actions=\"{ item }\">\n        <v-tooltip text=\"Editar\" location=\"top\">\n          <template v-slot:activator=\"{ props }\">\n            <v-btn\n              v-bind=\"props\"\n              density=\"compact\"\n              class=\"mr-2 ml-2\"\n              color=\"#009AA4\"\n              variant=\"tonal\"\n              :icon=\"'mdi-account-edit'\"\n              @click=\"openFormEdit(item)\"\n            ></v-btn>\n          </template>\n        </v-tooltip>\n\n        <v-tooltip text=\"Eliminar\" location=\"top\">\n          <template v-slot:activator=\"{ props }\">\n            <v-btn\n              v-bind=\"props\"\n              density=\"compact\"\n              class=\"mr-2 ml-2\"\n              color=\"#009AA4\"\n              variant=\"tonal\"\n              :icon=\"'mdi-delete'\"\n              @click=\"remove(item)\"\n            ></v-btn>\n          </template>\n        </v-tooltip>\n      </template>\n      <template v-slot:no-data>\n        <v-btn variant=\"tonal\" @click=\"handleShow\"> Iniciar </v-btn>\n      </template>\n    </v-data-table>\n  </v-container>\n</template>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAcE,UAAM,QAAQ;AACd,UAAM,QAAQ,SAAS;AAAA,MACrB,WAAW,CAAC,EAAE;AAAA,MACd,SAAS;AAAA,QACP;AAAA,UACE,OAAO;AAAA,UACP,OAAO;AAAA,UACP,UAAU;AAAA,QACX;AAAA,QACD,EAAE,OAAO,cAAc,KAAK,cAAc,UAAU,MAAO;AAAA,QAC3D,EAAE,OAAO,YAAY,OAAO,UAAU,KAAK,UAAW;AAAA,MACvD;AAAA,MACD,YAAY;AAAA,QACV,aAAa;AAAA,QACb,YAAY;AAAA,MACb;AAAA,MACD,aAAa;AAAA,QACX,aAAa;AAAA,QACb,YAAY;AAAA,MACb;AAAA,MACD,aAAa;AAAA,QACX,aAAa;AAAA,MACd;AAAA,MACD,QAAQ;AAAA,MACR,YAAY,CAAE;AAAA,MACd,aAAa;AAAA,MACb,MAAM,CAAE;AAAA,MACR,SAAS;AAAA,MACT,OAAO;AAAA,MACP,WAAW;AAAA,MACX,WAAW;AAAA,MACX,UAAU;AAAA,MACV,SAAS;AAAA,MACT,WAAW;AAAA,MACX,WAAW;AAAA,MACX,UAAU;AAAA,IACd,CAAG;AAGD,cAAU,YAAY;AACpB,YAAM,OAAO,MAAM,aAAa,MAAM,SAAS;AAAA,IACnD,CAAG;AAGD,UAAM,kBAAkB;AAAA,MAAS,MAC/B,MAAM,gBAAgB,KAAK,MAAM,YAAY,MAAM;AAAA,IACvD;AAEE,aAAS,QAAQ;AACf,gBAAU,KAAK;AAAA,IACjB;AAEA,UAAM,aAAa,YAAY;AAC7B,YAAM,YAAY,cAAc,MAAM,YAAY;AAClD,YAAM,eAAe,KAAK;AAAA,IAC9B;AAEE,aAAS,iBAAiB;AACxB,mBAAa,KAAK;AAAA,IACpB;AAEA,aAAS,aAAa;AACpB,aAAO,MAAM,cAAc,KAAK,OAAM,IAAK;IAC7C;AAEA,UAAM,SAAS,YAAY;AACzB,YAAM,gBAAgB,KAAK;AAC3B,gBAAU,KAAK;AAAA,IACnB;AAEE,aAAS,aAAa,MAAM;AAC1B,iBAAW,OAAO,IAAI;AAAA,IACxB;AAEA,UAAM,SAAS,YAAY;AACzB,YAAM,eAAe,KAAK;AAC1B,gBAAU,KAAK;AAAA,IACnB;AAEE,UAAM,SAAS,OAAO,SAAS;AAC7B,YAAM,iBAAiB,OAAO,IAAI;AAAA,IACtC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}