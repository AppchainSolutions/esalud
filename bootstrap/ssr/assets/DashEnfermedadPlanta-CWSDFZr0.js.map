{"version":3,"file":"DashEnfermedadPlanta-CWSDFZr0.js","sources":["../../../resources/js/Pages/SubPages/DashEnfermedadPlanta.vue"],"sourcesContent":["<script setup>\n  import axios from \"axios\";\n  import { Doughnut } from \"vue-chartjs\";\n  import { onMounted, reactive } from \"vue\";\n  import autocolors from \"chartjs-plugin-autocolors\";\n  import { fetchData } from \"@/helper.js\";\n  import {\n    Chart as ChartJS,\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement,\n    CategoryScale,\n    LinearScale,\n  } from \"chart.js\";\n\n  ChartJS.register(\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement,\n    CategoryScale,\n    LinearScale,\n    autocolors\n  );\n\n  const state = reactive({\n    endpoints: [\"planta\"],\n    list: [],\n    planta: null,\n    loaded: false,\n  });\n\n  const chartData = reactive({\n    labels: [],\n    datasets: [\n      {\n        data: [],\n      },\n    ],\n  });\n\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: true,\n    plugins: {\n      autocolors: {\n        mode: \"data\",\n      },\n    },\n  };\n\n  const onChange = async (value) => {\n    await getData(state.planta);\n    console.log(state.planta);\n    state.loaded = true;\n  };\n\n  const getData = async (empresa) => {\n    try {\n      state.loaded = false;\n      let id = empresa;\n      const { data } = await axios.get(\"/dashboard/enfermedad_planta\", {\n        params: { id },\n      });\n      const objArray = Object.values(data);\n      console.log(objArray);\n      chartData.labels = data.descripcion;\n      chartData.datasets[0].data = data.total;\n    } catch (error) {\n      console.log(\"Error al obtener los datos.\" + error);\n    }\n  };\n\n  onMounted(async () => {\n    try {\n      state.list = await fetchData(state.endpoints);\n    } catch (error) {\n      console.log(error);\n    }\n  });\n</script>\n\n<template>\n  <div style=\"width: 80%\">\n    <v-select\n      :items=\"state.list.planta\"\n      item-title=\"descripcion\"\n      item-value=\"id\"\n      v-model=\"state.planta\"\n      label=\"Planta\"\n      clearable\n      class=\"ma-4 mt-8\"\n      variant=\"underlined\"\n      @update:modelValue=\"onChange()\"\n      single\n    ></v-select>\n\n    <Doughnut :options=\"chartOptions\" :data=\"chartData\" v-if=\"state.loaded\" />\n  </div>\n</template>\n"],"names":["ChartJS"],"mappings":";;;;;;;;;;;;;;;;AAgBEA,UAAQ;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAED,UAAM,QAAQ,SAAS;AAAA,MACrB,WAAW,CAAC,QAAQ;AAAA,MACpB,MAAM,CAAE;AAAA,MACR,QAAQ;AAAA,MACR,QAAQ;AAAA,IACZ,CAAG;AAED,UAAM,YAAY,SAAS;AAAA,MACzB,QAAQ,CAAE;AAAA,MACV,UAAU;AAAA,QACR;AAAA,UACE,MAAM,CAAE;AAAA,QACT;AAAA,MACF;AAAA,IACL,CAAG;AAED,UAAM,eAAe;AAAA,MACnB,YAAY;AAAA,MACZ,qBAAqB;AAAA,MACrB,SAAS;AAAA,QACP,YAAY;AAAA,UACV,MAAM;AAAA,QACP;AAAA,MACF;AAAA,IACF;AAED,UAAM,WAAW,OAAO,UAAU;AAChC,YAAM,QAAQ,MAAM,MAAM;AAC1B,cAAQ,IAAI,MAAM,MAAM;AACxB,YAAM,SAAS;AAAA,IAChB;AAED,UAAM,UAAU,OAAO,YAAY;AACjC,UAAI;AACF,cAAM,SAAS;AACf,YAAI,KAAK;AACT,cAAM,EAAE,KAAM,IAAG,MAAM,MAAM,IAAI,gCAAgC;AAAA,UAC/D,QAAQ,EAAE,GAAI;AAAA,QACtB,CAAO;AACD,cAAM,WAAW,OAAO,OAAO,IAAI;AACnC,gBAAQ,IAAI,QAAQ;AACpB,kBAAU,SAAS,KAAK;AACxB,kBAAU,SAAS,CAAC,EAAE,OAAO,KAAK;AAAA,MACnC,SAAQ,OAAO;AACd,gBAAQ,IAAI,gCAAgC,KAAK;AAAA,MACvD;AAAA,IACG;AAED,cAAU,YAAY;AACpB,UAAI;AACF,cAAM,OAAO,MAAM,UAAU,MAAM,SAAS;AAAA,MAC7C,SAAQ,OAAO;AACd,gBAAQ,IAAI,KAAK;AAAA,MACvB;AAAA,IACA,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}