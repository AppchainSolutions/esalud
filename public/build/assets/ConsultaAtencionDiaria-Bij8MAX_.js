import{s as L,x as I,i as o,o as M,c as z,w as i,b as t,e as w,t as A,n as B,m as F,a as N}from"./app-DGHO5O1D.js";import{A as j}from"./AppLayout-BdEorAE2.js";import{f as P,h as H}from"./helper-DsNffL06.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DIp7Rf8v.js";import"./store-BSbL8kpK.js";const q={class:"text-h5"},K=Object.assign({layout:j},{__name:"ConsultaAtencionDiaria",setup(O){const e=L({endpoints:["area","ceco","empresa","planta","unidad","accidente","accidente_condicion","calificacion","derivacion","medio_derivacion","error_critico","estado_mental","fuente_incidente","responsable","sistema_afectado","tipo_atencion","tipo_licencia","lugar_atencion","turno"],headers:[{title:"RUT",align:"center",sortable:!0,key:"rut"},{title:"Nombre",align:"center",sortable:!0,key:"nombre"},{title:"Apellidos",sortable:!0,align:"center",key:"apellidos"},{title:"Empresa",sortable:!0,align:"center",key:"empresa.descripcion"},{title:"Fecha de atención",sortable:!0,align:"center",key:"fecha_atencion"},{title:"Tipo de atención",sortable:!0,align:"center",key:"tipo_atencion.descripcion"},{title:"Acciones",align:"center",key:"actions"}],validations:{rutRules:[s=>{if(!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(s))return!1;let c=s.split("-"),m=c[0],f=c[1].toLowerCase(),p=0,d=1;for(;m;m=Math.floor(m/10))d=(d+m%10*(9-p++%6))%11;let n=d?d-1:"k";return f==n?!0:"El rut es incorrecto"}],startDateRules:[s=>!!s||"La fecha de inicio es requerida"],endDateRules:[s=>!!s||"La fecha de término es requerida"]},itemsView:{id:null,paciente_id:null,rut:null,nombre:null,apellidos:null,accidente:null,acompanado:null,alerta_she:null,area:null,at_realizada_por:null,calificacion:null,ceco:null,comentario:null,cuenta_acr:null,declaracion_completa:null,derivacion_inmediata:null,derivacion:null,descripcion_breve:null,dias_descanso:null,error_critico:null,estado_mental:null,fecha_atencion:null,fuente_incidente:null,hora_inicio:null,hora_termino:null,lugar_atencion:null,medicamentos:null,medio_derivacion:null,motivo_consulta:null,nombre_supervisor:null,puede_reintegrarse:null,responsable:null,sistema_afectado:null,tipo_atencion:null,tipo_licencia:null,turno:null},searchQuery:{rut:null,empresa:null,area:null,activo:"true",unidad:null,planta:null,ceco:null,lugar_atencion:null,tipo_atencion:null,fecha_atencion:{desde:null,hasta:null}},dialog:!1,tableItems:[],formItems:[],editedIndex:-1,loadingSearch:!1,list:[],valid:null,formTitle:"Consulta de Atenciones Diarias",urlSearch:"/consulta/atencion_diaria/search"});I(async()=>{e.list=await P(e.endpoints)});function Q(s){e.dialog=!0,e.itemsView={...s}}function C(){e.dialog=!1}const k=async()=>{await H(e)};return(s,l)=>{const c=o("v-toolbar-title"),m=o("v-spacer"),f=o("v-toolbar"),p=o("v-card-title"),d=o("v-text-field"),n=o("v-select"),r=o("v-switch"),u=o("v-col"),y=o("v-row"),b=o("v-card-text"),V=o("v-btn"),D=o("download-excel"),U=o("v-card-actions"),v=o("v-container"),g=o("v-form"),T=o("v-tooltip"),R=o("v-data-table"),_=o("v-sheet"),x=o("v-card"),S=o("v-dialog");return M(),z(v,{fluid:""},{default:i(()=>[t(x,null,{default:i(()=>[t(p,null,{default:i(()=>[t(f,{flat:""},{default:i(()=>[t(c,null,{default:i(()=>[w(A(e.formTitle),1)]),_:1}),t(m)]),_:1})]),_:1}),t(b,null,{default:i(()=>[t(_,{color:"white",elevation:4,class:B("rounded-lg ma-2 pa-2")},{default:i(()=>[t(g,null,{default:i(()=>[t(v,{fluid:""},{default:i(()=>[t(b,null,{default:i(()=>[t(y,null,{default:i(()=>[t(u,{cols:"12",md:"3"},{default:i(()=>[t(d,{label:"Rut",modelValue:e.searchQuery.rut,"onUpdate:modelValue":l[0]||(l[0]=a=>e.searchQuery.rut=a),variant:"underlined",rules:e.rutRules,type:"text",class:"mt-2",clearable:""},null,8,["modelValue","rules"]),t(n,{items:e.list.planta,"item-title":"descripcion","item-value":"id",label:"Planta",modelValue:e.searchQuery.planta,"onUpdate:modelValue":l[1]||(l[1]=a=>e.searchQuery.planta=a),variant:"underlined",class:"mt-2",clearable:""},null,8,["items","modelValue"]),t(n,{class:"mt-2",items:e.list.ceco,"item-title":"descripcion","item-value":"id",label:"Area de Trabajo (Cencos)",variant:"underlined",modelValue:e.searchQuery.ceco,"onUpdate:modelValue":l[2]||(l[2]=a=>e.searchQuery.ceco=a),clearable:""},null,8,["items","modelValue"]),t(r,{modelValue:e.searchQuery.activo,"onUpdate:modelValue":l[3]||(l[3]=a=>e.searchQuery.activo=a),"hide-details":"","true-value":"true","false-value":"false",class:"ml-4 mt-4",variant:"underlined",color:"green-darken-3",inset:"",label:"Activo"},null,8,["modelValue"])]),_:1}),t(u,{cols:"12",md:"4"},{default:i(()=>[t(n,{items:e.list.unidad,"item-title":"descripcion","item-value":"id",label:"Unidad",modelValue:e.searchQuery.unidad,"onUpdate:modelValue":l[4]||(l[4]=a=>e.searchQuery.unidad=a),variant:"underlined",class:"mt-2",clearable:""},null,8,["items","modelValue"]),t(n,{items:e.list.empresa,"item-title":"descripcion","item-value":"id",label:"Empresa",class:"mt-2",modelValue:e.searchQuery.empresa,"onUpdate:modelValue":l[5]||(l[5]=a=>e.searchQuery.empresa=a),variant:"underlined",clearable:""},null,8,["items","modelValue"]),t(n,{items:e.list.area,"item-title":"descripcion","item-value":"id",label:"Area",class:"mt-2",variant:"underlined",modelValue:e.searchQuery.area,"onUpdate:modelValue":l[6]||(l[6]=a=>e.searchQuery.area=a),clearable:""},null,8,["items","modelValue"])]),_:1}),t(u,{cols:"12",md:"4"},{default:i(()=>[t(d,{modelValue:e.searchQuery.fecha_atencion.desde,"onUpdate:modelValue":l[7]||(l[7]=a=>e.searchQuery.fecha_atencion.desde=a),rules:e.validations.startDateRules,label:"Fecha desde",type:"date",variant:"underlined",class:"mt-2",clearable:""},null,8,["modelValue","rules"]),t(d,{modelValue:e.searchQuery.fecha_atencion.hasta,"onUpdate:modelValue":l[8]||(l[8]=a=>e.searchQuery.fecha_atencion.hasta=a),rules:e.validations.endDateRules,label:"Fecha hasta",type:"date",variant:"underlined",class:"mt-2",clearable:""},null,8,["modelValue","rules"]),t(n,{items:e.list.lugar_atencion,"item-title":"descripcion","item-value":"id",label:"Lugar de atencion",class:"mt-2",variant:"underlined",modelValue:e.searchQuery.lugar_atencion,"onUpdate:modelValue":l[9]||(l[9]=a=>e.searchQuery.lugar_atencion=a),clearable:""},null,8,["items","modelValue"]),t(n,{items:e.list.tipo_atencion,"item-title":"descripcion","item-value":"id",label:"Tipo de atencion",class:"mt-2",variant:"underlined",modelValue:e.searchQuery.tipo_atencion,"onUpdate:modelValue":l[10]||(l[10]=a=>e.searchQuery.tipo_atencion=a),clearable:""},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1}),t(U,null,{default:i(()=>[t(V,{"prepend-icon":"mdi-file-search",variant:"tonal",color:"#009AA4",loading:e.loadingSearch,onClick:l[11]||(l[11]=a=>k())},{default:i(()=>l[42]||(l[42]=[w(" Buscar ")])),_:1},8,["loading"]),t(V,{"prepend-icon":"mdi-microsoft-excel",variant:"tonal",color:"#009AA4"},{default:i(()=>[t(D,{data:e.tableItems,name:"consulta_atenciones_diarias.xls"},{default:i(()=>l[43]||(l[43]=[w(" Bajar archivo ")])),_:1},8,["data"])]),_:1})]),_:1})]),_:1})]),_:1}),t(v,{fluid:""},{default:i(()=>[t(R,{headers:e.headers,items:e.tableItems,"sort-by":[{key:"apellidos",order:"asc"}]},{"item.actions":i(({item:a})=>[t(T,{text:"Ver detalles",location:"top"},{activator:i(({props:E})=>[t(V,F(E,{density:"compact",color:"#009AA4",class:"mr-2 ml-2",icon:"mdi-eye",variant:"tonal",onClick:G=>Q(a)}),null,16,["onClick"])]),_:2},1024)]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{readonly:""},{default:i(()=>[t(v,null,{default:i(()=>[t(S,{modelValue:e.dialog,"onUpdate:modelValue":l[41]||(l[41]=a=>e.dialog=a)},{default:i(()=>[t(_,{elevation:"4",class:"ma-4 pa-4"},{default:i(()=>[t(x,null,{default:i(()=>[t(_,{elevation:"2",class:"ma-2 pa-2"},{default:i(()=>[t(p,null,{default:i(()=>[N("span",q,A(e.formTitle),1)]),_:1})]),_:1}),t(b,null,{default:i(()=>[t(y,null,{default:i(()=>[t(u,null,{default:i(()=>[t(d,{modelValue:e.itemsView.fecha_atencion,"onUpdate:modelValue":l[12]||(l[12]=a=>e.itemsView.fecha_atencion=a),label:"Fecha de atención",type:"text",variant:"underlined"},null,8,["modelValue"]),t(n,{modelValue:e.itemsView.turno,"onUpdate:modelValue":l[13]||(l[13]=a=>e.itemsView.turno=a),items:e.list.turno,"item-title":"descripcion","item-value":"id",label:"Turno",variant:"underlined"},null,8,["modelValue","items"]),t(n,{modelValue:e.itemsView.sistema_afectado,"onUpdate:modelValue":l[14]||(l[14]=a=>e.itemsView.sistema_afectado=a),items:e.list.sistema_afectado,"item-title":"descripcion","item-value":"id",label:"Sistema afectado",variant:"underlined"},null,8,["modelValue","items"]),t(n,{modelValue:e.itemsView.derivacion,"onUpdate:modelValue":l[15]||(l[15]=a=>e.itemsView.derivacion=a),items:e.list.derivacion,"item-title":"descripcion","item-value":"id",label:"Derivación",variant:"underlined"},null,8,["modelValue","items"]),t(n,{modelValue:e.itemsView.medio_derivacion,"onUpdate:modelValue":l[16]||(l[16]=a=>e.itemsView.medio_derivacion=a),items:e.list.medio_derivacion,"item-title":"descripcion","item-value":"id",label:"Medio de derivación",variant:"underlined"},null,8,["modelValue","items"]),t(n,{modelValue:e.itemsView.fuente_incidente,"onUpdate:modelValue":l[17]||(l[17]=a=>e.itemsView.fuente_incidente=a),items:e.list.fuente_incidente,"item-title":"descripcion","item-value":"id",label:"Fuente de incidente",variant:"underlined"},null,8,["modelValue","items"]),t(n,{modelValue:e.itemsView.error_critico,"onUpdate:modelValue":l[18]||(l[18]=a=>e.itemsView.error_critico=a),items:e.list.error_critico,"item-title":"descripcion","item-value":"id",label:"Error crítico",variant:"underlined"},null,8,["modelValue","items"]),t(n,{modelValue:e.itemsView.estado_mental,"onUpdate:modelValue":l[19]||(l[19]=a=>e.itemsView.estado_mental=a),items:e.list.estado_mental,"item-title":"descripcion","item-value":"id",label:"Estado Mental",variant:"underlined"},null,8,["modelValue","items"])]),_:1}),t(u,null,{default:i(()=>[t(d,{modelValue:e.itemsView.motivo_consulta,"onUpdate:modelValue":l[20]||(l[20]=a=>e.itemsView.motivo_consulta=a),label:"Motivo de consulta",type:"text",variant:"underlined"},null,8,["modelValue"]),t(n,{modelValue:e.itemsView.accidente,"onUpdate:modelValue":l[21]||(l[21]=a=>e.itemsView.accidente=a),items:e.list.accidente,"item-title":"descripcion","item-value":"id",label:"Accidente",variant:"underlined"},null,8,["modelValue","items"]),t(d,{modelValue:e.itemsView.medicamentos,"onUpdate:modelValue":l[22]||(l[22]=a=>e.itemsView.medicamentos=a),label:"Medicamento suministrados",type:"text",variant:"underlined"},null,8,["modelValue"]),t(n,{modelValue:e.itemsView.accidente_condicion,"onUpdate:modelValue":l[23]||(l[23]=a=>e.itemsView.accidente_condicion=a),items:e.list.accidente_condicion,"item-title":"descripcion","item-value":"id",label:"Accidente ocurre por una acción o condición insegura",variant:"underlined"},null,8,["modelValue","items"]),t(n,{modelValue:e.itemsView.responsable,"onUpdate:modelValue":l[24]||(l[24]=a=>e.itemsView.responsable=a),items:e.list.responsable,"item-title":"descripcion","item-value":"id",label:"Responsable",variant:"underlined"},null,8,["modelValue","items"]),t(d,{modelValue:e.itemsView.nombre_supervisor,"onUpdate:modelValue":l[25]||(l[25]=a=>e.itemsView.nombre_supervisor=a),label:"Nombre supervisor",type:"text",variant:"underlined"},null,8,["modelValue"]),t(d,{modelValue:e.itemsView.at_realizada_por,"onUpdate:modelValue":l[26]||(l[26]=a=>e.itemsView.at_realizada_por=a),label:"Atención realizada por",type:"text",variant:"underlined"},null,8,["modelValue"])]),_:1}),t(u,null,{default:i(()=>[t(d,{modelValue:e.itemsView.hora_inicio,"onUpdate:modelValue":l[27]||(l[27]=a=>e.itemsView.hora_inicio=a),label:"Hora de inicio",type:"time",variant:"underlined"},null,8,["modelValue"]),t(d,{modelValue:e.itemsView.hora_termino,"onUpdate:modelValue":l[28]||(l[28]=a=>e.itemsView.hora_termino=a),label:"Hora de termino",type:"time",variant:"underlined"},null,8,["modelValue"]),t(d,{modelValue:e.itemsView.dias_descanso,"onUpdate:modelValue":l[29]||(l[29]=a=>e.itemsView.dias_descanso=a),label:"Días de descanso",type:"number",variant:"underlined"},null,8,["modelValue"]),t(n,{modelValue:e.itemsView.calificacion,"onUpdate:modelValue":l[30]||(l[30]=a=>e.itemsView.calificacion=a),items:e.list.calificacion,"item-title":"descripcion","item-value":"id",label:"Calificación",variant:"underlined"},null,8,["modelValue","items"]),t(n,{modelValue:e.itemsView.lugar_atencion,"onUpdate:modelValue":l[31]||(l[31]=a=>e.itemsView.lugar_atencion=a),items:e.list.lugar_atencion,"item-title":"descripcion","item-value":"id",label:"Lugar de atención",variant:"underlined"},null,8,["modelValue","items"]),t(n,{modelValue:e.itemsView.tipo_atencion,"onUpdate:modelValue":l[32]||(l[32]=a=>e.itemsView.tipo_atencion=a),items:e.list.tipo_atencion,"item-title":"descripcion","item-value":"id",label:"Tipo de atención",variant:"underlined"},null,8,["modelValue","items"]),t(n,{modelValue:e.itemsView.tipo_licencia,"onUpdate:modelValue":l[33]||(l[33]=a=>e.itemsView.tipo_licencia=a),items:e.list.tipo_licencia,"item-title":"descripcion","item-value":"id",label:"Tipo de Licencia",variant:"underlined"},null,8,["modelValue","items"]),t(d,{modelValue:e.itemsView.descripcion_breve,"onUpdate:modelValue":l[34]||(l[34]=a=>e.itemsView.descripcion_breve=a),label:"Descripción breve",type:"text",variant:"underlined"},null,8,["modelValue"])]),_:1}),t(u,null,{default:i(()=>[t(r,{modelValue:e.itemsView.acompanado,"onUpdate:modelValue":l[35]||(l[35]=a=>e.itemsView.acompanado=a),class:"mt-2 mb-4",label:"Acompañado/a",color:"success","hide-details":"",inset:"",variant:"underlined"},null,8,["modelValue"]),t(r,{modelValue:e.itemsView.derivacion_inmediata,"onUpdate:modelValue":l[36]||(l[36]=a=>e.itemsView.derivacion_inmediata=a),class:"mt-2 mb-4",label:"Derivación inmediata",color:"success","hide-details":"",inset:"",variant:"underlined"},null,8,["modelValue"]),t(r,{modelValue:e.itemsView.alerta_she,"onUpdate:modelValue":l[37]||(l[37]=a=>e.itemsView.alerta_she=a),class:"mt-2 mb-4",label:"Alerta SHE",color:"success","hide-details":"",inset:"",variant:"underlined"},null,8,["modelValue"]),t(r,{modelValue:e.itemsView.declaracion_completa,"onUpdate:modelValue":l[38]||(l[38]=a=>e.itemsView.declaracion_completa=a),class:"mt-2 mb-4",label:"Declaración completa",color:"success","hide-details":"",inset:"",variant:"underlined"},null,8,["modelValue"]),t(r,{modelValue:e.itemsView.puede_reintegrarse,"onUpdate:modelValue":l[39]||(l[39]=a=>e.itemsView.puede_reintegrarse=a),class:"mt-2 mb-4",label:"Puede reintegrarse",color:"success","hide-details":"",inset:"",variant:"underlined"},null,8,["modelValue"]),t(r,{modelValue:e.itemsView.cuenta_acr,"onUpdate:modelValue":l[40]||(l[40]=a=>e.itemsView.cuenta_acr=a),class:"mt-2 mb-4",label:"Cuenta ACR",color:"success","hide-details":"",inset:"",v:"",ariant:"solo"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(_,{elevation:"2",class:"ma-2 pa-2"},{default:i(()=>[t(U,null,{default:i(()=>[t(V,{class:"mr-2 ml-2",color:"#009AA4",text:"Cerrar",variant:"tonal",onClick:C})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}}),ee=$(K,[["__file","/home/omar/www/esalud/resources/js/Pages/Consultas/ConsultaAtencionDiaria.vue"]]);export{ee as default};
//# sourceMappingURL=ConsultaAtencionDiaria-Bij8MAX_.js.map
