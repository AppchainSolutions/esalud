import{x as P,y as S,j as n,o as B,c as F,w as o,b as e,f as b,t as R,n as j,m as L,a as N}from"./app-BBz_71JK.js";import{A as O}from"./AppLayout-DsoETax5.js";import{f as G,h as T}from"./helper-BhTs97-d.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DIp7Rf8v.js";import"./store-BvV1M5Rm.js";const M=Object.assign({layout:O},{__name:"ConsultaExAlcohol",setup(z){const l=P({endpoints:["area","ceco","empresa","planta","unidad","estado_epo"],headers:[{title:"Rut",align:"start",sortable:!0,key:"rut"},{title:"Nombre",align:"start",sortable:!0,key:"nombre"},{title:"Apellidos",align:"start",sortable:!0,key:"apellidos"},{title:"Empresa",align:"start",sortable:!0,key:"empresa.descripcion"},{title:"IDPGP",align:"start",sortable:!0,key:"idpgp"},{title:"Estado",align:"start",sortable:!0,key:"estado_epo.descripcion"},{title:"Fecha de Control",align:"start",sortable:!0,key:"fecha_control"},{title:"Fecha de Ingreso",align:"start",sortable:!0,key:"fecha_ingreso"},{title:"Acciones",align:"center",key:"actions"}],searchQuery:{activo:"true",area:null,ceco:null,empresa:null,planta:null,rut:null,unidad:null,fecha_control:{desde:null,hasta:null}},rutRules:[d=>{if(!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(d))return!1;let u=d.split("-"),s=u[0],f=u[1].toLowerCase(),m=0,r=1;for(;s;s=Math.floor(s/10))r=(r+s%10*(9-m++%6))%11;let i=r?r-1:"k";return f===i?!0:"El rut es incorrecto"}],itemsView:{paciente_id:null,idpgp:null,estatus:null,fecha_control:null,fecha_ingreso:null,fecha_prox_control:null,fecha_ult_control:null,comentario:null},dialog:!1,tableItems:[],formItems:[],editedIndex:-1,list:[],valid:null,formTitle:"Examen Alcohol y Drogas",urlSearch:"/consulta/exalcohol/search"});S(async()=>{l.list=await G(l.endpoints)});function w(d){l.dialog=!0,l.itemsView={...d}}function k(){l.dialog=!1}const A=async()=>{await T(l)};return(d,t)=>{const u=n("v-toolbar-title"),s=n("v-spacer"),f=n("v-toolbar"),m=n("v-card-title"),r=n("v-text-field"),i=n("v-select"),y=n("v-switch"),c=n("v-col"),g=n("v-row"),V=n("v-card-text"),p=n("v-btn"),C=n("download-excel"),h=n("v-card-actions"),_=n("v-container"),Q=n("v-tooltip"),U=n("v-data-table"),v=n("v-sheet"),x=n("v-card"),E=n("v-form"),I=n("v-dialog");return B(),F(_,{fluid:""},{default:o(()=>[e(x,null,{default:o(()=>[e(m,null,{default:o(()=>[e(f,{flat:""},{default:o(()=>[e(u,null,{default:o(()=>[b(R(l.formTitle),1)]),_:1}),e(s)]),_:1})]),_:1}),e(V,null,{default:o(()=>[e(v,{color:"white",elevation:4,class:j("rounded-lg ma-2 pa-2")},{default:o(()=>[e(_,{fluid:""},{default:o(()=>[e(V,null,{default:o(()=>[e(g,null,{default:o(()=>[e(c,null,{default:o(()=>[e(r,{label:"Rut",variant:"underlined",rules:l.rutRules,modelValue:l.searchQuery.rut,"onUpdate:modelValue":t[0]||(t[0]=a=>l.searchQuery.rut=a),clearable:""},null,8,["rules","modelValue"]),e(i,{label:"Empresa",variant:"underlined",modelValue:l.searchQuery.empresa,"onUpdate:modelValue":t[1]||(t[1]=a=>l.searchQuery.empresa=a),items:l.list.empresa,"item-title":"descripcion","item-value":"id",clearable:""},null,8,["modelValue","items"]),e(i,{label:"Unidad",variant:"underlined",modelValue:l.searchQuery.unidad,"onUpdate:modelValue":t[2]||(t[2]=a=>l.searchQuery.unidad=a),items:l.list.unidad,"item-title":"descripcion","item-value":"id",clearable:""},null,8,["modelValue","items"]),e(i,{label:"Area",modelValue:l.searchQuery.area,"onUpdate:modelValue":t[3]||(t[3]=a=>l.searchQuery.area=a),variant:"underlined",items:l.list.area,"item-title":"descripcion","item-value":"id",clearable:""},null,8,["modelValue","items"]),e(i,{label:"Area (cecos)",modelValue:l.searchQuery.ceco,"onUpdate:modelValue":t[4]||(t[4]=a=>l.searchQuery.ceco=a),variant:"underlined",items:l.list.ceco,"item-title":"descripcion","item-value":"id",clearable:""},null,8,["modelValue","items"]),e(y,{modelValue:l.searchQuery.activo,"onUpdate:modelValue":t[5]||(t[5]=a=>l.searchQuery.activo=a),"hide-details":"","true-value":"true","false-value":"false",class:"ml-4 mt-4",variant:"underlined",color:"green-darken-3",inset:"",clearable:"",label:"Activo"},null,8,["modelValue"])]),_:1}),e(c,null,{default:o(()=>[e(r,{label:"Fecha control (desde)",variant:"underlined",modelValue:l.searchQuery.fecha_control.desde,"onUpdate:modelValue":t[6]||(t[6]=a=>l.searchQuery.fecha_control.desde=a),type:"date",clearable:""},null,8,["modelValue"]),e(r,{label:"Fecha control (hasta)",variant:"underlined",type:"date",clearable:"",modelValue:l.searchQuery.fecha_control.hasta,"onUpdate:modelValue":t[7]||(t[7]=a=>l.searchQuery.fecha_control.hasta=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,null,{default:o(()=>[e(p,{"prepend-icon":"mdi-file-search",variant:"tonal",color:"#009AA4",loading:l.loading,onClick:A},{default:o(()=>t[16]||(t[16]=[b(" Buscar ")])),_:1},8,["loading"]),e(p,{"prepend-icon":"mdi-microsoft-excel",variant:"tonal",color:"#009AA4"},{default:o(()=>[e(C,{data:l.tableItems,name:"consulta_alcoholydrogas.xls"},{default:o(()=>t[17]||(t[17]=[b(" Bajar archivo ")])),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),e(_,{fluid:""},{default:o(()=>[e(U,{headers:l.headers,items:l.tableItems,"sort-by":[{key:"apellidos",order:"asc"}]},{"item.actions":o(({item:a})=>[e(Q,{text:"Ver detalles",location:"top"},{activator:o(({props:D})=>[e(p,L(D,{density:"compact",color:"#662D91",class:"mr-2 ml-2",icon:"mdi-eye",onClick:H=>w(a)}),null,16,["onClick"])]),_:2},1024)]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),e(_,null,{default:o(()=>[e(I,{modelValue:l.dialog,"onUpdate:modelValue":t[15]||(t[15]=a=>l.dialog=a)},{default:o(()=>[e(v,{elevation:"4",class:"ma-4 pa-4"},{default:o(()=>[e(x,null,{default:o(()=>[e(E,{readonly:""},{default:o(()=>[e(v,{elevation:"2",class:"ma-2 pa-2"},{default:o(()=>[e(m,null,{default:o(()=>t[18]||(t[18]=[N("span",{class:"text-h5"}," Consulta exámenes ALCOHOL Y DROGAS ",-1)])),_:1})]),_:1}),e(V,null,{default:o(()=>[e(g,null,{default:o(()=>[e(c,null,{default:o(()=>[e(r,{modelValue:l.itemsView.idpgp,"onUpdate:modelValue":t[8]||(t[8]=a=>l.itemsView.idpgp=a),label:"IDPGP",type:"number",variant:"underlined"},null,8,["modelValue"]),e(r,{modelValue:l.itemsView.estatus,"onUpdate:modelValue":t[9]||(t[9]=a=>l.itemsView.estatus=a),label:"Estatus",type:"text",variant:"underlined"},null,8,["modelValue"]),e(r,{modelValue:l.itemsView.fecha_control,"onUpdate:modelValue":t[10]||(t[10]=a=>l.itemsView.fecha_control=a),label:"Fecha de control",type:"date",variant:"underlined"},null,8,["modelValue"]),e(r,{modelValue:l.itemsView.sustancia,"onUpdate:modelValue":t[11]||(t[11]=a=>l.itemsView.sustancia=a),label:"Sustancia",type:"text",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(c,null,{default:o(()=>[e(r,{modelValue:l.itemsView.item,"onUpdate:modelValue":t[12]||(t[12]=a=>l.itemsView.item=a),label:"Item",type:"text",variant:"underlined"},null,8,["modelValue"]),e(r,{modelValue:l.itemsView.comentario,"onUpdate:modelValue":t[13]||(t[13]=a=>l.itemsView.comentario=a),label:"Comentario",type:"text",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{elevation:"2",class:"ma-2 pa-2"},{default:o(()=>[e(h,null,{default:o(()=>[e(p,{class:"mr-2 ml-2",color:"#009AA4",text:"Cerrar",variant:"tonal",onClick:t[14]||(t[14]=a=>k())})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Z=$(M,[["__file","/home/blueshadows/www/app-empresas/resources/js/Pages/Consultas/ConsultaExAlcohol.vue"]]);export{Z as default};
//# sourceMappingURL=ConsultaExAlcohol-PQ_TTHGU.js.map
