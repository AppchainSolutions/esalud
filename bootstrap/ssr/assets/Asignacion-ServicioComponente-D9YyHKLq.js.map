{"version":3,"file":"Asignacion-ServicioComponente-D9YyHKLq.js","sources":["../../../resources/js/Pages/SubPages/Componentes/Asignacion-ServicioComponente.vue"],"sourcesContent":["<script setup>\nimport AppLayout from \"@/Layouts/AppLayout.vue\";\nimport { reactive, onMounted, computed } from \"vue\";\nimport { useDataStore } from \"@/store.js\";\nimport {\n    closeForm,\n    fetchAllData,\n    handleEditItem,\n    handleRemoveItem,\n    handleSearchItem,\n    handleStoreItem,\n    openToCreate,\n    openToEdit,\n} from \"@/helper.js\";\n\ndefineOptions({ layout: AppLayout });\n\nconst store = useDataStore();\n\nconst state = reactive({\n    endpoints: [\"especialidades\"],\n\n    headers: [\n        {\n            title: \"#\",\n            align: \"center\",\n            sortable: true,\n            key: \"paciente_id\",\n        },\n        {\n            title: \"Motivo de consulta\",\n            align: \"center\",\n            sortable: true,\n            key: \"motivo_consulta\",\n        },\n        {\n            title: \"Accidente\",\n            align: \"center\",\n            sortable: true,\n            key: \"accidente.descripcion\",\n        },\n        { title: \"Fecha atencion\", key: \"fecha_atencion\", sortable: true },\n        { title: \"Acciones\", align: \"center\", key: \"actions\" },\n    ],\n    horario: {\n        headers: [\n            {\n                text: \"Día de la semana\",\n                align: \"center\",\n                sortable: true,\n                value: \"dia\",\n            },\n            {\n                text: \"Hora inicio\",\n                align: \"center\",\n                sortable: true,\n                value: \"horaInicio\",\n            },\n            {\n                text: \"Hora término\",\n                align: \"center\",\n                sortable: true,\n                value: \"horaTermino\",\n            },\n            {\n                text: \"Disponible (S/N)\",\n                align: \"center\",\n                sortable: true,\n                value: \"disponible\",\n            },\n        ],\n        items: [\n            {\n                dia: \"Lunes\",\n                horaInicio: \"08:00\",\n                horaTermino: \"08:45\",\n                disponible: \"S\",\n            },\n            {\n                dia: \"Lunes\",\n                horaInicio: \"09:00\",\n                horaTermino: \"09:45\",\n                disponible: \"S\",\n            },\n            {\n                dia: \"Lunes\",\n                horaInicio: \"09:45\",\n                horaTermino: \"10:45\",\n                disponible: \"N\",\n            },\n            {\n                dia: \"Martes\",\n                horaInicio: \"08:00\",\n                horaTermino: \"08:45\",\n                disponible: \"N\",\n            },\n            {\n                dia: \"Miércoles\",\n                horaInicio: \"09:00\",\n                horaTermino: \"09:45\",\n                disponible: \"S\",\n            },\n            {\n                dia: \"Miércoles\",\n                horaInicio: \"09:45\",\n                horaTermino: \"10:45\",\n                disponible: \"S\",\n            },\n        ],\n    },\n    editedItem: {\n        paciente_id: null,\n        acompanado: null,\n        alerta_she: null,\n        at_realizada_por: null,\n        calificacion: null,\n        comentario: null,\n        cuenta_acr: null,\n        declaracion_completa: null,\n        derivacion_inmediata: null,\n        derivacion: null,\n        descripcion_breve: null,\n        dias_descanso: null,\n        error_critico: null,\n        estado_mental: null,\n        fecha_atencion: null,\n        fuente_incidente: null,\n        hora_inicio: null,\n        hora_termino: null,\n        lugar_atencion: null,\n        medicamentos: null,\n        medio_derivacion: null,\n        motivo_consulta: null,\n        nombre_supervisor: null,\n        puede_reintegrarse: null,\n        RECA: null,\n        responsable: null,\n        sistema_afectado: null,\n        tipo_atencion: null,\n        tipo_licencia: null,\n        turno: null,\n    },\n\n    defaultItem: {\n        paciente_id: null,\n        accidente_condicion: null,\n        accidente: null,\n        acompanado: false,\n        alerta_she: false,\n        at_realizada_por: null,\n        calificacion: null,\n        comentario: null,\n        cuenta_acr: false,\n        declaracion_completa: false,\n        derivacion_inmediata: false,\n        derivacion: null,\n        descripcion_breve: null,\n        dias_descanso: null,\n        error_critico: null,\n        estado_mental: null,\n        fecha_atencion: null,\n        fuente_incidente: null,\n        hora_inicio: null,\n        hora_termino: null,\n        lugar_atencion: null,\n        medicamentos: null,\n        medio_derivacion: null,\n        motivo_consulta: null,\n        nombre_supervisor: null,\n        puede_reintegrarse: false,\n        responsable: null,\n        RECA: null,\n        sistema_afectado: null,\n        tipo_atencion: null,\n        tipo_licencia: null,\n        turno: null,\n    },\n    searchQuery: {\n        paciente_id: null,\n    },\n    dialog: false,\n    tableItems: [],\n    editedIndex: -1,\n    list: [],\n    loading: false,\n    valid: null,\n    formTitle: \"Asignación de Servicio\",\n    formCrear: \"Nueva atención\",\n    formEdit: \"Editar datos\",\n    urlShow: \"/asignacion_servicio/show\",\n    urlUpdate: \"/asignacion_servicio/update\",\n    urlDelete: \"/asignacion_servicio/delete\",\n    urlStore: \"/asignacion_servicio\",\n});\n\n//**********\\\\\\\\  LIFE CYCLE HOOKS ////*************/\nonMounted(async () => {\n    state.list = await fetchAllData(state.endpoints);\n});\n\n//**********\\\\\\\\  COMPUTE PROPERTIES ////*************/\nconst editedItemTitle = computed(() =>\n    state.editedIndex === -1 ? state.formCrear : state.formEdit\n);\n\n//**********\\\\\\\\ METHODS ////*************/\nfunction volver() {\n    window.history.back();\n}\nfunction close() {\n    closeForm(state);\n}\n//**********\\\\\\\\  CRUD ////*************/\nconst handleSearch = async () => {\n    state.searchQuery.paciente_id = store.getSelected.id;\n    await handleSearchItem(state);\n};\n\nfunction openFormCreate() {\n    openToCreate(state);\n}\n\nfunction storeItems() {\n    return state.editedIndex > -1 ? update() : create();\n}\n\nconst create = async () => {\n    await handleStoreItem(state);\n    closeForm(state);\n};\n\nfunction openFormEdit(item) {\n    openToEdit(state, item);\n}\n\nconst update = async () => {\n    await handleEditItem(state);\n    closeForm(state);\n};\n\nconst remove = async (item) => {\n    await handleRemoveItem(state, item);\n};\n</script>\n\n<template>\n    <v-container>\n        <v-card>\n            <v-card-title>Asignar Solicitud de Servicio</v-card-title>\n            <v-card-text>\n                <v-row>\n                    <v-col cols=\"6\" :class=\"'ma-4 pa-4'\">\n                        <v-text-field\n                            v-model=\"rut\"\n                            label=\"Número de Solicitud\"\n                            @blur=\"buscarPaciente\"\n                        ></v-text-field>\n                        <v-row>\n                        <v-btn\n                            prepend-icon=\"mdi-account-multiple-plus\"\n                            variant=\"tonal\"\n                            class=\"ma-2\"\n                            color=\"#009AA4\"\n                            type=\"submit\"\n                        >\n                            Asignar solicitud\n                        </v-btn>\n                        <v-btn\n                            prepend-icon=\"mdi-account-multiple-plus\"\n                            variant=\"tonal\"\n                            class=\"ma-2\"\n                            color=\"#009AA4\"\n                            type=\"submit\"\n                        >\n                            Buscar por Rut\n                        </v-btn>\n                    </v-row>\n                        <v-select\n                            :items=\"[\n                                'Especialidad 1',\n                                'Especialidad 2',\n                                'Especialidad 3',\n                            ]\"\n                            clearable\n                            label=\"Especialidad\"\n                            variant=\"underlined\"\n                            single\n                        ></v-select>\n                        <v-select\n                            :items=\"[\n                                'Profesional 1',\n                                'Profesional 2',\n                                'Profesional 3',\n                            ]\"\n                            clearable\n                            label=\"Profesional\"\n                            variant=\"underlined\"\n                            single\n                        ></v-select>\n\n                        <v-select\n                            clearable\n                            chips\n                            label=\"Contacto\"\n                            :items=\"[\n                                'No responde 1 vez',\n                                'No responde 2 veces',\n                                'No conveniencia horaria 1',\n                                'No conveniencia horaria 2',\n                                'Inubicable / no contesta',\n                            ]\"\n                            multiple\n                        ></v-select>\n                        <v-btn\n                            color=\"#009AA4\"\n                            variant=\"tonal\"\n                            @click=\"sesiones\"\n                            class=\"ma-2\"\n                            prepend-icon=\"mdi-cancel\"\n                        >\n                            Anular Servicio\n                        </v-btn>\n\n                        <v-btn\n                            color=\"#009AA4\"\n                            variant=\"tonal\"\n                            @click=\"sesiones\"\n                            class=\"ma-2\"\n\n                            prepend-icon=\"mdi-check-decagram\"\n                        >\n                            Asignar Servicio\n                        </v-btn>\n\n                        <v-alert\n                            color=\"#2A3B4D\"\n                            density=\"compact\"\n                            icon=\"mdi-firework\"\n                            theme=\"dark\"\n                            class=\"mt-2\"\n                        >\n                            El servicio ha sido asignado a Profesional 1 los\n                            días Lunes de 09:00 a 09:45.\n                        </v-alert>\n                    </v-col>\n                    <v-col>\n                        <v-data-table\n                            :headers=\"state.horario.headers\"\n                            :items=\"state.horario.items\"\n                            class=\"elevation-1\"\n                        >\n                            <template v-slot:top>\n                                <v-toolbar flat>\n                                    <v-toolbar-title\n                                        >Disponibilidad horaria del profesional</v-toolbar-title\n                                    >\n                                    <v-divider\n                                        class=\"mx-4\"\n                                        inset\n                                        vertical\n                                    ></v-divider>\n                                </v-toolbar>\n                            </template>\n                            <template v-slot:item.disponible=\"{ item }\">\n                                <v-chip\n                                    :color=\"\n                                        item.disponible === 'S'\n                                            ? 'green'\n                                            : 'red'\n                                    \"\n                                    dark\n                                >\n                                    {{ item.disponible }}\n                                </v-chip>\n                            </template>\n                        </v-data-table>\n                    </v-col>\n                </v-row>\n            </v-card-text>\n        </v-card>\n    </v-container>\n</template>\n\n// TODO: Definir el numero de sesiones total por defecto (12) y pregunte cuando necesite notificacion de término. \n// TODO: preguntar si desea egresar al paciente cuando la serie de sesiones al finalizar el máximo de sesiones por defecto"],"names":[],"mappings":"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"}