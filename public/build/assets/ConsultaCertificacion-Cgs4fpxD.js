import{x as T,y as E,j as o,o as H,c as B,w as i,b as l,f as b,t as U,n as S,m as j,a as N}from"./app-DaV-B2kG.js";import{A as $}from"./AppLayout-BUWpl8w9.js";import{f as L,h as M}from"./helper-VVwu32YW.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DIp7Rf8v.js";import"./store-D_Az5sCa.js";const z={class:"text-h5"},K=Object.assign({layout:$},{__name:"ConsultaCertificacion",setup(O){const e=T({endpoints:["area","ceco","empresa","planta","unidad","estado_certificacion"],searchQuery:{activo:!0,area:null,ceco:null,empresa:null,planta:null,rut:null,unidad:null,fecha_certificacion:{desde:null,hasta:null},fecha_caducidad:{desde:null,hasta:null},estado_certificacion:null},headers:[{title:"RUT",align:"center",sortable:!0,key:"rut"},{title:"Nombre",align:"center",sortable:!0,key:"nombre"},{title:"Apellidos",sortable:!0,align:"center",key:"apellidos"},{title:"Empresa",sortable:!0,align:"center",key:"empresa.descripcion"},{title:"Fecha de certificacion",sortable:!0,align:"center",key:"fecha_certificacion"},{title:"Fecha de caducidad",sortable:!0,align:"center",key:"fecha_caducidad"},{title:"Estado",sortable:!0,align:"center",key:"estado_certificacion.descripcion"},{title:"Acciones",align:"center",key:"actions"}],rutRules:[u=>{if(!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(u))return!1;let c=u.split("-"),r=c[0],v=c[1].toLowerCase(),m=0,n=1;for(;r;r=Math.floor(r/10))n=(n+r%10*(9-m++%6))%11;let d=n?n-1:"k";return v==d?!0:"El rut es incorrecto"}],itemsView:{paciente_id:null,fecha_certificacion:null,fecha_caducidad:null,certificacion:null,estado_certificacion:null},dialog:!1,tableItems:[],formItems:[],editedIndex:-1,loadingSearch:!1,list:[],valid:null,formTitle:"Consulta de Certificaciones",urlSearch:"/consulta/certificacion/search"});E(async()=>{e.list=await L(e.endpoints)});function g(u){e.dialog=!0,e.itemsView={...u}}function x(){e.dialog=!1}const C=async()=>{await M(e)};return(u,a)=>{const c=o("v-toolbar-title"),r=o("v-spacer"),v=o("v-toolbar"),m=o("v-card-title"),n=o("v-text-field"),d=o("v-select"),s=o("v-col"),y=o("v-switch"),h=o("v-row"),_=o("v-card-text"),p=o("v-btn"),k=o("download-excel"),w=o("v-card-actions"),f=o("v-container"),A=o("v-tooltip"),D=o("v-data-table"),V=o("v-sheet"),Q=o("v-card"),F=o("v-form"),I=o("v-dialog");return H(),B(f,{fluid:""},{default:i(()=>[l(Q,null,{default:i(()=>[l(m,null,{default:i(()=>[l(v,{flat:""},{default:i(()=>[l(c,null,{default:i(()=>[b(U(e.formTitle),1)]),_:1}),l(r)]),_:1})]),_:1}),l(_,null,{default:i(()=>[l(V,{color:"white",elevation:4,class:S("rounded-lg ma-2 pa-2")},{default:i(()=>[l(f,{fluid:""},{default:i(()=>[l(_,null,{default:i(()=>[l(h,null,{default:i(()=>[l(s,null,{default:i(()=>[l(n,{clearable:"",label:"Rut",variant:"underlined",rules:e.rutRules,modelValue:e.searchQuery.rut,"onUpdate:modelValue":a[0]||(a[0]=t=>e.searchQuery.rut=t)},null,8,["rules","modelValue"]),l(d,{clearable:"",label:"Empresa",variant:"underlined",modelValue:e.searchQuery.empresa,"onUpdate:modelValue":a[1]||(a[1]=t=>e.searchQuery.empresa=t),items:e.list.empresa,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),l(d,{clearable:"",label:"Unidad",variant:"underlined",modelValue:e.searchQuery.unidad,"onUpdate:modelValue":a[2]||(a[2]=t=>e.searchQuery.unidad=t),items:e.list.unidad,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),l(d,{clearable:"",label:"Area",modelValue:e.searchQuery.area,"onUpdate:modelValue":a[3]||(a[3]=t=>e.searchQuery.area=t),variant:"underlined",items:e.list.area,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),l(d,{clearable:"",label:"Area (cecos)",modelValue:e.searchQuery.ceco,"onUpdate:modelValue":a[4]||(a[4]=t=>e.searchQuery.ceco=t),variant:"underlined",items:e.list.ceco,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(s,null,{default:i(()=>[l(d,{clearable:"",label:"Estado ",variant:"underlined",modelValue:e.searchQuery.estado_certificacion,"onUpdate:modelValue":a[5]||(a[5]=t=>e.searchQuery.estado_certificacion=t),items:e.list.estado_certificacion,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),l(n,{clearable:"",label:"Fecha recepción (desde)",variant:"underlined",modelValue:e.searchQuery.fechaDesdeRecepcion,"onUpdate:modelValue":a[6]||(a[6]=t=>e.searchQuery.fechaDesdeRecepcion=t),type:"date"},null,8,["modelValue"]),l(n,{clearable:"",label:"Fecha recepción (hasta)",variant:"underlined",type:"date",modelValue:e.searchQuery.fechaHastaRecepcion,"onUpdate:modelValue":a[7]||(a[7]=t=>e.searchQuery.fechaHastaRecepcion=t)},null,8,["modelValue"]),l(n,{clearable:"",label:"Fecha inicio (desde)",variant:"underlined",type:"date",modelValue:e.searchQuery.fechaDesdeInicio,"onUpdate:modelValue":a[8]||(a[8]=t=>e.searchQuery.fechaDesdeInicio=t)},null,8,["modelValue"]),l(n,{clearable:"",label:"Fecha inicio (hasta)",variant:"underlined",type:"date",modelValue:e.searchQuery.fechaHastaInicio,"onUpdate:modelValue":a[9]||(a[9]=t=>e.searchQuery.fechaHastaInicio=t)},null,8,["modelValue"])]),_:1}),l(s,null,{default:i(()=>[l(n,{clearable:"",label:"Fecha termino (desde)",variant:"underlined",type:"date",modelValue:e.searchQuery.fechaDesdeTermino,"onUpdate:modelValue":a[10]||(a[10]=t=>e.searchQuery.fechaDesdeTermino=t)},null,8,["modelValue"]),l(n,{clearable:"",label:"Fecha termino (hasta)",variant:"underlined",type:"date",modelValue:e.searchQuery.fechaHastaTermino,"onUpdate:modelValue":a[11]||(a[11]=t=>e.searchQuery.fechaHastaTermino=t)},null,8,["modelValue"]),l(y,{modelValue:e.searchQuery.activo,"onUpdate:modelValue":a[12]||(a[12]=t=>e.searchQuery.activo=t),class:"ml-4",label:"Activo",color:"success","hide-details":"",inset:"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(w,null,{default:i(()=>[l(p,{"prepend-icon":"mdi-file-search",variant:"tonal",color:"#009AA4",loading:e.loading,onClick:C},{default:i(()=>a[25]||(a[25]=[b(" Buscar ")])),_:1},8,["loading"]),l(p,{"prepend-icon":"mdi-microsoft-excel",variant:"tonal",color:"#009AA4"},{default:i(()=>[l(k,{data:e.tableItems,name:"consulta_licencias_medicas.xls"},{default:i(()=>a[26]||(a[26]=[b(" Bajar archivo ")])),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),l(f,{fluid:""},{default:i(()=>[l(D,{headers:e.headers,items:e.tableItems,"sort-by":[{key:"apellidos",order:"asc"}]},{"item.actions":i(({item:t})=>[l(A,{text:"Ver detalles",location:"top"},{activator:i(({props:R})=>[l(p,j(R,{density:"compact",color:"#662D91",class:"mr-2 ml-2",icon:"mdi-eye",onClick:q=>g(t)}),null,16,["onClick"])]),_:2},1024)]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),l(f,null,{default:i(()=>[l(I,{modelValue:e.dialog,"onUpdate:modelValue":a[24]||(a[24]=t=>e.dialog=t)},{default:i(()=>[l(V,{elevation:"4",class:"ma-4 pa-4"},{default:i(()=>[l(Q,null,{default:i(()=>[l(F,{readonly:""},{default:i(()=>[l(V,{elevation:"2",class:"ma-2 pa-2"},{default:i(()=>[l(m,null,{default:i(()=>[N("span",z,U(e.formTitle),1)]),_:1})]),_:1}),l(_,null,{default:i(()=>[l(h,null,{default:i(()=>[l(s,null,{default:i(()=>[l(n,{label:"Rut",variant:"underlined",modelValue:e.itemsView.rut,"onUpdate:modelValue":a[13]||(a[13]=t=>e.itemsView.rut=t)},null,8,["modelValue"]),l(d,{label:"Empresa",variant:"underlined",modelValue:e.itemsView.empresa,"onUpdate:modelValue":a[14]||(a[14]=t=>e.itemsView.empresa=t),items:e.list.empresa,"item-title":"nombre","item-value":"id"},null,8,["modelValue","items"]),l(d,{label:"Unidad",variant:"underlined",modelValue:e.itemsView.unidad,"onUpdate:modelValue":a[15]||(a[15]=t=>e.itemsView.unidad=t),items:e.list.unidad,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),l(d,{label:"Area",modelValue:e.itemsView.area,"onUpdate:modelValue":a[16]||(a[16]=t=>e.itemsView.area=t),variant:"underlined",items:e.list.area,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),l(d,{label:"Area (cecos)",modelValue:e.itemsView.ceco,"onUpdate:modelValue":a[17]||(a[17]=t=>e.itemsView.ceco=t),variant:"underlined",items:e.list.ceco,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(s,null,{default:i(()=>[l(y,{modelValue:e.itemsView.activo,"onUpdate:modelValue":a[18]||(a[18]=t=>e.itemsView.activo=t),class:"ml-4",label:"Activo",color:"success","hide-details":"",inset:""},null,8,["modelValue"]),l(d,{label:"Estado",modelValue:e.itemsView.estado_certificacion,"onUpdate:modelValue":a[19]||(a[19]=t=>e.itemsView.estado_certificacion=t),variant:"underlined",items:e.list.estado_certificacion,"item-title":"descripcion","item-value":"id",class:"mt-6"},null,8,["modelValue","items"]),l(n,{label:"Certificación",variant:"underlined",type:"text",modelValue:e.itemsView.certificacion,"onUpdate:modelValue":a[20]||(a[20]=t=>e.itemsView.certificacion=t)},null,8,["modelValue"]),l(n,{label:"Fecha certificación",variant:"underlined",type:"date",modelValue:e.itemsView.fecha_certificacion,"onUpdate:modelValue":a[21]||(a[21]=t=>e.itemsView.fecha_certificacion=t)},null,8,["modelValue"]),l(n,{label:"Fecha caducidad",variant:"underlined",type:"date",modelValue:e.itemsView.fecha_caducidad,"onUpdate:modelValue":a[22]||(a[22]=t=>e.itemsView.fecha_caducidad=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(V,{elevation:"2",class:"ma-2 pa-2"},{default:i(()=>[l(w,null,{default:i(()=>[l(p,{class:"mr-2 ml-2",color:"#009AA4",text:"Cerrar",variant:"tonal",onClick:a[23]||(a[23]=t=>x())})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),ee=P(K,[["__file","/home/blueshadows/www/esalud/resources/js/Pages/Consultas/ConsultaCertificacion.vue"]]);export{ee as default};
//# sourceMappingURL=ConsultaCertificacion-Cgs4fpxD.js.map
