{"version":3,"file":"DashExpoEmpresa-CpgKuWaB.js","sources":["../../../resources/js/Pages/SubPages/DashExpoEmpresa.vue"],"sourcesContent":["<script setup>\n  import axios from \"axios\";\n  import { Doughnut } from \"vue-chartjs\";\n  import { onMounted, reactive } from \"vue\";\n  import autocolors from \"chartjs-plugin-autocolors\";\n  import { fetchData } from \"@/helper.js\";\n  import {\n    Chart as ChartJS,\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement,\n    CategoryScale,\n    LinearScale,\n  } from \"chart.js\";\n\n  ChartJS.register(\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement,\n    CategoryScale,\n    LinearScale,\n    autocolors\n  );\n\n  const state = reactive({\n    endpoints: [\"empresa\"],\n    list: [],\n    empresa: null,\n    loaded: false,\n  });\n\n  const chartData = reactive({\n    labels: [\"A\", \"b\", \"C\"],\n    datasets: [\n      {\n        data: [2, 3, 5],\n      },\n    ],\n  });\n\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: true,\n    plugins: {\n      autocolors: {\n        mode: \"data\",\n      },\n    },\n  };\n\n  const onChange = async (value) => {\n    await getData(state.empresa);\n    state.loaded = true;\n  };\n\n  const getData = async (empresa) => {\n    try {\n      state.loaded = false;\n      let id = empresa;\n      const { data } = await axios.get(\"/dashboard/expo_empresa\", {\n        params: { id },\n      });\n      const objArray = Object.values(data);\n      console.log(objArray);\n      chartData.labels = objArray[0];\n      chartData.datasets[0].data = objArray[1];\n    } catch (error) {\n      console.log(\"Error al obtener los datos.\" + error);\n    }\n  };\n\n  onMounted(async () => {\n    try {\n      state.list = await fetchData(state.endpoints);\n    } catch (error) {\n      console.log(error);\n    }\n  });\n</script>\n\n<template>\n  <div style=\"width: 80%\">\n    <v-select\n      :items=\"state.list.empresa\"\n      item-title=\"descripcion\"\n      item-value=\"id\"\n      v-model=\"state.empresa\"\n      label=\"Empresa\"\n      clearable\n      class=\"ma-4 mt-8\"\n      variant=\"underlined\"\n      @update:modelValue=\"onChange()\"\n      single\n    ></v-select>\n\n    <Doughnut :options=\"chartOptions\" :data=\"chartData\" v-if=\"state.loaded\" />\n  </div>\n</template>\n"],"names":["ChartJS","Title","Tooltip","Legend","ArcElement","CategoryScale","LinearScale","autocolors","state","reactive","chartData","chartOptions","onChange","value","getData","empresa","id","data","axios","objArray","error","onMounted","fetchData"],"mappings":"iaAgBEA,EAAQ,SACNC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,CACD,EAED,MAAMC,EAAQC,EAAS,CACrB,UAAW,CAAC,SAAS,EACrB,KAAM,CAAE,EACR,QAAS,KACT,OAAQ,EACZ,CAAG,EAEKC,EAAYD,EAAS,CACzB,OAAQ,CAAC,IAAK,IAAK,GAAG,EACtB,SAAU,CACR,CACE,KAAM,CAAC,EAAG,EAAG,CAAC,CACf,CACF,CACL,CAAG,EAEKE,EAAe,CACnB,WAAY,GACZ,oBAAqB,GACrB,QAAS,CACP,WAAY,CACV,KAAM,MACP,CACF,CACF,EAEKC,EAAW,MAAOC,GAAU,CAChC,MAAMC,EAAQN,EAAM,OAAO,EAC3BA,EAAM,OAAS,EAChB,EAEKM,EAAU,MAAOC,GAAY,CACjC,GAAI,CACFP,EAAM,OAAS,GACf,IAAIQ,EAAKD,EACT,KAAM,CAAE,KAAAE,CAAM,EAAG,MAAMC,EAAM,IAAI,0BAA2B,CAC1D,OAAQ,CAAE,GAAAF,CAAI,CACtB,CAAO,EACKG,EAAW,OAAO,OAAOF,CAAI,EACnC,QAAQ,IAAIE,CAAQ,EACpBT,EAAU,OAASS,EAAS,CAAC,EAC7BT,EAAU,SAAS,CAAC,EAAE,KAAOS,EAAS,CAAC,CACxC,OAAQC,EAAO,CACd,QAAQ,IAAI,8BAAgCA,CAAK,CACvD,CACG,EAED,OAAAC,EAAU,SAAY,CACpB,GAAI,CACFb,EAAM,KAAO,MAAMc,EAAUd,EAAM,SAAS,CAC7C,OAAQY,EAAO,CACd,QAAQ,IAAIA,CAAK,CACvB,CACA,CAAG"}