import{s as M,x as P,i as r,o as B,c as N,w as o,b as l,e as h,t as w,n as R,m as S,a as T}from"./app-DGHO5O1D.js";import{A as j}from"./AppLayout-BdEorAE2.js";import{f as $,h as G}from"./helper-DsNffL06.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DIp7Rf8v.js";import"./store-BSbL8kpK.js";const z={class:"text-h5"},K=Object.assign({layout:j},{__name:"ConsultaExMetales",setup(O){const e=M({endpoints:["area","ceco","empresa","planta","unidad"],headers:[{title:"Rut",align:"start",sortable:!0,key:"rut"},{title:"Nombre",align:"start",sortable:!0,key:"nombre"},{title:"Apellidos",align:"start",sortable:!0,key:"apellidos"},{title:"Empresa",align:"start",sortable:!0,key:"empresa.descripcion"},{title:"IDPGP",align:"start",sortable:!0,key:"idpgp"},{title:"Estatus",align:"start",sortable:!0,key:"estatus"},{title:"Fecha de Control",align:"start",sortable:!0,key:"fecha_control"},{title:"Fecha de Ingreso",align:"start",sortable:!0,key:"fecha_ingreso"},{title:"Acciones",align:"center",key:"actions"}],searchQuery:{activo:"true",area:null,ceco:null,empresa:null,planta:null,rut:null,unidad:null,fecha_control:{hasta:null,desde:null},fecha_ingreso:{hasta:null,desde:null},fecha_prox_control:{hasta:null,desde:null},fecha_ult_control:{hasta:null,desde:null}},rutRules:[u=>{if(!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(u))return!1;for(var i=u.split("-"),d=i[0],v=i[1].toLowerCase(),c=0,n=1;d;d=Math.floor(d/10))n=(n+d%10*(9-c++%6))%11;var s=n?n-1:"k";return v==s?!0:"El rut es incorrecto"}],itemsView:{paciente_id:null,idpgp:null,estatus:null,fecha_control:null,fecha_ingreso:null,fecha_prox_control:null,fecha_ult_control:null,comentario:null},dialog:!1,tableItems:[],formItems:[],editedIndex:-1,list:[],valid:null,formTitle:"Examen Metales",urlSearch:"/consulta/exmetal/search"});P(async()=>{e.list=await $(e.endpoints)});function Q(u){e.dialog=!0,e.itemsView={...u}}function U(){e.dialog=!1}const k=async()=>{await G(e)};return(u,a)=>{const i=r("v-toolbar-title"),d=r("v-spacer"),v=r("v-toolbar"),c=r("v-card-title"),n=r("v-text-field"),s=r("v-select"),y=r("v-switch"),m=r("v-col"),b=r("v-row"),V=r("v-card-text"),p=r("v-btn"),C=r("download-excel"),g=r("v-card-actions"),_=r("v-container"),F=r("v-tooltip"),A=r("v-data-table"),f=r("v-sheet"),x=r("v-card"),E=r("v-form"),I=r("v-dialog");return B(),N(_,{fluid:""},{default:o(()=>[l(x,null,{default:o(()=>[l(c,null,{default:o(()=>[l(v,{flat:""},{default:o(()=>[l(i,null,{default:o(()=>[h(w(e.formTitle),1)]),_:1}),l(d)]),_:1})]),_:1}),l(V,null,{default:o(()=>[l(f,{color:"white",elevation:4,class:R("rounded-lg ma-2 pa-2")},{default:o(()=>[l(_,{fluid:""},{default:o(()=>[l(V,null,{default:o(()=>[l(b,null,{default:o(()=>[l(m,null,{default:o(()=>[l(n,{label:"Rut",variant:"underlined",rules:e.rutRules,modelValue:e.searchQuery.rut,"onUpdate:modelValue":a[0]||(a[0]=t=>e.searchQuery.rut=t),clearable:""},null,8,["rules","modelValue"]),l(s,{items:e.list.empresa,"item-title":"descripcion","item-value":"id",label:"Empresa",modelValue:e.searchQuery.empresa,"onUpdate:modelValue":a[1]||(a[1]=t=>e.searchQuery.empresa=t),variant:"underlined",clearable:""},null,8,["items","modelValue"]),l(s,{label:"Unidad",variant:"underlined",modelValue:e.searchQuery.unidad,"onUpdate:modelValue":a[2]||(a[2]=t=>e.searchQuery.unidad=t),items:e.list.unidad,"item-title":"descripcion","item-value":"id",clearable:""},null,8,["modelValue","items"]),l(s,{label:"Area",modelValue:e.searchQuery.area,"onUpdate:modelValue":a[3]||(a[3]=t=>e.searchQuery.area=t),variant:"underlined",items:e.list.area,"item-title":"descripcion","item-value":"id",clearable:""},null,8,["modelValue","items"]),l(s,{label:"Area (cecos)",modelValue:e.searchQuery.ceco,"onUpdate:modelValue":a[4]||(a[4]=t=>e.searchQuery.ceco=t),variant:"underlined",items:e.list.ceco,"item-title":"descripcion","item-value":"id",clearable:""},null,8,["modelValue","items"]),l(y,{modelValue:e.searchQuery.activo,"onUpdate:modelValue":a[5]||(a[5]=t=>e.searchQuery.activo=t),"hide-details":"","true-value":"true","false-value":"false",class:"ml-4 mt-4",variant:"underlined",color:"green-darken-3",value:"true",inset:!0,label:"Activo",clearable:""},null,8,["modelValue"])]),_:1}),l(m,null,{default:o(()=>[l(n,{label:"Fecha control (desde)",variant:"underlined",modelValue:e.searchQuery.fecha_control.desde,"onUpdate:modelValue":a[6]||(a[6]=t=>e.searchQuery.fecha_control.desde=t),type:"date",clearable:""},null,8,["modelValue"]),l(n,{label:"Fecha control (hasta)",variant:"underlined",type:"date",clearable:"",modelValue:e.searchQuery.fecha_control.hasta,"onUpdate:modelValue":a[7]||(a[7]=t=>e.searchQuery.fecha_control.hasta=t)},null,8,["modelValue"]),l(n,{label:"Fecha ingreso (desde)",variant:"underlined",modelValue:e.searchQuery.fecha_ingreso.desde,"onUpdate:modelValue":a[8]||(a[8]=t=>e.searchQuery.fecha_ingreso.desde=t),type:"date",clearable:""},null,8,["modelValue"]),l(n,{label:"Fecha ingreso (hasta)",variant:"underlined",type:"date",clearable:"",modelValue:e.searchQuery.fecha_ingreso.hasta,"onUpdate:modelValue":a[9]||(a[9]=t=>e.searchQuery.fecha_ingreso.hasta=t)},null,8,["modelValue"]),l(n,{label:"Fecha prox. control (desde)",variant:"underlined",modelValue:e.searchQuery.fecha_prox_control.desde,"onUpdate:modelValue":a[10]||(a[10]=t=>e.searchQuery.fecha_prox_control.desde=t),type:"date",clearable:""},null,8,["modelValue"]),l(n,{label:"Fecha prox. control (hasta)",variant:"underlined",type:"date",clearable:"",modelValue:e.searchQuery.fecha_prox_control.hasta,"onUpdate:modelValue":a[11]||(a[11]=t=>e.searchQuery.fecha_prox_control.hasta=t)},null,8,["modelValue"]),l(n,{label:"Fecha ult. control (desde)",variant:"underlined",modelValue:e.searchQuery.fecha_ult_control.desde,"onUpdate:modelValue":a[12]||(a[12]=t=>e.searchQuery.fecha_ult_control.desde=t),type:"date",clearable:""},null,8,["modelValue"]),l(n,{label:"Fecha ult. control (hasta)",variant:"underlined",type:"date",clearable:"",modelValue:e.searchQuery.fecha_ult_control.hasta,"onUpdate:modelValue":a[13]||(a[13]=t=>e.searchQuery.fecha_ult_control.hasta=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,null,{default:o(()=>[l(p,{"prepend-icon":"mdi-file-search",variant:"tonal",color:"#009AA4",onClick:k},{default:o(()=>a[23]||(a[23]=[h(" Buscar ")])),_:1}),l(p,{"prepend-icon":"mdi-microsoft-excel",variant:"tonal",color:"#009AA4"},{default:o(()=>[l(C,{data:e.tableItems,name:"consulta_metales.xls"},{default:o(()=>a[24]||(a[24]=[h(" Bajar archivo ")])),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),l(_,{fluid:""},{default:o(()=>[l(A,{headers:e.headers,items:e.tableItems,"sort-by":[{key:"apellidos",order:"asc"}]},{"item.actions":o(({item:t})=>[l(F,{text:"Ver detalles",location:"top"},{activator:o(({props:D})=>[l(p,S(D,{density:"compact",color:"#662D91",class:"mr-2 ml-2",icon:"mdi-eye",onClick:q=>Q(t)}),null,16,["onClick"])]),_:2},1024)]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),l(_,null,{default:o(()=>[l(I,{modelValue:e.dialog,"onUpdate:modelValue":a[22]||(a[22]=t=>e.dialog=t)},{default:o(()=>[l(f,{elevation:"4",class:"ma-4 pa-4"},{default:o(()=>[l(x,null,{default:o(()=>[l(E,{readonly:""},{default:o(()=>[l(f,{elevation:"2",class:"ma-2 pa-2"},{default:o(()=>[l(c,null,{default:o(()=>[T("span",z,w(e.formTitle),1)]),_:1})]),_:1}),l(V,null,{default:o(()=>[l(b,null,{default:o(()=>[l(m,null,{default:o(()=>[l(n,{modelValue:e.itemsView.idpgp,"onUpdate:modelValue":a[14]||(a[14]=t=>e.itemsView.idpgp=t),label:"IDPGP",type:"number",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.estatus,"onUpdate:modelValue":a[15]||(a[15]=t=>e.itemsView.estatus=t),label:"Estatus",type:"text",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.fecha_control,"onUpdate:modelValue":a[16]||(a[16]=t=>e.itemsView.fecha_control=t),label:"Fecha de control",type:"date",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.fecha_ingreso,"onUpdate:modelValue":a[17]||(a[17]=t=>e.itemsView.fecha_ingreso=t),label:"Fecha de ingreso",type:"date",variant:"underlined"},null,8,["modelValue"])]),_:1}),l(m,null,{default:o(()=>[l(n,{modelValue:e.itemsView.fecha_prox_control,"onUpdate:modelValue":a[18]||(a[18]=t=>e.itemsView.fecha_prox_control=t),label:"Fecha próx. control",type:"date",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.fecha_ult_control,"onUpdate:modelValue":a[19]||(a[19]=t=>e.itemsView.fecha_ult_control=t),label:"Fecha últ. control",type:"date",variant:"underlined"},null,8,["modelValue"]),l(n,{modelValue:e.itemsView.comentario,"onUpdate:modelValue":a[20]||(a[20]=t=>e.itemsView.comentario=t),label:"Comentario",type:"text",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(f,{elevation:"2",class:"ma-2 pa-2"},{default:o(()=>[l(g,null,{default:o(()=>[l(p,{class:"mr-2 ml-2",color:"#009AA4",text:"Cerrar",variant:"tonal",onClick:a[21]||(a[21]=t=>U())})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),ee=L(K,[["__file","/home/omar/www/esalud/resources/js/Pages/Consultas/ConsultaExMetales.vue"]]);export{ee as default};
//# sourceMappingURL=ConsultaExMetales-DGzXxpXV.js.map
