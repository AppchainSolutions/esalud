import{x as S,y as B,j as i,o as D,c as T,w as n,b as l,f as h,t as Q,n as j,m as E,a as N}from"./app-C1ZRqz2K.js";import{A as R}from"./AppLayout-BaBtGiTx.js";import{f as $,h as P}from"./helper-D_Lm4e5b.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DIp7Rf8v.js";import"./store-DPQZIGvL.js";const K={class:"text-h5"},O=Object.assign({layout:R},{__name:"ConsultaLicenciaMedica",setup(q){const e=S({endpoints:["area","ceco","empresa","planta","unidad"],headers:[{title:"RUT",align:"center",sortable:!0,key:"rut"},{title:"Nombre",align:"center",sortable:!0,key:"nombre"},{title:"Apellidos",sortable:!0,align:"center",key:"apellidos"},{title:"Empresa",sortable:!0,align:"center",key:"empresa.descripcion"},{title:"Fecha de inicio",sortable:!0,align:"center",key:"fecha_inicio"},{title:"Fecha de término",sortable:!0,align:"center",key:"fecha_termino"},{title:"Fecha de emisión",sortable:!0,align:"center",key:"fecha_emision"},{title:"Fecha de recepción",sortable:!0,align:"center",key:"fecha_recepcion"},{title:"Acciones",align:"center",key:"actions"}],rutRules:[u=>{if(!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(u))return!1;let c=u.split("-"),r=c[0],v=c[1].toLowerCase(),m=0,o=1;for(;r;r=Math.floor(r/10))o=(o+r%10*(9-m++%6))%11;let d=o?o-1:"k";return v==d?!0:"El rut es incorrecto"}],itemsView:{paciente_id:null,fecha_emision:null,fecha_inicio:null,fecha_recepcion:null,fecha_termino:null},searchQuery:{activo:!0,area:null,ceco:null,empresa:null,planta:null,rut:null,unidad:null,fecha_emision:{desde:null,hasta:null},fecha_recepcion:{desde:null,hasta:null},fecha_inicio:{desde:null,hasta:null},fecha_termino:{desde:null,hasta:null}},dialog:!1,tableItems:[],formItems:[],editedIndex:-1,list:[],loadingSearch:!1,valid:null,formTitle:"Consulta de Licencias Médicas",urlSearch:"/consulta/licencia/search"});B(async()=>{e.list=await $(e.endpoints)});function g(u){e.dialog=!0,e.itemsView={...u}}function U(){e.dialog=!1}const x=async()=>{await P(e)};return(u,a)=>{const c=i("v-toolbar-title"),r=i("v-spacer"),v=i("v-toolbar"),m=i("v-card-title"),o=i("v-text-field"),d=i("v-select"),s=i("v-col"),k=i("v-switch"),y=i("v-row"),V=i("v-card-text"),p=i("v-btn"),F=i("download-excel"),b=i("v-card-actions"),f=i("v-container"),C=i("v-tooltip"),A=i("v-data-table"),_=i("v-sheet"),w=i("v-card"),I=i("v-form"),L=i("v-dialog");return D(),T(f,{fluid:""},{default:n(()=>[l(w,null,{default:n(()=>[l(m,null,{default:n(()=>[l(v,{flat:""},{default:n(()=>[l(c,null,{default:n(()=>[h(Q(e.formTitle),1)]),_:1}),l(r)]),_:1})]),_:1}),l(V,null,{default:n(()=>[l(_,{color:"white",elevation:4,class:j("rounded-lg ma-2 pa-2")},{default:n(()=>[l(f,{fluid:""},{default:n(()=>[l(V,null,{default:n(()=>[l(y,null,{default:n(()=>[l(s,null,{default:n(()=>[l(o,{clearable:"",label:"Rut",variant:"underlined",rules:e.rutRules,modelValue:e.searchQuery.rut,"onUpdate:modelValue":a[0]||(a[0]=t=>e.searchQuery.rut=t)},null,8,["rules","modelValue"]),l(d,{clearable:"",label:"Empresa",variant:"underlined",modelValue:e.searchQuery.empresa,"onUpdate:modelValue":a[1]||(a[1]=t=>e.searchQuery.empresa=t),items:e.list.empresa,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),l(d,{clearable:"",label:"Unidad",variant:"underlined",modelValue:e.searchQuery.unidad,"onUpdate:modelValue":a[2]||(a[2]=t=>e.searchQuery.unidad=t),items:e.list.unidad,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),l(d,{clearable:"",label:"Area",modelValue:e.searchQuery.area,"onUpdate:modelValue":a[3]||(a[3]=t=>e.searchQuery.area=t),variant:"underlined",items:e.list.area,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),l(d,{clearable:"",label:"Area (cecos)",modelValue:e.searchQuery.ceco,"onUpdate:modelValue":a[4]||(a[4]=t=>e.searchQuery.ceco=t),variant:"underlined",items:e.list.ceco,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(s,null,{default:n(()=>[l(o,{clearable:"",label:"Fecha emision (desde)",variant:"underlined",modelValue:e.searchQuery.fecha_emision.desde,"onUpdate:modelValue":a[5]||(a[5]=t=>e.searchQuery.fecha_emision.desde=t),type:"date"},null,8,["modelValue"]),l(o,{clearable:"",label:"Fecha emisión (hasta)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_emision.hasta,"onUpdate:modelValue":a[6]||(a[6]=t=>e.searchQuery.fecha_emision.hasta=t)},null,8,["modelValue"]),l(o,{clearable:"",label:"Fecha recepción (desde)",variant:"underlined",modelValue:e.searchQuery.fecha_recepcion.desde,"onUpdate:modelValue":a[7]||(a[7]=t=>e.searchQuery.fecha_recepcion.desde=t),type:"date"},null,8,["modelValue"]),l(o,{clearable:"",label:"Fecha recepción (hasta)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_recepcion.hasta,"onUpdate:modelValue":a[8]||(a[8]=t=>e.searchQuery.fecha_recepcion.hasta=t)},null,8,["modelValue"]),l(k,{modelValue:e.searchQuery.activo,"onUpdate:modelValue":a[9]||(a[9]=t=>e.searchQuery.activo=t),"hide-details":"","true-value":"true","false-value":"false",class:"ml-4 mb-4",variant:"underlined",color:"green-darken-3",value:"true",inset:!0,label:"Activo"},null,8,["modelValue"])]),_:1}),l(s,null,{default:n(()=>[l(o,{clearable:"",label:"Fecha inicio (desde)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_inicio.desde,"onUpdate:modelValue":a[10]||(a[10]=t=>e.searchQuery.fecha_inicio.desde=t)},null,8,["modelValue"]),l(o,{clearable:"",label:"Fecha inicio (hasta)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_inicio.hasta,"onUpdate:modelValue":a[11]||(a[11]=t=>e.searchQuery.fecha_inicio.hasta=t)},null,8,["modelValue"]),l(o,{clearable:"",label:"Fecha termino (desde)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_termino.desde,"onUpdate:modelValue":a[12]||(a[12]=t=>e.searchQuery.fecha_termino.desde=t)},null,8,["modelValue"]),l(o,{clearable:"",label:"Fecha termino (hasta)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_termino.hasta,"onUpdate:modelValue":a[13]||(a[13]=t=>e.searchQuery.fecha_termino.hasta=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(b,null,{default:n(()=>[l(p,{"prepend-icon":"mdi-file-search",variant:"tonal",color:"#009AA4",loading:e.loadingSearch,onClick:x},{default:n(()=>a[22]||(a[22]=[h(" Buscar ")])),_:1},8,["loading"]),l(p,{"prepend-icon":"mdi-microsoft-excel",variant:"tonal",color:"#009AA4"},{default:n(()=>[l(F,{data:e.tableItems,name:"consulta_licencias.xls"},{default:n(()=>a[23]||(a[23]=[h(" Bajar archivo ")])),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),l(f,{fluid:""},{default:n(()=>[l(A,{headers:e.headers,items:e.tableItems,"sort-by":[{key:"apellidos",order:"asc"}]},{"item.actions":n(({item:t})=>[l(C,{text:"Ver detalles",location:"top"},{activator:n(({props:M})=>[l(p,E(M,{density:"compact",color:"#662D91",class:"mr-2 ml-2",icon:"mdi-eye",onClick:G=>g(t)}),null,16,["onClick"])]),_:2},1024)]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),l(f,null,{default:n(()=>[l(L,{modelValue:e.dialog,"onUpdate:modelValue":a[21]||(a[21]=t=>e.dialog=t)},{default:n(()=>[l(_,{elevation:"4",class:"ma-4 pa-4"},{default:n(()=>[l(w,null,{default:n(()=>[l(I,{readonly:""},{default:n(()=>[l(_,{elevation:"2",class:"ma-2 pa-2"},{default:n(()=>[l(m,null,{default:n(()=>[N("span",K,Q(e.formTitle),1)]),_:1})]),_:1}),l(V,null,{default:n(()=>[l(y,null,{default:n(()=>[l(s,null,{default:n(()=>[l(o,{modelValue:e.itemsView.folio,"onUpdate:modelValue":a[14]||(a[14]=t=>e.itemsView.folio=t),label:"Folio",type:"number",variant:"underlined"},null,8,["modelValue"]),l(o,{modelValue:e.itemsView.fecha_emision,"onUpdate:modelValue":a[15]||(a[15]=t=>e.itemsView.fecha_emision=t),label:"Fecha emisión",type:"date",variant:"underlined"},null,8,["modelValue"]),l(o,{modelValue:e.itemsView.fecha_recepcion,"onUpdate:modelValue":a[16]||(a[16]=t=>e.itemsView.fecha_recepcion=t),label:"Fecha recepción",type:"date",variant:"underlined"},null,8,["modelValue"])]),_:1}),l(s,null,{default:n(()=>[l(o,{modelValue:e.itemsView.fecha_inicio,"onUpdate:modelValue":a[17]||(a[17]=t=>e.itemsView.fecha_inicio=t),label:"Fecha inicio",type:"date",variant:"underlined"},null,8,["modelValue"]),l(o,{modelValue:e.itemsView.fecha_termino,"onUpdate:modelValue":a[18]||(a[18]=t=>e.itemsView.fecha_termino=t),label:"Fecha de término",type:"date",variant:"underlined"},null,8,["modelValue"]),l(o,{modelValue:e.itemsView.comentario,"onUpdate:modelValue":a[19]||(a[19]=t=>e.itemsView.comentario=t),label:"Comentario",type:"text",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(_,{elevation:"2",class:"ma-2 pa-2"},{default:n(()=>[l(b,null,{default:n(()=>[l(p,{class:"mr-2 ml-2",color:"#662D91",text:"Cerrar",variant:"tonal",onClick:a[20]||(a[20]=t=>U())})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),ee=z(O,[["__file","/home/blueshadows/www/esalud/resources/js/Pages/Consultas/ConsultaLicenciaMedica.vue"]]);export{ee as default};
//# sourceMappingURL=ConsultaLicenciaMedica-DsJSaRK7.js.map
