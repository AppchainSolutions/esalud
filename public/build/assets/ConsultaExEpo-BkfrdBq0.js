import{s as R,x as S,i as n,o as N,c as T,w as o,b as t,e as y,t as g,n as I,m as P,a as $}from"./app-Cujsp-Fi.js";import{A as j}from"./AppLayout-BMxtgnBU.js";import{f as D,h as O}from"./helper-B6kLQ4yt.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DIp7Rf8v.js";import"./store-yQyc7bVv.js";const M={class:"text-h5"},K=Object.assign({layout:j},{__name:"ConsultaExEpo",setup(q){const e=R({endpoints:["area","ceco","bateria","empresa","planta","unidad","estado_epo","semaforo","tipo_examen"],headers:[{title:"Rut",align:"start",sortable:!0,key:"rut"},{title:"Nombre",align:"start",sortable:!0,key:"nombre"},{title:"Apellidos",align:"start",sortable:!0,key:"apellidos"},{title:"Riesgo semáforo",align:"start",sortable:!0,key:"semaforo.descripcion"},{title:"Resultado",align:"start",sortable:!0,key:"resultado"},{title:"Batería",align:"start",sortable:!0,key:"bateria.descripcion"},{title:"Tipo de exámen",align:"start",sortable:!0,key:"tipo_examen.descripcion"},{title:"Fecha recepción",align:"start",sortable:!0,key:"fecha_recepcion"},{title:"Fecha vencimiento",align:"start",sortable:!0,key:"fecha_vencimiento"},{title:"Acciones",align:"center",key:"actions"}],searchQuery:{activo:"true",area:null,ceco:null,empresa:null,planta:null,rut:null,unidad:null,numero_solicitud:null,estado_epo:null,bateria:null,semaforo:null,resultado:"Apto",tipo_examen:null,fecha_realizacion:{desde:null,hasta:null},fecha_recepcion:{desde:null,hasta:null},fecha_solicitud:{desde:null,hasta:null},fecha_vencimiento:{desde:null,hasta:null}},rutRules:[u=>{if(!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(u))return!1;let m=u.split("-"),r=m[0],_=m[1].toLowerCase(),c=0,i=1;for(;r;r=Math.floor(r/10))i=(i+r%10*(9-c++%6))%11;let d=i?i-1:"k";return _===d?!0:"El rut es incorrecto"}],itemsView:{paciente_id:null,codigo_verificacion:null,comentario:null,estado_epo:null,fecha_realizacion:null,fecha_recepcion:null,fecha_solicitud:null,fecha_vencimiento:null,bateria:null,numero_solicitud:null,resultado:null,semaforo:null,tipo_examen:null},dialog:!1,tableItems:[],formItems:[],editedIndex:-1,list:[],valid:null,formTitle:"Consulta exámenes Ocupacionales y Preocupacionales",urlSearch:"/consulta/exepo/search"});S(async()=>{e.list=await D(e.endpoints)});function U(u){e.dialog=!0,e.itemsView={...u}}function k(){e.dialog=!1}const A=async()=>{await O(e)};return(u,l)=>{const m=n("v-toolbar-title"),r=n("v-spacer"),_=n("v-toolbar"),c=n("v-card-title"),i=n("v-text-field"),d=n("v-select"),p=n("v-switch"),s=n("v-col"),h=n("v-row"),b=n("v-card-text"),V=n("v-btn"),C=n("download-excel"),x=n("v-card-actions"),v=n("v-container"),F=n("v-tooltip"),z=n("v-data-table"),f=n("v-sheet"),Q=n("v-card"),w=n("v-form"),E=n("v-dialog");return N(),T(v,{fluid:""},{default:o(()=>[t(Q,null,{default:o(()=>[t(c,null,{default:o(()=>[t(_,{flat:""},{default:o(()=>[t(m,null,{default:o(()=>[y(g(e.formTitle),1)]),_:1}),t(r)]),_:1})]),_:1}),t(b,null,{default:o(()=>[t(f,{color:"white",elevation:4,class:I("rounded-lg ma-2 pa-2")},{default:o(()=>[t(v,{fluid:""},{default:o(()=>[t(b,null,{default:o(()=>[t(h,null,{default:o(()=>[t(s,null,{default:o(()=>[t(i,{label:"Rut",variant:"underlined",rules:e.rutRules,modelValue:e.searchQuery.rut,"onUpdate:modelValue":l[0]||(l[0]=a=>e.searchQuery.rut=a),clearable:""},null,8,["rules","modelValue"]),t(d,{items:e.list.empresa,"item-title":"descripcion","item-value":"id",label:"Empresa",modelValue:e.searchQuery.empresa,"onUpdate:modelValue":l[1]||(l[1]=a=>e.searchQuery.empresa=a),variant:"underlined",clearable:""},null,8,["items","modelValue"]),t(d,{items:e.list.unidad,"item-title":"descripcion","item-value":"id",label:"Unidad",modelValue:e.searchQuery.unidad,"onUpdate:modelValue":l[2]||(l[2]=a=>e.searchQuery.unidad=a),variant:"underlined",clearable:""},null,8,["items","modelValue"]),t(d,{label:"Area",modelValue:e.searchQuery.area,"onUpdate:modelValue":l[3]||(l[3]=a=>e.searchQuery.area=a),variant:"underlined",items:e.list.area,"item-title":"descripcion","item-value":"id",clearable:""},null,8,["modelValue","items"]),t(d,{label:"Area (cecos)",modelValue:e.searchQuery.ceco,"onUpdate:modelValue":l[4]||(l[4]=a=>e.searchQuery.ceco=a),variant:"underlined",items:e.list.ceco,"item-title":"descripcion","item-value":"id",clearable:""},null,8,["modelValue","items"]),t(p,{modelValue:e.searchQuery.activo,"onUpdate:modelValue":l[5]||(l[5]=a=>e.searchQuery.activo=a),"hide-details":"","true-value":"true","false-value":"false",class:"ml-4 mt-4",variant:"underlined",color:"green-darken-3",inset:"",clearable:"",label:"Activo"},null,8,["modelValue"]),t(p,{modelValue:e.searchQuery.resultado,"onUpdate:modelValue":l[6]||(l[6]=a=>e.searchQuery.resultado=a),"hide-details":"","true-value":"Apto","false-value":"No apto",class:"ml-4 mt-4",variant:"underlined",color:"green-darken-3",inset:"",clearable:"",label:`Resultado: ${e.searchQuery.resultado.toString()}`},null,8,["modelValue","label"])]),_:1}),t(s,null,{default:o(()=>[t(i,{label:"Fecha realizacion (desde)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_realizacion.desde,"onUpdate:modelValue":l[7]||(l[7]=a=>e.searchQuery.fecha_realizacion.desde=a),clearable:""},null,8,["modelValue"]),t(i,{label:"Fecha realizacion (hasta)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_realizacion.hasta,"onUpdate:modelValue":l[8]||(l[8]=a=>e.searchQuery.fecha_realizacion.hasta=a),clearable:""},null,8,["modelValue"]),t(i,{label:"Fecha recepción (desde)",variant:"underlined",modelValue:e.searchQuery.fecha_recepcion.desde,"onUpdate:modelValue":l[9]||(l[9]=a=>e.searchQuery.fecha_recepcion.desde=a),clearable:"",type:"date"},null,8,["modelValue"]),t(i,{label:"Fecha recepción (hasta)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_recepcion.hasta,"onUpdate:modelValue":l[10]||(l[10]=a=>e.searchQuery.fecha_recepcion.hasta=a),clearable:""},null,8,["modelValue"]),t(i,{label:"Fecha solicitud (desde)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_solicitud.desde,"onUpdate:modelValue":l[11]||(l[11]=a=>e.searchQuery.fecha_solicitud.desde=a),clearable:""},null,8,["modelValue"]),t(i,{label:"Fecha solicitud (hasta)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_solicitud.hasta,"onUpdate:modelValue":l[12]||(l[12]=a=>e.searchQuery.fecha_solicitud.hasta=a),clearable:""},null,8,["modelValue"]),t(i,{label:"Fecha vencimiento (desde)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_vencimiento.desde,"onUpdate:modelValue":l[13]||(l[13]=a=>e.searchQuery.fecha_vencimiento.desde=a),clearable:""},null,8,["modelValue"]),t(i,{label:"Fecha vencimiento (hasta)",variant:"underlined",type:"date",modelValue:e.searchQuery.fecha_vencimiento.hasta,"onUpdate:modelValue":l[14]||(l[14]=a=>e.searchQuery.fecha_vencimiento.hasta=a),clearable:""},null,8,["modelValue"])]),_:1}),t(s,null,{default:o(()=>[t(d,{label:"Estado EPO",variant:"underlined",modelValue:e.searchQuery.estado_epo,"onUpdate:modelValue":l[15]||(l[15]=a=>e.searchQuery.estado_epo=a),items:e.list.estado_epo,"item-title":"descripcion","item-value":"id",clearable:""},null,8,["modelValue","items"]),t(d,{label:"Bateria",variant:"underlined",modelValue:e.searchQuery.bateria,"onUpdate:modelValue":l[16]||(l[16]=a=>e.searchQuery.bateria=a),items:e.list.bateria,"item-title":"descripcion","item-value":"id",clearable:"",single:""},null,8,["modelValue","items"]),t(d,{label:"Tipo de exámen",variant:"underlined",modelValue:e.searchQuery.tipo_examen,"onUpdate:modelValue":l[17]||(l[17]=a=>e.searchQuery.tipo_examen=a),items:e.list.tipo_examen,"item-title":"descripcion","item-value":"id",clearable:"",single:""},null,8,["modelValue","items"]),t(d,{label:"Riesgo Semáforo",variant:"underlined",modelValue:e.searchQuery.semaforo,"onUpdate:modelValue":l[18]||(l[18]=a=>e.searchQuery.semaforo=a),items:e.list.semaforo,"item-title":"descripcion","item-value":"id",clearable:"",single:""},null,8,["modelValue","items"]),t(i,{label:"Número de solicitud",variant:"underlined",type:"number",modelValue:e.searchQuery.numero_solicitud,"onUpdate:modelValue":l[19]||(l[19]=a=>e.searchQuery.numero_solicitud=a),clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(x,null,{default:o(()=>[t(V,{"prepend-icon":"mdi-file-search",variant:"tonal",color:"#009AA4",loading:e.loadingSearch,onClick:A},{default:o(()=>l[34]||(l[34]=[y(" Buscar ")])),_:1},8,["loading"]),t(V,{"prepend-icon":"mdi-microsoft-excel",variant:"tonal",color:"#009AA4"},{default:o(()=>[t(C,{data:e.tableItems,name:"consulta_exepo.xls"},{default:o(()=>l[35]||(l[35]=[y(" Bajar archivo ")])),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),t(v,{fluid:""},{default:o(()=>[t(z,{headers:e.headers,items:e.tableItems,"sort-by":[{key:"apellidos",order:"asc"}]},{"item.actions":o(({item:a})=>[t(F,{text:"Ver detalles",location:"top"},{activator:o(({props:B})=>[t(V,P(B,{density:"compact",color:"#009AA4",class:"mr-2 ml-2",icon:"mdi-eye",variant:"tonal",onClick:G=>U(a)}),null,16,["onClick"])]),_:2},1024)]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),t(v,null,{default:o(()=>[t(E,{modelValue:e.dialog,"onUpdate:modelValue":l[33]||(l[33]=a=>e.dialog=a)},{default:o(()=>[t(f,{elevation:"4",class:"ma-4 pa-4"},{default:o(()=>[t(Q,null,{default:o(()=>[t(w,{readonly:""},{default:o(()=>[t(f,{elevation:"2",class:"ma-2 pa-2"},{default:o(()=>[t(c,null,{default:o(()=>[$("span",M,g(e.formTitle),1)]),_:1})]),_:1}),t(b,null,{default:o(()=>[t(w,{readonly:""},{default:o(()=>[t(h,null,{default:o(()=>[t(s,null,{default:o(()=>[t(i,{modelValue:e.itemsView.codigo_verificacion,"onUpdate:modelValue":l[20]||(l[20]=a=>e.itemsView.codigo_verificacion=a),label:"Cod. verif.",type:"number",variant:"underlined"},null,8,["modelValue"]),t(i,{modelValue:e.itemsView.numero_solicitud,"onUpdate:modelValue":l[21]||(l[21]=a=>e.itemsView.numero_solicitud=a),label:"N° solicitud",type:"number",variant:"underlined"},null,8,["modelValue"]),t(d,{items:e.list.estado_epo,"item-title":"descripcion","item-value":"id",modelValue:e.itemsView.estado_epo,"onUpdate:modelValue":l[22]||(l[22]=a=>e.itemsView.estado_epo=a),label:"Estado",type:"text",variant:"underlined"},null,8,["items","modelValue"]),t(d,{items:e.list.bateria,"item-title":"descripcion","item-value":"id",modelValue:e.itemsView.bateria,"onUpdate:modelValue":l[23]||(l[23]=a=>e.itemsView.bateria=a),label:"Batería",type:"text",variant:"underlined"},null,8,["items","modelValue"]),t(d,{items:e.list.semaforo,"item-title":"descripcion","item-value":"id",modelValue:e.itemsView.semaforo,"onUpdate:modelValue":l[24]||(l[24]=a=>e.itemsView.semaforo=a),label:"Semáforo",type:"text",variant:"underlined"},null,8,["items","modelValue"]),t(d,{items:e.list.tipo_examen,"item-title":"descripcion","item-value":"id",modelValue:e.itemsView.tipo_examen,"onUpdate:modelValue":l[25]||(l[25]=a=>e.itemsView.tipo_examen=a),label:"Tipo de exámen",type:"text",variant:"underlined"},null,8,["items","modelValue"])]),_:1}),t(s,null,{default:o(()=>[t(i,{modelValue:e.itemsView.fecha_realizacion,"onUpdate:modelValue":l[26]||(l[26]=a=>e.itemsView.fecha_realizacion=a),label:"Fecha de realización",type:"date",variant:"underlined"},null,8,["modelValue"]),t(i,{modelValue:e.itemsView.fecha_recepcion,"onUpdate:modelValue":l[27]||(l[27]=a=>e.itemsView.fecha_recepcion=a),label:"Fecha recepción",type:"date",variant:"underlined"},null,8,["modelValue"]),t(i,{modelValue:e.itemsView.fecha_solicitud,"onUpdate:modelValue":l[28]||(l[28]=a=>e.itemsView.fecha_solicitud=a),label:"Fecha solicitud",type:"date",variant:"underlined"},null,8,["modelValue"]),t(i,{modelValue:e.itemsView.fecha_vencimiento,"onUpdate:modelValue":l[29]||(l[29]=a=>e.itemsView.fecha_vencimiento=a),label:"Fecha vencimiento",type:"date",variant:"underlined"},null,8,["modelValue"]),t(i,{modelValue:e.itemsView.comentario,"onUpdate:modelValue":l[30]||(l[30]=a=>e.itemsView.comentario=a),label:"Comentario",type:"text",variant:"underlined"},null,8,["modelValue"]),t(p,{modelValue:e.itemsView.resultado,"onUpdate:modelValue":l[31]||(l[31]=a=>e.itemsView.resultado=a),class:"mb-4",label:"Apto",color:"success",inset:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(f,{elevation:"2",class:"ma-2 pa-2"},{default:o(()=>[t(x,null,{default:o(()=>[t(V,{class:"mr-2 ml-2",color:"#009AA4",text:"Cerrar",variant:"tonal",onClick:l[32]||(l[32]=a=>k())})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),ee=L(K,[["__file","/home/omar/www/esalud/resources/js/Pages/Consultas/ConsultaExEpo.vue"]]);export{ee as default};
//# sourceMappingURL=ConsultaExEpo-BkfrdBq0.js.map
