import{x as I,y as B,j as n,o as S,c as T,w as t,b as e,f as x,t as w,n as F,m as M,a as N}from"./app-C1ZRqz2K.js";import{A as P}from"./AppLayout-BaBtGiTx.js";import{f as $,h as L}from"./helper-D_Lm4e5b.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DIp7Rf8v.js";import"./store-DPQZIGvL.js";const K={class:"text-h5"},O=Object.assign({layout:P},{__name:"ConsultaExRespirador",setup(q){const l=I({endpoints:["area","ceco","empresa","planta","unidad"],headers:[{title:"Rut",align:"start",sortable:!0,key:"rut"},{title:"Nombre",align:"start",sortable:!0,key:"nombre"},{title:"Apellidos",align:"start",sortable:!0,key:"apellidos"},{title:"Empresa",align:"start",sortable:!0,key:"empresa.descripcion"},{title:"Fecha exámen",align:"start",sortable:!0,key:"fecha_examen"},{title:"Acciones",align:"center",key:"actions"}],searchQuery:{activo:!0,area:null,ceco:null,empresa:null,planta:null,rut:null,unidad:null,fecha_examen:{desde:null,hasta:null}},rutRules:[i=>{if(!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(i))return!1;let m=i.split("-"),s=m[0],f=m[1].toLowerCase(),c=0,r=1;for(;s;s=Math.floor(s/10))r=(r+s%10*(9-c++%6))%11;let d=r?r-1:"k";return f===d?!0:"El rut es incorrecto"}],itemsView:{paciente_id:null,fecha_examen:"",prueba_ajuste:"",talla_respirador:"",modelo_marca:"",comentario:""},dialog:!1,tableItems:[],formItems:[],editedIndex:-1,list:[],valid:null,formTitle:"Consulta Exámen Respirador",urlSearch:"/consulta/exrespirador/search"});B(async()=>{l.list=await $(l.endpoints)});function g(i){l.dialog=!0,l.itemsView={...i}}function Q(){l.dialog=!1}const k=async()=>{await L(l)};return(i,a)=>{const m=n("v-toolbar-title"),s=n("v-spacer"),f=n("v-toolbar"),c=n("v-card-title"),r=n("v-text-field"),d=n("v-select"),u=n("v-col"),C=n("v-switch"),y=n("v-row"),V=n("v-card-text"),p=n("v-btn"),U=n("download-excel"),b=n("v-card-actions"),_=n("v-container"),j=n("v-tooltip"),E=n("v-data-table"),v=n("v-sheet"),h=n("v-card"),R=n("v-form"),D=n("v-dialog");return S(),T(_,{fluid:""},{default:t(()=>[e(h,null,{default:t(()=>[e(c,null,{default:t(()=>[e(f,{flat:""},{default:t(()=>[e(m,null,{default:t(()=>[x(w(l.formTitle),1)]),_:1}),e(s)]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(v,{color:"white",elevation:4,class:F("rounded-lg ma-2 pa-2")},{default:t(()=>[e(_,{fluid:""},{default:t(()=>[e(V,null,{default:t(()=>[e(y,null,{default:t(()=>[e(u,null,{default:t(()=>[e(r,{label:"Rut",variant:"underlined",rules:l.rutRules,modelValue:l.searchQuery.rut,"onUpdate:modelValue":a[0]||(a[0]=o=>l.searchQuery.rut=o)},null,8,["rules","modelValue"]),e(d,{label:"Empresa",variant:"underlined",modelValue:l.searchQuery.empresa,"onUpdate:modelValue":a[1]||(a[1]=o=>l.searchQuery.empresa=o),items:l.list.empresa,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),e(d,{label:"Unidad",variant:"underlined",modelValue:l.searchQuery.unidad,"onUpdate:modelValue":a[2]||(a[2]=o=>l.searchQuery.unidad=o),items:l.list.unidad,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),e(d,{label:"Area",modelValue:l.searchQuery.area,"onUpdate:modelValue":a[3]||(a[3]=o=>l.searchQuery.area=o),variant:"underlined",items:l.list.area,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),e(d,{label:"Area (cecos)",modelValue:l.searchQuery.ceco,"onUpdate:modelValue":a[4]||(a[4]=o=>l.searchQuery.ceco=o),variant:"underlined",items:l.list.ceco,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"])]),_:1}),e(u,null,{default:t(()=>[e(C,{modelValue:l.searchQuery.activo,"onUpdate:modelValue":a[5]||(a[5]=o=>l.searchQuery.activo=o),"hide-details":"","true-value":"true","false-value":"false",class:"ml-4 mt-4",variant:"underlined",color:"green-darken-3",inset:"",label:`Paciente: ${l.searchQuery.activo.toString()}`},null,8,["modelValue","label"]),e(r,{label:"Fecha exámen (desde)",variant:"underlined",class:"mt-6",modelValue:l.searchQuery.fecha_examen.desde,"onUpdate:modelValue":a[6]||(a[6]=o=>l.searchQuery.fecha_examen.desde=o),type:"date"},null,8,["modelValue"]),e(r,{label:"Fecha exámen (hasta)",variant:"underlined",type:"date",modelValue:l.searchQuery.fecha_examen.hasta,"onUpdate:modelValue":a[7]||(a[7]=o=>l.searchQuery.fecha_examen.hasta=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(p,{"prepend-icon":"mdi-file-search",variant:"underlined",color:"#662D91",loading:l.loading,onClick:k},{default:t(()=>a[15]||(a[15]=[x(" Buscar ")])),_:1},8,["loading"]),e(p,{"prepend-icon":"mdi-microsoft-excel",variant:"underlined",color:"#662D91"},{default:t(()=>[e(U,{data:l.tableItems,name:"consulta_respirador.xls"},{default:t(()=>a[16]||(a[16]=[x(" Bajar archivo ")])),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),e(_,{fluid:""},{default:t(()=>[e(E,{headers:l.headers,items:l.tableItems,"sort-by":[{key:"apellidos",order:"asc"}]},{"item.actions":t(({item:o})=>[e(j,{text:"Ver detalles",location:"top"},{activator:t(({props:A})=>[e(p,M(A,{density:"compact",color:"#662D91",class:"mr-2 ml-2",icon:"mdi-eye",onClick:G=>g(o)}),null,16,["onClick"])]),_:2},1024)]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(D,{modelValue:l.dialog,"onUpdate:modelValue":a[14]||(a[14]=o=>l.dialog=o)},{default:t(()=>[e(v,{elevation:"4",class:"ma-4 pa-4"},{default:t(()=>[e(h,null,{default:t(()=>[e(R,{readonly:""},{default:t(()=>[e(v,{elevation:"2",class:"ma-2 pa-2"},{default:t(()=>[e(c,null,{default:t(()=>[N("span",K,w(l.formTitle),1)]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(y,null,{default:t(()=>[e(u,null,{default:t(()=>[e(r,{modelValue:l.itemsView.fecha_examen,"onUpdate:modelValue":a[8]||(a[8]=o=>l.itemsView.fecha_examen=o),label:"Fecha exámen",type:"date",variant:"underlined"},null,8,["modelValue"]),e(r,{modelValue:l.itemsView.prueba_ajuste,"onUpdate:modelValue":a[9]||(a[9]=o=>l.itemsView.prueba_ajuste=o),label:"Prueba ajuste",type:"text",variant:"underlined"},null,8,["modelValue"]),e(r,{modelValue:l.itemsView.talla_respirador,"onUpdate:modelValue":a[10]||(a[10]=o=>l.itemsView.talla_respirador=o),label:"Talla",type:"text",variant:"underlined"},null,8,["modelValue"])]),_:1}),e(u,null,{default:t(()=>[e(r,{modelValue:l.itemsView.modelo_marca,"onUpdate:modelValue":a[11]||(a[11]=o=>l.itemsView.modelo_marca=o),label:"Modelo / Marca",type:"text",variant:"underlined"},null,8,["modelValue"]),e(r,{modelValue:l.itemsView.comentario,"onUpdate:modelValue":a[12]||(a[12]=o=>l.itemsView.comentario=o),label:"Comentario",type:"text",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{elevation:"2",class:"ma-2 pa-2"},{default:t(()=>[e(b,null,{default:t(()=>[e(p,{class:"mr-2 ml-2",color:"#662D91",text:"Cerrar",variant:"underlined",onClick:a[13]||(a[13]=o=>Q())})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),ee=z(O,[["__file","/home/blueshadows/www/esalud/resources/js/Pages/Consultas/ConsultaExRespirador.vue"]]);export{ee as default};
//# sourceMappingURL=ConsultaExRespirador-DS2gmmyc.js.map
