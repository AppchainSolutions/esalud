{"version":3,"file":"DashExpoPlanta-JkfppxFj.js","sources":["../../../resources/js/Pages/SubPages/DashExpoPlanta.vue"],"sourcesContent":["<script setup>\nimport axios from \"axios\";\nimport { Doughnut } from \"vue-chartjs\";\nimport { onMounted, reactive } from \"vue\";\nimport autocolors from \"chartjs-plugin-autocolors\";\nimport { fetchData } from \"@/helper.js\";\nimport {\n    Chart as ChartJS,\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement,\n    CategoryScale,\n    LinearScale,\n} from \"chart.js\";\n\nChartJS.register(\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement,\n    CategoryScale,\n    LinearScale,\n    autocolors\n);\n\nconst state = reactive({\n    endpoints: [\"planta\"],\n    list: [],\n    planta: null,\n    loaded: false,\n});\n\nconst chartData = reactive({\n    labels: [],\n    datasets: [\n        {\n            data: [],\n        },\n    ],\n});\n\nconst chartOptions = {\n    responsive: true,\n    maintainAspectRatio: true,\n    plugins: {\n        autocolors: {\n            mode: \"data\",\n        },\n    },\n};\n\nconst onChange = async (value) => {\n    await getData(state.planta);\n    console.log(state.planta);\n    state.loaded = true;\n};\n\nconst getData = async (planta) => {\n    try {\n        state.loaded = false;\n        let id = planta;\n        const { data } = await axios.get(\"/dashboard/expo_planta\", {\n            params: { id },\n        });\n        const objArray = Object.values(data);\n        chartData.labels = objArray[0];\n        chartData.datasets[0].data = objArray[1];\n    } catch (error) {\n        console.log(\"Error al obtener los datos.\" + error);\n    }\n};\n\nonMounted(async () => {\n    try {\n        state.list = await fetchData(state.endpoints);\n    } catch (error) {\n        console.log(error);\n    }\n});\n</script>\n\n<template>\n    <div style=\"width: 80%\">\n        <v-select\n            :items=\"state.list.planta\"\n            item-title=\"descripcion\"\n            item-value=\"id\"\n            v-model=\"state.planta\"\n            label=\"Planta\"\n            clearable\n            class=\"ma-4 mt-8\"\n            variant=\"underlined\"\n            @update:modelValue=\"onChange()\"\n            single\n        ></v-select>\n\n        <Doughnut\n            :options=\"chartOptions\"\n            :data=\"chartData\"\n            v-if=\"state.loaded\"\n        />\n    </div>\n</template>\n"],"names":["ChartJS","Title","Tooltip","Legend","ArcElement","CategoryScale","LinearScale","autocolors","state","reactive","chartData","chartOptions","onChange","value","getData","planta","id","data","axios","objArray","error","onMounted","fetchData"],"mappings":"gaAgBAA,EAAQ,SACJC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,CACJ,EAEA,MAAMC,EAAQC,EAAS,CACnB,UAAW,CAAC,QAAQ,EACpB,KAAM,CAAE,EACR,OAAQ,KACR,OAAQ,EACZ,CAAC,EAEKC,EAAYD,EAAS,CACvB,OAAQ,CAAE,EACV,SAAU,CACN,CACI,KAAM,CAAE,CACX,CACJ,CACL,CAAC,EAEKE,EAAe,CACjB,WAAY,GACZ,oBAAqB,GACrB,QAAS,CACL,WAAY,CACR,KAAM,MACT,CACJ,CACL,EAEMC,EAAW,MAAOC,GAAU,CAC9B,MAAMC,EAAQN,EAAM,MAAM,EAC1B,QAAQ,IAAIA,EAAM,MAAM,EACxBA,EAAM,OAAS,EACnB,EAEMM,EAAU,MAAOC,GAAW,CAC9B,GAAI,CACAP,EAAM,OAAS,GACf,IAAIQ,EAAKD,EACT,KAAM,CAAE,KAAAE,CAAM,EAAG,MAAMC,EAAM,IAAI,yBAA0B,CACvD,OAAQ,CAAE,GAAAF,CAAI,CAC1B,CAAS,EACKG,EAAW,OAAO,OAAOF,CAAI,EACnCP,EAAU,OAASS,EAAS,CAAC,EAC7BT,EAAU,SAAS,CAAC,EAAE,KAAOS,EAAS,CAAC,CAC1C,OAAQC,EAAO,CACZ,QAAQ,IAAI,8BAAgCA,CAAK,CACzD,CACA,EAEA,OAAAC,EAAU,SAAY,CAClB,GAAI,CACAb,EAAM,KAAO,MAAMc,EAAUd,EAAM,SAAS,CAC/C,OAAQY,EAAO,CACZ,QAAQ,IAAIA,CAAK,CACzB,CACA,CAAC"}