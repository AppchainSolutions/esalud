{"version":3,"file":"LicenciaMedica-CdeDDP6Z.js","sources":["../../../resources/js/Pages/SubPages/LicenciaMedica.vue"],"sourcesContent":["<script setup>\nimport { reactive, computed } from \"vue\";\nimport { useDataStore } from \"@/store.js\";\nimport {\n    handleRemoveItem,\n    handleShowItem,\n    handleStoreItem,\n    handleEditItem,\n    closeForm,\n    openToCreate,\n    openToEdit,\n} from \"@/helper.js\";\n\nconst store = useDataStore();\nconst state = reactive({\n    headers: [\n        {\n            title: \"Folio\",\n            align: \"start\",\n            sortable: true,\n            key: \"folio\",\n        },\n        {\n            title: \"Fecha emisión\",\n            align: \"start\",\n            sortable: true,\n            key: \"fecha_emision\",\n        },\n        {\n            title: \"Fecha recepción\",\n            align: \"start\",\n            sortable: true,\n            key: \"fecha_recepcion\",\n        },\n        {\n            title: \"Fecha inicio\",\n            align: \"start\",\n            sortable: true,\n            key: \"fecha_inicio\",\n        },\n        {\n            title: \"Fecha término\",\n            align: \"start\",\n            sortable: true,\n            key: \"fecha_termino\",\n        },\n        { title: \"Comentario\", key: \"comentario\", sortable: false },\n        { title: \"Acciones\", align: \"center\", key: \"actions\" },\n    ],\n    editedItem: {\n        paciente_id: null,\n        folio: null,\n        fecha_emision: null,\n        fecha_recepcion: null,\n        fecha_inicio: null,\n        fecha_termino: null,\n        caract_reposo: null,\n        lugar_reposo: null,\n        tipo_licencia: null,\n        recuperabilidad_laboral: null,\n        inicio_invalidez: null,\n        titulo_profesional: null,\n        nombre_profesional: null,\n        comentario: null,\n    },\n    defaultItem: {\n        paciente_id: null,\n        folio: null,\n        fecha_emision: null,\n        fecha_recepcion: null,\n        fecha_inicio: null,\n        fecha_termino: null,\n        caract_reposo: null,\n        lugar_reposo: null,\n        tipo_licencia: null,\n        recuperabilidad_laboral: false,\n        inicio_invalidez: false,\n        titulo_profesional: null,\n        nombre_profesional: null,\n        comentario: null,\n    },\n    caract_reposo: [\n        \"Total\",\n        \"Parcial - Mañana\",\n        \"Parcial - Tarde\",\n        \"Parcial - Noche\",\n    ],\n    lugar_reposo: [\"Domicilio\", \"Hospital\", \"Otro domicilio\"],\n    tipo_licencia: [\n        \"Accidente del trabajo o trayecto\",\n        \"Enfermedad grave hijo menor de 1 año\",\n        \"Enfermedad o accidente común\",\n        \"Enfermedad profesional\",\n        \"Licencia maternal pre y post natal\",\n        \"Patología del embarazo\",\n        \"Prorroga medicina preventiva\",\n    ],\n    titulo_profesional: [\"Médico\", \"Dentista\", \"Matrona\"],\n    searchQuery: {\n        paciente_id: null,\n    },\n    dialog: false,\n    tableItems: [],\n    editedIndex: -1,\n    list: [],\n    valid: null,\n    formTitle: \"Licencias Médicas\",\n    formCrear: \"Nueva Licencia Médica\",\n    formEdit: \"Editar Licencia Médica\",\n    urlSearch: \"/licencia/search\",\n    urlShow: \"/licencia/show\",\n    urlUpdate: \"/licencia/update\",\n    urlDelete: \"/licencia/delete\",\n    urlStore: \"/licencia\",\n});\n\n//**********\\\\\\\\  COMPUTE PROPERTIES ////*************/\nconst editedItemTitle = computed(() =>\n    state.editedIndex === -1 ? state.formCrear : state.formEdit\n);\n\nfunction close() {\n    closeForm(state);\n}\n//**********\\\\\\\\  CRUD ////*************/\nconst handleShow = async () => {\n    state.searchQuery.paciente_id = store.getSelected.id;\n    await handleShowItem(state);\n};\n\nfunction openFormCreate() {\n    openToCreate(state);\n}\n\nfunction storeItems() {\n    return state.editedIndex > -1 ? update() : create();\n}\n\nconst create = async () => {\n    await handleStoreItem(state);\n    closeForm(state);\n};\n\nfunction openFormEdit(item) {\n    openToEdit(state, item);\n}\n\nconst update = async () => {\n    await handleEditItem(state);\n    closeForm(state);\n};\n\nconst remove = async (item) => {\n    await handleRemoveItem(state, item);\n};\n</script>\n\n<template>\n    <v-container>\n        <v-data-table :headers=\"state.headers\" :items=\"state.tableItems\">\n            <template v-slot:top>\n                <v-toolbar flat>\n                    <v-toolbar-title>{{ state.formTitle }}</v-toolbar-title>\n                    <v-divider class=\"mx-4\" inset vertical></v-divider>\n                    <v-spacer></v-spacer>\n                    <v-dialog v-model=\"state.dialog\">\n                        <template v-slot:activator=\"{ props }\">\n                            <v-btn\n                                icon=\"mdi-update\"\n                                class=\"ma-2\"\n                                color=\"#009AA4\"\n                                variant=\"tonal\"\n                                @click=\"handleShow\"\n                            >\n                            </v-btn>\n                            <v-btn\n                                icon=\"mdi-account-multiple-plus\"\n                                variant=\"tonal\"\n                                class=\"ma-2\"\n                                color=\"#009AA4\"\n                                @click=\"openFormCreate\"\n                            >\n                            </v-btn>\n                        </template>\n\n                        <v-card>\n                            <v-form>\n                                <v-card-text>\n                                    <v-container>\n                                        <v-sheet\n                                        elevation=\"4\"\n                                        class=\"ma-4 pa-4\"\n                                        >\n                                        <v-row align=\"center\">\n                                            <v-col>\n                                                <v-card-title>\n                                                    <span class=\"text-h5\"\n                                                        >{{ editedItemTitle }}\n                                                    </span>\n                                                </v-card-title>\n                                            </v-col>\n                                            <v-col>\n                                                <v-card-actions>\n                                                    <v-btn\n                                                        color=\"#009AA4\"\n                                                        variant=\"tonal\"\n                                                        @click=\"close\"\n                                                    >\n                                                        Cancelar\n                                                    </v-btn>\n                                                    <v-btn\n                                                        color=\"#009AA4\"\n                                                        variant=\"tonal\"\n                                                        @click=\"storeItems\"\n                                                    >\n                                                        Guardar\n                                                    </v-btn>\n                                                </v-card-actions>\n                                            </v-col>\n                                        </v-row>\n                                        </v-sheet>\n                                        <v-sheet\n                                            elevation=\"4\"\n                                            class=\"ma-4 pa-4\"\n                                        >\n                                            <!------ ------>\n                                            <v-row>\n                                                <v-col>\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .folio\n                                                        \"\n                                                        label=\"Folio\"\n                                                        type=\"number\"\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .fecha_emision\n                                                        \"\n                                                        label=\"Fecha emisión\"\n                                                        type=\"date\"\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .fecha_recepcion\n                                                        \"\n                                                        label=\"Fecha recepción\"\n                                                        type=\"date\"\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n                                                </v-col>\n                                                <v-col>\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .fecha_inicio\n                                                        \"\n                                                        label=\"Fecha inicio\"\n                                                        type=\"date\"\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .fecha_termino\n                                                        \"\n                                                        label=\"Fecha de término\"\n                                                        type=\"date\"\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .comentario\n                                                        \"\n                                                        label=\"Comentario\"\n                                                        type=\"text\"\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n                                                </v-col>\n                                                <v-col>\n                                                    <v-select\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .caract_reposo\n                                                        \"\n                                                        label=\"Características del reposo\"\n                                                        variant=\"underlined\"\n                                                        :items=\"\n                                                            state.caract_reposo\n                                                        \"\n                                                        clearable\n                                                    ></v-select>\n                                                    <v-select\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .lugar_reposo\n                                                        \"\n                                                        label=\"Lugar del reposo\"\n                                                        variant=\"underlined\"\n                                                        :items=\"\n                                                            state.lugar_reposo\n                                                        \"\n                                                        clearable\n                                                    ></v-select>\n                                                    <v-select\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .tipo_licencia\n                                                        \"\n                                                        label=\"Tipo de Licencia\"\n                                                        variant=\"underlined\"\n                                                        :items=\"\n                                                            state.tipo_licencia\n                                                        \"\n                                                        clearable\n                                                    ></v-select>\n                                                </v-col>\n                                                <v-col>\n                                                    <v-switch\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .recuperabilidad_laboral\n                                                        \"\n                                                        hide-details\n                                                        class=\"ml-4\"\n                                                        variant=\"underlined\"\n                                                        color=\"primary\"\n                                                        inset\n                                                        label=\"Recuperabilidad Laboral\"\n                                                    ></v-switch>\n                                                    <v-switch\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .inicio_invalidez\n                                                        \"\n                                                        hide-details\n                                                        class=\"ml-4\"\n                                                        variant=\"underlined\"\n                                                        color=\"primary\"\n                                                        inset\n                                                        label=\"Inicio Invalidez\"\n                                                    ></v-switch>\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .nombre_profesional\n                                                        \"\n                                                        label=\"Nombre del Profesional\"\n                                                        type=\"text\"\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n                                                    <v-select\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .titulo_profesional\n                                                        \"\n                                                        label=\"Titulo profesional\"\n                                                        variant=\"underlined\"\n                                                        :items=\"\n                                                            state.titulo_profesional\n                                                        \"\n                                                        clearable\n                                                    ></v-select>\n                                                </v-col>\n                                            </v-row>\n                                            <!------------->\n                                        </v-sheet>\n                                    </v-container>\n                                </v-card-text>\n                            </v-form>\n                        </v-card>\n                    </v-dialog>\n                </v-toolbar>\n            </template>\n\n            <template v-slot:item.actions=\"{ item }\">\n                <v-tooltip text=\"Editar\" location=\"top\">\n                    <template v-slot:activator=\"{ props }\">\n                        <v-btn\n                            v-bind=\"props\"\n                            density=\"compact\"\n                            class=\"mr-2 ml-2\"\n                            color=\"#009AA4\"\n                            variant=\"tonal\"\n                            :icon=\"'mdi-account-edit'\"\n                            @click=\"openFormEdit(item)\"\n                        ></v-btn>\n                    </template>\n                </v-tooltip>\n\n                <v-tooltip text=\"Eliminar\" location=\"top\">\n                    <template v-slot:activator=\"{ props }\">\n                        <v-btn\n                            v-bind=\"props\"\n                            density=\"compact\"\n                            class=\"mr-2 ml-2\"\n                            color=\"#009AA4\"\n                            variant=\"tonal\"\n                            :icon=\"'mdi-delete'\"\n                            @click=\"remove(item)\"\n                        ></v-btn>\n                    </template>\n                </v-tooltip>\n            </template>\n            <template v-slot:no-data>\n                <v-btn variant=\"tonal\" color=\"#009AA4\" @click=\"handleShow\">\n                    Iniciar\n                </v-btn>\n            </template>\n        </v-data-table>\n    </v-container>\n</template>\n"],"names":["store","useDataStore","state","reactive","editedItemTitle","computed","close","closeForm","handleShow","handleShowItem","openFormCreate","openToCreate","storeItems","update","create","handleStoreItem","openFormEdit","item","openToEdit","handleEditItem","remove","handleRemoveItem"],"mappings":"sWAaA,MAAMA,EAAQC,EAAY,EACpBC,EAAQC,EAAS,CACnB,QAAS,CACL,CACI,MAAO,QACP,MAAO,QACP,SAAU,GACV,IAAK,OACR,EACD,CACI,MAAO,gBACP,MAAO,QACP,SAAU,GACV,IAAK,eACR,EACD,CACI,MAAO,kBACP,MAAO,QACP,SAAU,GACV,IAAK,iBACR,EACD,CACI,MAAO,eACP,MAAO,QACP,SAAU,GACV,IAAK,cACR,EACD,CACI,MAAO,gBACP,MAAO,QACP,SAAU,GACV,IAAK,eACR,EACD,CAAE,MAAO,aAAc,IAAK,aAAc,SAAU,EAAO,EAC3D,CAAE,MAAO,WAAY,MAAO,SAAU,IAAK,SAAW,CACzD,EACD,WAAY,CACR,YAAa,KACb,MAAO,KACP,cAAe,KACf,gBAAiB,KACjB,aAAc,KACd,cAAe,KACf,cAAe,KACf,aAAc,KACd,cAAe,KACf,wBAAyB,KACzB,iBAAkB,KAClB,mBAAoB,KACpB,mBAAoB,KACpB,WAAY,IACf,EACD,YAAa,CACT,YAAa,KACb,MAAO,KACP,cAAe,KACf,gBAAiB,KACjB,aAAc,KACd,cAAe,KACf,cAAe,KACf,aAAc,KACd,cAAe,KACf,wBAAyB,GACzB,iBAAkB,GAClB,mBAAoB,KACpB,mBAAoB,KACpB,WAAY,IACf,EACD,cAAe,CACX,QACA,mBACA,kBACA,iBACH,EACD,aAAc,CAAC,YAAa,WAAY,gBAAgB,EACxD,cAAe,CACX,mCACA,uCACA,+BACA,yBACA,qCACA,yBACA,8BACH,EACD,mBAAoB,CAAC,SAAU,WAAY,SAAS,EACpD,YAAa,CACT,YAAa,IAChB,EACD,OAAQ,GACR,WAAY,CAAE,EACd,YAAa,GACb,KAAM,CAAE,EACR,MAAO,KACP,UAAW,oBACX,UAAW,wBACX,SAAU,yBACV,UAAW,mBACX,QAAS,iBACT,UAAW,mBACX,UAAW,mBACX,SAAU,WACd,CAAC,EAGKC,EAAkBC,EAAS,IAC7BH,EAAM,cAAgB,GAAKA,EAAM,UAAYA,EAAM,QACvD,EAEA,SAASI,GAAQ,CACbC,EAAUL,CAAK,CACnB,CAEA,MAAMM,EAAa,SAAY,CAC3BN,EAAM,YAAY,YAAcF,EAAM,YAAY,GAClD,MAAMS,EAAeP,CAAK,CAC9B,EAEA,SAASQ,GAAiB,CACtBC,EAAaT,CAAK,CACtB,CAEA,SAASU,GAAa,CAClB,OAAOV,EAAM,YAAc,GAAKW,EAAM,EAAKC,GAC/C,CAEA,MAAMA,EAAS,SAAY,CACvB,MAAMC,EAAgBb,CAAK,EAC3BK,EAAUL,CAAK,CACnB,EAEA,SAASc,EAAaC,EAAM,CACxBC,EAAWhB,EAAOe,CAAI,CAC1B,CAEA,MAAMJ,EAAS,SAAY,CACvB,MAAMM,EAAejB,CAAK,EAC1BK,EAAUL,CAAK,CACnB,EAEMkB,EAAS,MAAOH,GAAS,CAC3B,MAAMI,GAAiBnB,EAAOe,CAAI,CACtC"}