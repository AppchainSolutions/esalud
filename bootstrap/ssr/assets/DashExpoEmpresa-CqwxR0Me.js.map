{"version":3,"file":"DashExpoEmpresa-CqwxR0Me.js","sources":["../../../resources/js/Pages/SubPages/DashExpoEmpresa.vue"],"sourcesContent":["<script setup>\n  import axios from \"axios\";\n  import { Doughnut } from \"vue-chartjs\";\n  import { onMounted, reactive } from \"vue\";\n  import autocolors from \"chartjs-plugin-autocolors\";\n  import { fetchData } from \"@/helper.js\";\n  import {\n    Chart as ChartJS,\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement,\n    CategoryScale,\n    LinearScale,\n  } from \"chart.js\";\n\n  ChartJS.register(\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement,\n    CategoryScale,\n    LinearScale,\n    autocolors\n  );\n\n  const state = reactive({\n    endpoints: [\"empresa\"],\n    list: [],\n    empresa: null,\n    loaded: false,\n  });\n\n  const chartData = reactive({\n    labels: [\"A\", \"b\", \"C\"],\n    datasets: [\n      {\n        data: [2, 3, 5],\n      },\n    ],\n  });\n\n  const chartOptions = {\n    responsive: true,\n    maintainAspectRatio: true,\n    plugins: {\n      autocolors: {\n        mode: \"data\",\n      },\n    },\n  };\n\n  const onChange = async (value) => {\n    await getData(state.empresa);\n    state.loaded = true;\n  };\n\n  const getData = async (empresa) => {\n    try {\n      state.loaded = false;\n      let id = empresa;\n      const { data } = await axios.get(\"/dashboard/expo_empresa\", {\n        params: { id },\n      });\n      const objArray = Object.values(data);\n      console.log(objArray);\n      chartData.labels = objArray[0];\n      chartData.datasets[0].data = objArray[1];\n    } catch (error) {\n      console.log(\"Error al obtener los datos.\" + error);\n    }\n  };\n\n  onMounted(async () => {\n    try {\n      state.list = await fetchData(state.endpoints);\n    } catch (error) {\n      console.log(error);\n    }\n  });\n</script>\n\n<template>\n  <div style=\"width: 80%\">\n    <v-select\n      :items=\"state.list.empresa\"\n      item-title=\"descripcion\"\n      item-value=\"id\"\n      v-model=\"state.empresa\"\n      label=\"Empresa\"\n      clearable\n      class=\"ma-4 mt-8\"\n      variant=\"underlined\"\n      @update:modelValue=\"onChange()\"\n      single\n    ></v-select>\n\n    <Doughnut :options=\"chartOptions\" :data=\"chartData\" v-if=\"state.loaded\" />\n  </div>\n</template>\n"],"names":["ChartJS"],"mappings":";;;;;;;;;;;;;;;;AAgBEA,UAAQ;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AAEE,UAAM,QAAQ,SAAS;AAAA,MACrB,WAAW,CAAC,SAAS;AAAA,MACrB,MAAM,CAAE;AAAA,MACR,SAAS;AAAA,MACT,QAAQ;AAAA,IACZ,CAAG;AAED,UAAM,YAAY,SAAS;AAAA,MACzB,QAAQ,CAAC,KAAK,KAAK,GAAG;AAAA,MACtB,UAAU;AAAA,QACR;AAAA,UACE,MAAM,CAAC,GAAG,GAAG,CAAC;AAAA,QACf;AAAA,MACF;AAAA,IACL,CAAG;AAED,UAAM,eAAe;AAAA,MACnB,YAAY;AAAA,MACZ,qBAAqB;AAAA,MACrB,SAAS;AAAA,QACP,YAAY;AAAA,UACV,MAAM;AAAA,QACP;AAAA,MACF;AAAA,IACL;AAEE,UAAM,WAAW,OAAO,UAAU;AAChC,YAAM,QAAQ,MAAM,OAAO;AAC3B,YAAM,SAAS;AAAA,IACnB;AAEE,UAAM,UAAU,OAAO,YAAY;AACjC,UAAI;AACF,cAAM,SAAS;AACf,YAAI,KAAK;AACT,cAAM,EAAE,KAAM,IAAG,MAAM,MAAM,IAAI,2BAA2B;AAAA,UAC1D,QAAQ,EAAE,GAAI;AAAA,QACtB,CAAO;AACD,cAAM,WAAW,OAAO,OAAO,IAAI;AACnC,gBAAQ,IAAI,QAAQ;AACpB,kBAAU,SAAS,SAAS,CAAC;AAC7B,kBAAU,SAAS,CAAC,EAAE,OAAO,SAAS,CAAC;AAAA,MACxC,SAAQ,OAAO;AACd,gBAAQ,IAAI,gCAAgC,KAAK;AAAA,MACnD;AAAA,IACJ;AAEE,cAAU,YAAY;AACpB,UAAI;AACF,cAAM,OAAO,MAAM,UAAU,MAAM,SAAS;AAAA,MAC7C,SAAQ,OAAO;AACd,gBAAQ,IAAI,KAAK;AAAA,MACnB;AAAA,IACJ,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}