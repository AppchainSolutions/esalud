{"version":3,"file":"ExamenEPO-C-OwdkA_.js","sources":["../../../resources/js/Pages/Examenes/ExamenEPO.vue"],"sourcesContent":["<script setup>\n  import { reactive, onMounted, computed } from \"vue\";\n  import { useDataStore } from \"@/store.js\";\n  import {\n    closeForm,\n    fetchData,\n    handleEditItem,\n    handleRemoveItem,\n    handleShowItem,\n    handleStoreItem,\n    openToCreate,\n    openToEdit,\n  } from \"@/helper.js\";\n\n  const store = useDataStore();\n  const state = reactive({\n    endpoints: [\"bateria\", \"estado_epo\", \"semaforo\", \"tipo_examen\"],\n    headers: [\n      {\n        title: \"N° solicitud\",\n        align: \"start\",\n        sortable: true,\n        key: \"numero_solicitud\",\n      },\n      {\n        title: \"Estatus\",\n        align: \"start\",\n        sortable: true,\n        key: \"estado_epo.descripcion\",\n      },\n      {\n        title: \"Batería\",\n        align: \"start\",\n        sortable: true,\n        key: \"bateria.descripcion\",\n      },\n      {\n        title: \"Fecha realización\",\n        align: \"start\",\n        sortable: true,\n        key: \"fecha_realizacion\",\n      },\n      {\n        title: \"Fecha recepción\",\n        align: \"start\",\n        sortable: true,\n        key: \"fecha_recepcion\",\n      },\n      {\n        title: \"Fecha solicitud\",\n        align: \"start\",\n        sortable: true,\n        key: \"fecha_solicitud\",\n      },\n      {\n        title: \"Fecha vencimiento\",\n        align: \"start\",\n        sortable: true,\n        key: \"fecha_vencimiento\",\n      },\n      {\n        title: \"Semáforo\",\n        align: \"start\",\n        sortable: true,\n        key: \"semaforo.descripcion\",\n      },\n      {\n        title: \"Acciones\",\n        width: \"10em\",\n        align: \"center\",\n        key: \"actions\",\n      },\n    ],\n    editedItem: {\n      paciente_id: null,\n      codigo_verificacion: null,\n      numero_solicitud: null,\n      comentario: null,\n      estado_epo: null,\n      fecha_realizacion: null,\n      fecha_recepcion: null,\n      fecha_solicitud: null,\n      fecha_vencimiento: null,\n      bateria: null,\n      resultado: \"No apto\",\n      semaforo: null,\n      tipo_examen: null,\n    },\n    defaultItem: {\n      paciente_id: null,\n      codigo_verificacion: null,\n      numero_solicitud: null,\n      comentario: null,\n      estado_epo: null,\n      fecha_realizacion: null,\n      fecha_recepcion: null,\n      fecha_solicitud: null,\n      fecha_vencimiento: null,\n      bateria: null,\n      resultado: \"No apto\",\n      semaforo: null,\n      tipo_examen: null,\n    },\n    searchQuery: {\n      paciente_id: null,\n    },\n    dialog: false,\n    tableItems: [],\n    editedIndex: -1,\n    list: [],\n    loadingSearch: false,\n    valid: null,\n    formTitle: \"Ocupacionales y Preocupacionales\",\n    formCrear: \"Nuevo exámen Ocupacional / Preocupacional\",\n    formEdit: \"Editar datos Ocupacional / Preocupacional\",\n    urlShow: \"examen/epo/show\",\n    urlUpdate: \"examen/epo/update\",\n    urlDelete: \"examen/epo/delete\",\n    urlStore: \"examen/epo\",\n  });\n\n  //**********\\\\\\\\  LIFE CYCLE HOOKS ////*************/\n  onMounted(async () => {\n    state.list = await fetchData(state.endpoints);\n  });\n\n  //**********\\\\\\\\  COMPUTE PROPERTIES ////*************/\n  const editedItemTitle = computed(() =>\n    state.editedIndex === -1 ? state.formCrear : state.formEdit\n  );\n\n  //**********\\\\\\\\ METHODS ////*************/\n  function volver() {\n    window.history.back();\n  }\n  function close() {\n    closeForm(state);\n  }\n  //**********\\\\\\\\  CRUD ////*************/\n  const handleShow = async () => {\n    state.searchQuery.paciente_id = store.getSelected.id;\n    await handleShowItem(state);\n  };\n\n  function openFormCreate() {\n    openToCreate(state);\n  }\n\n  function storeItems() {\n    return state.editedIndex > -1 ? update() : create();\n  }\n\n  const create = async () => {\n    await handleStoreItem(state);\n    closeForm(state);\n  };\n\n  function openFormEdit(item) {\n    openToEdit(state, item);\n  }\n\n  const update = async () => {\n    await handleEditItem(state);\n    closeForm(state);\n  };\n\n  const remove = async (item) => {\n    await handleRemoveItem(state, item);\n  };\n  /*\nconst getIconReview = async (val) => {\n    await console.log(val);\n           // return val === 0 ? \"mdi-eye-off-outline\" : \"mdi-eye-outline\";\n        };*/\n</script>\n\n<template>\n  <v-container fluid>\n    <v-data-table :headers=\"state.headers\" :items=\"state.tableItems\">\n      <template v-slot:top>\n        <v-toolbar flat>\n          <v-toolbar-title>{{ state.formTitle }}</v-toolbar-title>\n          <v-divider class=\"mx-4\" inset vertical></v-divider>\n          <v-spacer></v-spacer>\n          <v-dialog v-model=\"state.dialog\">\n            <template v-slot:activator=\"{ props }\">\n              <v-btn\n                icon=\"mdi-update\"\n                variant=\"tonal\"\n                class=\"ma-2\"\n                color=\"#009AA4\"\n                :loading=\"state.loadingSearch\"\n                @click=\"handleShow\"\n              >\n              </v-btn>\n              <v-btn\n                icon=\"mdi-account-multiple-plus\"\n                variant=\"tonal\"\n                class=\"ma-2\"\n                color=\"#009AA4\"\n                @click=\"openFormCreate\"\n              >\n              </v-btn>\n            </template>\n\n            <v-card>\n              <v-form>\n                <v-card-title>\n                  <span class=\"text-h5 ma-4\">{{ editedItemTitle }} </span>\n                </v-card-title>\n                <v-card-text>\n                  <v-row>\n                    <v-col>\n                      <v-sheet elevation=\"12\" class=\"ma-4 pa-4\" rounded border>\n                        <v-text-field\n                          v-model=\"state.editedItem.numero_solicitud\"\n                          label=\"N° solicitud\"\n                          type=\"number\"\n                          variant=\"underlined\"\n                          clearable\n                        ></v-text-field>\n                        <v-select\n                          v-model=\"state.editedItem.estado_epo\"\n                          :items=\"state.list.estado_epo\"\n                          item-title=\"descripcion\"\n                          item-value=\"id\"\n                          label=\"Estatus\"\n                          variant=\"underlined\"\n                          clearable\n                        ></v-select>\n\n                        <v-select\n                          v-model=\"state.editedItem.bateria\"\n                          :items=\"state.list.bateria\"\n                          item-title=\"descripcion\"\n                          item-value=\"id\"\n                          label=\"Batería\"\n                          variant=\"underlined\"\n                          chips\n                        ></v-select>\n                        <v-select\n                          v-model=\"state.editedItem.tipo_examen\"\n                          :items=\"state.list.tipo_examen\"\n                          item-title=\"descripcion\"\n                          item-value=\"id\"\n                          label=\"Tipo de exámen\"\n                          variant=\"underlined\"\n                        ></v-select>\n                        <v-text-field\n                          v-model=\"state.editedItem.fecha_realizacion\"\n                          label=\"Fecha de realización\"\n                          type=\"date\"\n                          variant=\"underlined\"\n                        ></v-text-field>\n                        <v-text-field\n                          v-model=\"state.editedItem.fecha_solicitud\"\n                          label=\"Fecha solicitud\"\n                          type=\"date\"\n                          variant=\"underlined\"\n                        ></v-text-field>\n                      </v-sheet>\n                    </v-col>\n                    <v-col>\n                      <v-sheet elevation=\"12\" class=\"ma-4 pa-4\" rounded border>\n                        <v-text-field\n                          v-model=\"state.editedItem.codigo_verificacion\"\n                          label=\"Cod. verif.\"\n                          type=\"number\"\n                          variant=\"underlined\"\n                          clearable\n                        ></v-text-field>\n                        <v-select\n                          v-model=\"state.editedItem.semaforo\"\n                          :items=\"state.list.semaforo\"\n                          item-title=\"descripcion\"\n                          item-value=\"id\"\n                          label=\"Semáforo\"\n                          variant=\"underlined\"\n                        ></v-select>\n                        <v-text-field\n                          v-model=\"state.editedItem.fecha_recepcion\"\n                          label=\"Fecha recepción\"\n                          type=\"date\"\n                          variant=\"underlined\"\n                        ></v-text-field>\n\n                        <v-text-field\n                          v-model=\"state.editedItem.fecha_vencimiento\"\n                          label=\"Fecha vencimiento\"\n                          type=\"date\"\n                          variant=\"underlined\"\n                        ></v-text-field>\n                        <v-switch\n                          v-model=\"state.editedItem.resultado\"\n                          hide-details\n                          true-value=\"Apto\"\n                          false-value=\"No apto\"\n                          class=\"ml-4 mt-4\"\n                          variant=\"underlined\"\n                          color=\"green-darken-3\"\n                          inset\n                          clearable\n                          :label=\"`Resultado: ${state.editedItem.resultado.toString()}`\"\n                        ></v-switch>\n                        <v-text-field\n                          v-model=\"state.editedItem.comentario\"\n                          label=\"Comentario\"\n                          variant=\"underlined\"\n                        ></v-text-field>\n                      </v-sheet>\n                    </v-col>\n                  </v-row>\n                </v-card-text>\n                <v-container fluid>\n                  <v-sheet class=\"pa-2\" elevation=\"2\">\n                    <v-card-actions>\n                      <v-spacer></v-spacer>\n                      <v-btn color=\"#009AA4\" variant=\"tonal\" @click=\"close\">\n                        Cancelar\n                      </v-btn>\n                      <v-btn color=\"#009AA4\" variant=\"tonal\" @click=\"storeItems\">\n                        Guardar\n                      </v-btn>\n                    </v-card-actions>\n                  </v-sheet>\n                </v-container>\n              </v-form>\n            </v-card>\n          </v-dialog>\n        </v-toolbar>\n      </template>\n      <template v-slot:item.state.editedItem.semaforo=\"{ item }\">\n        <v-icon :icon=\"mdi - eye - off - outline\"></v-icon>\n      </template>\n      <template v-slot:item.actions=\"{ item }\">\n        <v-tooltip text=\"Editar\" location=\"top\">\n          <template v-slot:activator=\"{ props }\">\n            <v-btn\n              v-bind=\"props\"\n              density=\"compact\"\n              class=\"mr-2 ml-2\"\n              color=\"#009AA4\"\n              variant=\"tonal\"\n              :icon=\"'mdi-account-edit'\"\n              @click=\"openFormEdit(item)\"\n            ></v-btn>\n          </template>\n        </v-tooltip>\n\n        <v-tooltip text=\"Eliminar\" location=\"top\">\n          <template v-slot:activator=\"{ props }\">\n            <v-btn\n              v-bind=\"props\"\n              density=\"compact\"\n              class=\"mr-2 ml-2\"\n              color=\"#009AA4\"\n              variant=\"tonal\"\n              :icon=\"'mdi-delete'\"\n              @click=\"remove(item)\"\n            ></v-btn>\n          </template>\n        </v-tooltip>\n      </template>\n      <template v-slot:no-data>\n        <v-btn color=\"#009AA4\" variant=\"tonal\" @click=\"handleShow\"> Iniciar </v-btn>\n      </template>\n    </v-data-table>\n  </v-container>\n</template>\n"],"names":["store","useDataStore","state","reactive","onMounted","fetchData","editedItemTitle","computed","close","closeForm","handleShow","handleShowItem","openFormCreate","openToCreate","storeItems","update","create","handleStoreItem","openFormEdit","item","openToEdit","handleEditItem","remove","handleRemoveItem"],"mappings":"uXAcE,MAAMA,EAAQC,IACRC,EAAQC,EAAS,CACrB,UAAW,CAAC,UAAW,aAAc,WAAY,aAAa,EAC9D,QAAS,CACP,CACE,MAAO,eACP,MAAO,QACP,SAAU,GACV,IAAK,kBACN,EACD,CACE,MAAO,UACP,MAAO,QACP,SAAU,GACV,IAAK,wBACN,EACD,CACE,MAAO,UACP,MAAO,QACP,SAAU,GACV,IAAK,qBACN,EACD,CACE,MAAO,oBACP,MAAO,QACP,SAAU,GACV,IAAK,mBACN,EACD,CACE,MAAO,kBACP,MAAO,QACP,SAAU,GACV,IAAK,iBACN,EACD,CACE,MAAO,kBACP,MAAO,QACP,SAAU,GACV,IAAK,iBACN,EACD,CACE,MAAO,oBACP,MAAO,QACP,SAAU,GACV,IAAK,mBACN,EACD,CACE,MAAO,WACP,MAAO,QACP,SAAU,GACV,IAAK,sBACN,EACD,CACE,MAAO,WACP,MAAO,OACP,MAAO,SACP,IAAK,SACN,CACF,EACD,WAAY,CACV,YAAa,KACb,oBAAqB,KACrB,iBAAkB,KAClB,WAAY,KACZ,WAAY,KACZ,kBAAmB,KACnB,gBAAiB,KACjB,gBAAiB,KACjB,kBAAmB,KACnB,QAAS,KACT,UAAW,UACX,SAAU,KACV,YAAa,IACd,EACD,YAAa,CACX,YAAa,KACb,oBAAqB,KACrB,iBAAkB,KAClB,WAAY,KACZ,WAAY,KACZ,kBAAmB,KACnB,gBAAiB,KACjB,gBAAiB,KACjB,kBAAmB,KACnB,QAAS,KACT,UAAW,UACX,SAAU,KACV,YAAa,IACd,EACD,YAAa,CACX,YAAa,IACd,EACD,OAAQ,GACR,WAAY,CAAE,EACd,YAAa,GACb,KAAM,CAAE,EACR,cAAe,GACf,MAAO,KACP,UAAW,mCACX,UAAW,4CACX,SAAU,4CACV,QAAS,kBACT,UAAW,oBACX,UAAW,oBACX,SAAU,YACd,CAAG,EAGDC,EAAU,SAAY,CACpBF,EAAM,KAAO,MAAMG,EAAUH,EAAM,SAAS,CAChD,CAAG,EAGD,MAAMI,EAAkBC,EAAS,IAC/BL,EAAM,cAAgB,GAAKA,EAAM,UAAYA,EAAM,QACvD,EAME,SAASM,GAAQ,CACfC,EAAUP,CAAK,CAChB,CAED,MAAMQ,EAAa,SAAY,CAC7BR,EAAM,YAAY,YAAcF,EAAM,YAAY,GAClD,MAAMW,EAAeT,CAAK,CAC9B,EAEE,SAASU,GAAiB,CACxBC,EAAaX,CAAK,CACnB,CAED,SAASY,GAAa,CACpB,OAAOZ,EAAM,YAAc,GAAKa,EAAM,EAAKC,GAC5C,CAED,MAAMA,EAAS,SAAY,CACzB,MAAMC,GAAgBf,CAAK,EAC3BO,EAAUP,CAAK,CACnB,EAEE,SAASgB,EAAaC,EAAM,CAC1BC,GAAWlB,EAAOiB,CAAI,CACvB,CAED,MAAMJ,EAAS,SAAY,CACzB,MAAMM,GAAenB,CAAK,EAC1BO,EAAUP,CAAK,CACnB,EAEQoB,EAAS,MAAOH,GAAS,CAC7B,MAAMI,GAAiBrB,EAAOiB,CAAI,CACtC"}