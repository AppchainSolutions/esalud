{"version":3,"file":"FormSchemaPage-J32ufTau.js","sources":["../../../resources/js/Pages/SubPages/FormSchemaPage.vue"],"sourcesContent":["<script setup>\nimport { onMounted, ref } from \"vue\";\nimport { useLogger } from \"vue-logger-plugin\";\nimport { useForm } from \"vee-validate\";\nimport {\n    getFormBuilderValues,\n} from \"@/helper.js\";\n\nconst props = defineProps({\n    state: Object,\n});\nconst { handleSubmit, handleReset } = useForm({\n    validationSchema: {\n        name(value) {\n            if (value?.length >= 2) return true;\n\n            return \"Name needs to be at least 2 characters.\";\n        },\n        phone(value) {\n            if (/^[0-9-]{7,}$/.test(value)) return true;\n\n            return \"Phone number needs to be at least 7 digits.\";\n        },\n        email(value) {\n            if (/^[a-z.-]+@[a-z.-]+\\.[a-z]+$/i.test(value)) return true;\n\n            return \"Must be a valid e-mail.\";\n        },\n    },\n});\n\nconst isValid = ref(false);\n\nconst logger = useLogger();\n\nlet dialog = ref(false);\n\nlet formItems = ref([]);\n\nconst item = ref({});\n\nonMounted(async() => {\n    try {\n        const id = state.formName; // Replace with the actual ID you want to retrieve\n        const data = await getFormBuilderValues(id);\n        formItems.value = Object.values(data);\n        logger.log(\"Form data:\", formItems.value);\n    } catch (error) {\n        logger.error(\"Error loading form items:\", error);\n    }\n});\n\nfunction close() {\n    dialog.value = false;\n}\n\nfunction getComponentType(type) {\n    switch (type) {\n        case \"text\":\n            return \"v-text-field\";\n        case \"number\":\n            return \"v-text-field\";\n        case \"email\":\n            return \"v-text-field\";\n        case \"password\":\n            return \"v-text-field\";\n        case \"switch\":\n            return \"v-switch\";\n        case \"select\":\n            return \"v-select\";\n        case \"date\":\n            return \"v-text-field\";\n        case \"title-h2\":\n            return \"h2\";\n        default:\n            return \"v-text-field\";\n    }\n}\n\n/**\n * Groups the form items by row and returns an array of row objects.\n *\n * If no form items are present, an empty array is returned.\n *\n * @return {Array} Array of row objects, each containing an array of form items.\n */\nfunction getRows() {\n    if (!formItems.value) return [];\n    return formItems.value.reduce((rows, item) => {\n        if (!rows[item.row]) {\n            rows[item.row] = [];\n        }\n        rows[item.row].push(item);\n        return rows;\n    }, {});\n}\n</script>\n\n<template>\n\n\n        <v-container fluid>\n            <v-card>\n                <v-card-title>\n                    <span class=\"text-h5 ma-4 pa-4\">{{ state.config.formTitle }}\n                    </span>\n                </v-card-title>\n                <v-card-text>\n                    <v-container>\n                        <form @submit.prevent=\"submit\">\n                            <v-container>\n                                <template v-for=\"(row, rowIndex) in getRows()\">\n                                    <v-row>\n                                        <v-col v-for=\"item in row\" :key=\"item.name\" :cols=\"12\" :lg=\"2\">\n                                            <component :is=\"getComponentType(item.type)\n                                                \" v-bind:name=\"item.name\" v-bind:label=\"item.label\"\n                                                v-bind:type=\"item.type\" v-bind:density=\"item.density\"\n                                                v-bind:input-type=\"item.inputType\" v-bind:variant=\"item.variant\"\n                                                v-bind:v-model=\"item.value\" v-bind:class=\"item.class\"\n                                                v-bind:chips=\"item.chips\" v-bind:multiple=\"item.multiple\"\n                                                v-bind:clearable=\"item.clearable\n                                                    \" v-bind:hide-details=\"item.hide - details\n                                                    \" v-bind:inset=\"item.inset\" v-bind:color=\"item.color || []\"\n                                                v-bind:rules=\"item.rules || []\" v-bind:items=\"item.items || []\">\n                                            </component>\n                                        </v-col>\n                                    </v-row>\n                                </template>\n                                <v-card-actions>\n                                    <v-spacer></v-spacer>\n                                    <v-btn color=\"blue-darken-1\" variant=\"tonal\" @click=\"close\">\n                                        Cancelar\n                                    </v-btn>\n\n                                    <v-btn class=\"me-4\" type=\"submit\" color=\"blue-darken-1\" variant=\"tonal\"\n                                        :disabled=\"!isValid\">\n                                        Grabar\n                                    </v-btn>\n                                </v-card-actions>\n                            </v-container>\n                        </form>\n                    </v-container>\n                </v-card-text>\n            </v-card>\n        </v-container>\n    \n</template>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAWsC,YAAQ;AAAA,MAC1C,kBAAkB;AAAA,QACd,KAAK,OAAO;AACR,eAAI,+BAAO,WAAU,EAAG,QAAO;AAE/B,iBAAO;AAAA,QACV;AAAA,QACD,MAAM,OAAO;AACT,cAAI,eAAe,KAAK,KAAK,EAAG,QAAO;AAEvC,iBAAO;AAAA,QACV;AAAA,QACD,MAAM,OAAO;AACT,cAAI,+BAA+B,KAAK,KAAK,EAAG,QAAO;AAEvD,iBAAO;AAAA,QACV;AAAA,MACJ;AAAA,IACL,CAAC;AAED,UAAM,UAAU,IAAI,KAAK;AAEzB,UAAM,SAAS,UAAW;AAE1B,QAAI,SAAS,IAAI,KAAK;AAEtB,QAAI,YAAY,IAAI,EAAE;AAET,QAAI,CAAE,CAAA;AAEnB,cAAU,YAAW;AACjB,UAAI;AACA,cAAM,KAAK,MAAM;AACjB,cAAM,OAAO,MAAM,qBAAqB,EAAE;AAC1C,kBAAU,QAAQ,OAAO,OAAO,IAAI;AACpC,eAAO,IAAI,cAAc,UAAU,KAAK;AAAA,MAC3C,SAAQ,OAAO;AACZ,eAAO,MAAM,6BAA6B,KAAK;AAAA,MACvD;AAAA,IACA,CAAC;AAED,aAAS,QAAQ;AACb,aAAO,QAAQ;AAAA,IACnB;AAEA,aAAS,iBAAiB,MAAM;AAC5B,cAAQ,MAAI;AAAA,QACR,KAAK;AACD,iBAAO;AAAA,QACX,KAAK;AACD,iBAAO;AAAA,QACX,KAAK;AACD,iBAAO;AAAA,QACX,KAAK;AACD,iBAAO;AAAA,QACX,KAAK;AACD,iBAAO;AAAA,QACX,KAAK;AACD,iBAAO;AAAA,QACX,KAAK;AACD,iBAAO;AAAA,QACX,KAAK;AACD,iBAAO;AAAA,QACX;AACI,iBAAO;AAAA,MACnB;AAAA,IACA;AASA,aAAS,UAAU;AACf,UAAI,CAAC,UAAU,MAAO,QAAO,CAAE;AAC/B,aAAO,UAAU,MAAM,OAAO,CAAC,MAAM,SAAS;AAC1C,YAAI,CAAC,KAAK,KAAK,GAAG,GAAG;AACjB,eAAK,KAAK,GAAG,IAAI,CAAE;AAAA,QAC/B;AACQ,aAAK,KAAK,GAAG,EAAE,KAAK,IAAI;AACxB,eAAO;AAAA,MACV,GAAE,EAAE;AAAA,IACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}