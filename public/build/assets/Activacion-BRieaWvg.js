import{s as S,r as A,k as i,h as o,c as f,o as m,w as s,b as a,e as C,a as l,f as d,t as b,i as O,m as Q,U as W,d as X,F as Y,g as ee,N as te}from"./app-Bd0vU_sz.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={__name:"Activacion",props:{token:{type:String,required:!0},email:{type:String,required:!0},error:{type:String,default:null}},setup(N){const w=N,n=S({token:w.token,email:w.email,password:"",password_confirmation:""}),g=A(!1),y=A(!1),c=i(()=>{const t=n.password;let e=0;const _=/[a-z]/.test(t),v=/[A-Z]/.test(t),u=/\d/.test(t),p=/[@$!%*?&]/.test(t),h=t.length>=12;return _&&e++,v&&e++,u&&e++,p&&e++,h&&e++,{strength:e,message:e<3?"Contraseña débil":e<5?"Contraseña moderada":"Contraseña fuerte"}}),U=S([{text:"Mínimo 12 caracteres",met:i(()=>n.password.length>=12)},{text:"Incluir mayúsculas y minúsculas",met:i(()=>/[A-Z]/.test(n.password)&&/[a-z]/.test(n.password))},{text:"Contener números",met:i(()=>/[0-9]/.test(n.password))},{text:"Usar caracteres especiales",met:i(()=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(n.password))}]),L=i(()=>{switch(c.value.strength){case 0:return"error";case 1:return"warning";case 2:return"warning";case 3:return"success";case 4:return"success";case 5:return"success";default:return"error"}}),k=()=>{const t=n.password;let e=0;t.length>=12&&e++;const _=/[A-Z]/.test(t),v=/[a-z]/.test(t),u=/[0-9]/.test(t),p=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(t);_&&v&&e++,u&&p&&e++,c.value=e},P=[t=>!!t||"La contraseña es requerida",t=>t.length>=12||"La contraseña debe tener al menos 12 caracteres"],q=[t=>!!t||"Confirmar contraseña es requerido",t=>t===n.password||"Las contraseñas no coinciden"],I=i(()=>n.password===n.password_confirmation&&n.password.length>=12&&c.value.strength>=3),$=()=>{console.log(n),te.post(route("paciente.activacion.completar"),n,{onSuccess:()=>{console.log("Cuenta activada exitosamente")},onError:t=>{console.error("Errores de activación:",t),t.password&&console.error(t.password),t.token&&console.error(t.token)}})};return(t,e)=>{const _=o("v-card-title"),v=o("v-card-subtitle"),u=o("v-alert"),p=o("v-icon"),h=o("v-tooltip"),V=o("v-text-field"),B=o("v-progress-linear"),F=o("v-expand-transition"),R=o("v-list-item-title"),j=o("v-list-item-content"),z=o("v-list-item"),E=o("v-list"),M=o("v-spacer"),Z=o("v-btn"),D=o("v-card-actions"),H=o("v-form"),T=o("v-card"),G=o("v-col"),J=o("v-row"),K=o("v-container");return m(),f(K,{fluid:"","fill-height":"",class:"login-container"},{default:s(()=>[a(J,{align:"center",justify:"center"},{default:s(()=>[a(G,{cols:"12",sm:"8",md:"4"},{default:s(()=>[a(T,{elevation:"12",class:"pa-6"},{default:s(()=>[a(_,{class:"text-center"},{default:s(()=>e[4]||(e[4]=[l("h2",{class:"text-h4 font-weight-bold primary--text"}," Activación de Cuenta ",-1)])),_:1}),a(v,{class:"text-center mb-4"},{default:s(()=>e[5]||(e[5]=[d(" Configura tu contraseña para acceder a tu cuenta ")])),_:1}),w.error?(m(),f(u,{key:0,type:"error",class:"mb-4",closable:""},{default:s(()=>[d(b(w.error),1)]),_:1})):C("",!0),a(H,{onSubmit:O($,["prevent"]),ref:"activacionForm"},{default:s(()=>[a(V,{modelValue:n.password,"onUpdate:modelValue":e[0]||(e[0]=r=>n.password=r),"append-icon":g.value?"mdi-eye":"mdi-eye-off",type:g.value?"text":"password","onClick:append":e[1]||(e[1]=r=>g.value=!g.value),rules:P,label:"Contraseña",required:"",onInput:k},{append:s(()=>[a(h,{bottom:""},{activator:s(({on:r,attrs:x})=>[a(p,Q(x,W(r)),{default:s(()=>e[6]||(e[6]=[d(" mdi-help-circle ")])),_:2},1040)]),default:s(()=>[e[7]||(e[7]=l("div",null,[l("strong",null,"Requisitos de Contraseña:"),l("ul",{class:"pl-4"},[l("li",null,"Mínimo 12 caracteres"),l("li",null," Incluir mayúsculas y minúsculas "),l("li",null,"Contener números"),l("li",null,"Usar caracteres especiales")]),l("p",{class:"mt-2 text-caption"}," Una contraseña fuerte protege tu información personal ")],-1))]),_:1})]),_:1},8,["modelValue","append-icon","type"]),a(V,{modelValue:n.password_confirmation,"onUpdate:modelValue":e[2]||(e[2]=r=>n.password_confirmation=r),"append-icon":y.value?"mdi-eye":"mdi-eye-off",type:y.value?"text":"password","onClick:append":e[3]||(e[3]=r=>y.value=!y.value),rules:q,label:"Confirmar Contraseña",required:"",clearable:"",onInput:k},null,8,["modelValue","append-icon","type"]),a(B,{value:c.value.strength*20,color:L.value,height:"7",class:"my-3"},null,8,["value","color"]),a(F,null,{default:s(()=>[c.value.strength<3?(m(),f(u,{key:0,type:"warning",dense:"",outlined:"",class:"mb-4"},{default:s(()=>[d(b(c.value.message),1)]),_:1})):C("",!0)]),_:1}),c.value.strength<5?(m(),f(E,{key:0,dense:"",class:"py-0"},{default:s(()=>[(m(!0),X(Y,null,ee(U,(r,x)=>(m(),f(z,{key:x,color:r.met?"success":"error",class:"px-0"},{default:s(()=>[a(j,null,{default:s(()=>[a(R,{class:"d-flex justify-space-between align-center"},{default:s(()=>[d(b(r.text)+" ",1),a(p,{color:r.met?"success":"error",class:"ml-2"},{default:s(()=>[d(b(r.met?"mdi-check-circle":"mdi-close-circle"),1)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"]))),128))]),_:1})):C("",!0),a(D,null,{default:s(()=>[a(M),a(Z,{type:"submit",color:"primary",disabled:!I.value,block:"",variant:"tonal"},{default:s(()=>e[8]||(e[8]=[d(" Activar Cuenta ")])),_:1},8,["disabled"])]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})}}},re=se(oe,[["__scopeId","data-v-1a12e9d6"],["__file","/home/omar/www/esalud/resources/js/Pages/Paciente/Activacion.vue"]]);export{re as default};
//# sourceMappingURL=Activacion-BRieaWvg.js.map
