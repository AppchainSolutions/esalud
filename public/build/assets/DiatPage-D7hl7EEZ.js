import{x as O,y as R,h as q,j as n,o as z,c as H,w as o,b as t,f as u,t as I,a as J,m as V}from"./app-DaV-B2kG.js";import{u as K}from"./store-D_Az5sCa.js";import{f as L,c as p,a as W,o as X,b as Y,d as Z,e as ee,g as te}from"./helper-VVwu32YW.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"text-h5"},oe={__name:"DiatPage",setup(ne){const g=K(),e=O({endpoints:["accidente","seguro","tipo_accidente"],headers:[{title:"Folio",align:"start",sortable:!0,key:"folio"},{title:"Tipo de accidente",align:"start",sortable:!0,key:"tipo_accidente.descripcion"},{title:"Fecha de admision",align:"start",sortable:!0,key:"fecha_admision"},{title:"Estado",align:"start",sortable:!0,key:"aprobado"},{title:"Acciones",align:"center",key:"actions"}],editedItem:{paciente_id:null,accidente:null,seguro:null,comentario:null,aprobado:null,fecha_admision:null,folio:null,idpgp:null,numero_resolucion:null,origen_denuncia:null,sucursal:null,tipo_accidente:null,validado_por:null},defaultItem:{paciente_id:null,accidente:null,seguro:null,comentario:null,aprobado:"false",fecha_admision:null,folio:null,idpgp:null,numero_resolucion:null,origen_denuncia:null,sucursal:null,tipo_accidente:null,validado_por:null},searchQuery:{paciente_id:null},dialog:!1,tableItems:[],editedIndex:-1,list:[],valid:null,formTitle:"DIAT",formCrear:"Nueva DIAT",formEdit:"Editar DIAT ",urlShow:"/diat/show",urlUpdate:"/diat/update",urlDelete:"/diat/delete",urlStore:"/diat"});R(async()=>{e.list=await L(e.endpoints)});const y=q(()=>e.editedIndex===-1?e.formCrear:e.formEdit);function A(){p(e)}const _=async()=>{e.searchQuery.paciente_id=g.getSelected.id,await W(e)};function w(){X(e)}function x(){return e.editedIndex>-1?U():k()}const k=async()=>{await Y(e),p(e)};function C(r){Z(e,r)}const U=async()=>{await ee(e),p(e)},D=async r=>{await te(e,r)};return(r,l)=>{const T=n("v-toolbar-title"),S=n("v-divider"),v=n("v-spacer"),i=n("v-btn"),E=n("v-card-title"),d=n("v-text-field"),s=n("v-select"),c=n("v-col"),P=n("v-switch"),F=n("v-row"),f=n("v-container"),h=n("v-card-text"),N=n("v-card-actions"),B=n("v-form"),j=n("v-card"),G=n("v-dialog"),Q=n("v-toolbar"),b=n("v-tooltip"),$=n("v-data-table");return z(),H(f,null,{default:o(()=>[t($,{headers:e.headers,items:e.tableItems},{top:o(()=>[t(Q,{flat:""},{default:o(()=>[t(T,null,{default:o(()=>[u(I(e.formTitle),1)]),_:1}),t(S,{class:"mx-4",inset:"",vertical:""}),t(v),t(G,{modelValue:e.dialog,"onUpdate:modelValue":l[10]||(l[10]=a=>e.dialog=a)},{activator:o(({props:a})=>[t(i,{icon:"mdi-update",class:"ma-2",color:"#009AA4",variant:"tonal",onClick:_}),t(i,{icon:"mdi-account-multiple-plus",variant:"tonal",class:"ma-2",color:"#009AA4",onClick:w})]),default:o(()=>[t(j,null,{default:o(()=>[t(B,null,{default:o(()=>[t(E,null,{default:o(()=>[J("span",ae,I(y.value),1)]),_:1}),t(h,null,{default:o(()=>[t(f,null,{default:o(()=>[t(F,null,{default:o(()=>[t(c,null,{default:o(()=>[t(d,{modelValue:e.editedItem.folio,"onUpdate:modelValue":l[0]||(l[0]=a=>e.editedItem.folio=a),label:"Folio",type:"number",variant:"underlined",clearable:""},null,8,["modelValue"]),t(d,{modelValue:e.editedItem.idpgp,"onUpdate:modelValue":l[1]||(l[1]=a=>e.editedItem.idpgp=a),label:"IDPGP",type:"number",variant:"underlined",clearable:""},null,8,["modelValue"]),t(s,{modelValue:e.editedItem.accidente,"onUpdate:modelValue":l[2]||(l[2]=a=>e.editedItem.accidente=a),items:e.list.accidente,"item-title":"descripcion","item-value":"id",label:"Accidente",variant:"underlined",clearable:""},null,8,["modelValue","items"]),t(s,{modelValue:e.editedItem.seguro,"onUpdate:modelValue":l[3]||(l[3]=a=>e.editedItem.seguro=a),items:e.list.seguro,"item-title":"descripcion","item-value":"id",label:"Adm. Seguro de Vida",variant:"underlined",clearable:""},null,8,["modelValue","items"])]),_:1}),t(c,null,{default:o(()=>[t(P,{label:"Aprobado",modelValue:e.editedItem.aprobado,"onUpdate:modelValue":l[4]||(l[4]=a=>e.editedItem.aprobado=a),"hide-details":"","true-value":"true","false-value":"false",variant:"underlined",color:"green-darken-3",value:"false",inset:!0},null,8,["modelValue"]),t(d,{modelValue:e.editedItem.fecha_admision,"onUpdate:modelValue":l[5]||(l[5]=a=>e.editedItem.fecha_admision=a),label:"fecha_admision",type:"date",variant:"underlined",class:"mt-6",clearable:""},null,8,["modelValue"]),t(d,{modelValue:e.editedItem.numero_resolucion,"onUpdate:modelValue":l[6]||(l[6]=a=>e.editedItem.numero_resolucion=a),label:"Número de resolución",type:"number",variant:"underlined",clearable:""},null,8,["modelValue"]),t(d,{modelValue:e.editedItem.origen_denuncia,"onUpdate:modelValue":l[7]||(l[7]=a=>e.editedItem.origen_denuncia=a),label:"Origen denuncia",type:"text",variant:"underlined",clearable:""},null,8,["modelValue"])]),_:1}),t(c,null,{default:o(()=>[t(s,{modelValue:e.editedItem.tipo_accidente,"onUpdate:modelValue":l[8]||(l[8]=a=>e.editedItem.tipo_accidente=a),label:"Tipo de accidente",variant:"underlined",items:e.list.tipo_accidente,"item-title":"descripcion","item-value":"id",clearable:""},null,8,["modelValue","items"]),t(d,{modelValue:e.editedItem.validado_por,"onUpdate:modelValue":l[9]||(l[9]=a=>e.editedItem.validado_por=a),label:"Validado por",type:"text",variant:"underlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(N,null,{default:o(()=>[t(v),t(i,{color:"#009AA4",variant:"tonal",onClick:A},{default:o(()=>l[11]||(l[11]=[u(" Cancelar ")])),_:1}),t(i,{color:"#009AA4",variant:"tonal",onClick:x},{default:o(()=>l[12]||(l[12]=[u(" Guardar ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":o(({item:a})=>[t(b,{text:"Editar",location:"top"},{activator:o(({props:m})=>[t(i,V(m,{density:"compact",class:"mr-2 ml-2",color:"#009AA4",variant:"tonal",icon:"mdi-account-edit",onClick:M=>C(a)}),null,16,["onClick"])]),_:2},1024),t(b,{text:"Eliminar",location:"top"},{activator:o(({props:m})=>[t(i,V(m,{density:"compact",class:"mr-2 ml-2",color:"#009AA4",variant:"tonal",icon:"mdi-delete",onClick:M=>D(a)}),null,16,["onClick"])]),_:2},1024)]),"no-data":o(()=>[t(i,{variant:"tonal",color:"#009AA4",onClick:_},{default:o(()=>l[13]||(l[13]=[u(" Iniciar ")])),_:1})]),_:1},8,["headers","items"])]),_:1})}}},se=le(oe,[["__file","/home/blueshadows/www/esalud/resources/js/Pages/SubPages/DiatPage.vue"]]);export{se as default};
//# sourceMappingURL=DiatPage-D7hl7EEZ.js.map
