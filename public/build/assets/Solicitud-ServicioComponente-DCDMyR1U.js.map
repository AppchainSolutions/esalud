{"version":3,"file":"Solicitud-ServicioComponente-DCDMyR1U.js","sources":["../../../resources/js/Pages/SubPages/Componentes/Solicitud-ServicioComponente.vue"],"sourcesContent":["<script setup>\nimport { ref } from \"vue\";\nimport AppLayout from \"@/Layouts/AppLayout.vue\";\n\n// import { useAxios } from '@vueuse/integrations/useAxios';\ndefineOptions({ layout: AppLayout });\n\nconst valid = ref(false);\nconst rut = ref(\"\");\nconst nombrePaciente = ref(\"\");\nconst especialidadSeleccionada = ref(\"\");\nconst motivoConsulta = ref(\"\");\nconst pacienteEncontrado = ref(false);\nconst especialidades = ref([\"Psicología\", \"Terapia Ocupacional\", \"Kinesiología\"]); // Ejemplo de especialidades\n\nconst rules = {\n    required: (value) => !!value || \"Este campo es requerido\",\n};\n\nconst especialidad = ref(especialidades.value[0]); // Inicializar especialidad por defecto\n\nconst buscarPaciente = async () => {\n    try {\n        const { data } = await useAxios(`/api/pacientes/${rut.value}`);\n        if (data.value) {\n            nombrePaciente.value = data.value.nombre;\n            pacienteEncontrado.value = true;\n        } else {\n            nombrePaciente.value = \"\";\n            pacienteEncontrado.value = false;\n        }\n    } catch (error) {\n        nombrePaciente.value = \"\";\n        pacienteEncontrado.value = false;\n    }\n};\n\nconst submit = async () => {\n    if (valid.value) {\n        const solicitud = {\n            rut: rut.value,\n            nombrePaciente: nombrePaciente.value,\n            especialidad: especialidadSeleccionada.value,\n            motivoConsulta: motivoConsulta.value,\n        };\n        try {\n            await useAxios.post(\"/api/solicitudes\", solicitud);\n            alert(\"Solicitud ingresada correctamente\");\n            resetForm();\n        } catch (error) {\n            alert(\"Error al ingresar la solicitud\");\n        }\n    }\n};\n\nconst resetForm = () => {\n    rut.value = \"\";\n    nombrePaciente.value = \"\";\n    especialidad.value = \"\";\n    motivoConsulta.value = \"\";\n    pacienteEncontrado.value = false;\n    valid.value = false;\n};\n\n\n</script>\n\n<template>\n    <v-card>\n        <v-card-title>Ingresar Nueva Solicitud de Servicio</v-card-title>\n        <v-card-text>\n            <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                <v-row>\n                <v-col cols=\"6\">\n                <v-text-field\n                    v-model=\"rut\"\n                    label=\"RUT solicitante\"\n                    :rules=\"[rules.required]\"\n                    @blur=\"buscarPaciente\"\n                ></v-text-field>\n\n                <v-btn\n                    prepend-icon=\"mdi-account-multiple-plus\"\n                    variant=\"tonal\"\n                    class=\"ma-2\"\n                    color=\"#009AA4\"\n                    type=\"submit\"\n                >\n                    Buscar usuario\n                </v-btn>\n                <v-btn\n                    prepend-icon=\"mdi-account-multiple-plus\"\n                    variant=\"tonal\"\n                    class=\"ma-2\"\n                    color=\"#009AA4\"\n                    type=\"submit\"\n                >\n                    Agregar nuevo usuario\n                </v-btn>\n                <v-text-field\n                    v-model=\"nombre\"\n                    label=\"Nombre solicitante\"\n                    :rules=\"[rules.required]\"\n                    @blur=\"buscarPaciente\"\n                ></v-text-field>\n\n                <v-btn\n                    prepend-icon=\"mdi-account-multiple-plus\"\n                    variant=\"tonal\"\n                    class=\"ma-2\"\n                    color=\"#009AA4\"\n                    type=\"submit\"\n                >\n                    Consultar ficha usuario\n                </v-btn>\n                <v-btn :disabled=\"!valid\" @click=\"submit\"\n                    >Ingresar Solicitud</v-btn\n                >\n            </v-col>\n            <v-col cols=\"6\">\n                <v-select\n                    v-model=\"especialidadSeleccionada\"\n                    :items=\"especialidades\"\n                    label=\"Especialidad Solicitada\"\n                    :rules=\"[rules.required]\"\n                ></v-select>\n\n                <v-textarea\n                    v-model=\"motivoConsulta\"\n                    label=\"Motivo de Consulta\"\n                    :rules=\"[rules.required]\"\n                ></v-textarea>\n\n                \n                <v-text-field\n                    v-model=\"nombre\"\n                    label=\"Numero de Solicitud Asignada\"\n                    :rules=\"[rules.required]\"\n                    @blur=\"buscarPaciente\"\n                ></v-text-field>\n            </v-col>\n        </v-row>\n            </v-form>\n        </v-card-text>\n    </v-card>\n</template>\n\n<style scoped>\n/* Estilos personalizados si es necesario */\n</style>\n"],"names":["valid","ref","rut","nombrePaciente","especialidadSeleccionada","motivoConsulta","pacienteEncontrado","especialidades","rules","value","especialidad","buscarPaciente","data","submit","solicitud","resetForm"],"mappings":"yQAOA,MAAMA,EAAQC,EAAI,EAAK,EACjBC,EAAMD,EAAI,EAAE,EACZE,EAAiBF,EAAI,EAAE,EACvBG,EAA2BH,EAAI,EAAE,EACjCI,EAAiBJ,EAAI,EAAE,EACvBK,EAAqBL,EAAI,EAAK,EAC9BM,EAAiBN,EAAI,CAAC,aAAc,sBAAuB,cAAc,CAAC,EAE1EO,EAAQ,CACV,SAAWC,GAAU,CAAC,CAACA,GAAS,yBACpC,EAEMC,EAAeT,EAAIM,EAAe,MAAM,CAAC,CAAC,EAE1CI,EAAiB,SAAY,CAC/B,GAAI,CACA,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAM,SAAS,kBAAkBV,EAAI,KAAK,EAAE,EACzDU,EAAK,OACLT,EAAe,MAAQS,EAAK,MAAM,OAClCN,EAAmB,MAAQ,KAE3BH,EAAe,MAAQ,GACvBG,EAAmB,MAAQ,GAElC,MAAe,CACZH,EAAe,MAAQ,GACvBG,EAAmB,MAAQ,EAC/B,CACJ,EAEMO,EAAS,SAAY,CACvB,GAAIb,EAAM,MAAO,CACb,MAAMc,EAAY,CACd,IAAKZ,EAAI,MACT,eAAgBC,EAAe,MAC/B,aAAcC,EAAyB,MACvC,eAAgBC,EAAe,KAC3C,EACQ,GAAI,CACA,MAAM,SAAS,KAAK,mBAAoBS,CAAS,EACjD,MAAM,mCAAmC,EACzCC,GACH,MAAe,CACZ,MAAM,gCAAgC,CAC1C,CACJ,CACJ,EAEMA,EAAY,IAAM,CACpBb,EAAI,MAAQ,GACZC,EAAe,MAAQ,GACvBO,EAAa,MAAQ,GACrBL,EAAe,MAAQ,GACvBC,EAAmB,MAAQ,GAC3BN,EAAM,MAAQ,EAClB"}