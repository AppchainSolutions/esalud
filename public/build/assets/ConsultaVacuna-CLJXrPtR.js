import{z as B,A as j,j as o,o as E,c as N,w as l,b as e,f as b,t as R,n as D,m as $,a as z}from"./app-DryNi66c.js";import{A as F}from"./AppLayout-CIigT8YY.js";import{f as L,h as M}from"./helper-DNKIETzf.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DIp7Rf8v.js";import"./store-FNdQqqlz.js";const K=z("span",{class:"text-h5"}," Consulta de Vacunas ",-1),O=Object.assign({layout:F},{__name:"ConsultaVacuna",setup(q){const a=B({endpoints:["area","ceco","empresa","planta","unidad"],headers:[{title:"RUT",align:"center",sortable:!0,key:"rut"},{title:"Nombre",align:"center",sortable:!0,key:"nombre"},{title:"Apellidos",sortable:!0,align:"center",key:"apellidos"},{title:"Empresa",sortable:!0,align:"center",key:"empresa.descripcion"},{title:"Tipo de Vacuna",sortable:!0,align:"center",key:"tipo_vacuna"},{title:"Vacuna",sortable:!0,align:"center",key:"vacuna"},{title:"Fecha vacuna",sortable:!0,align:"center",key:"fecha_vacuna"},{title:"Acciones",align:"center",key:"actions"}],searchQuery:{activo:"true",area:null,ceco:null,empresa:null,planta:null,rut:null,unidad:null},itemsView:{tipo_vacuna:"",vacuna:"",fecha_vacuna:""},rutRules:[u=>{if(!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(u))return!1;let c=u.split("-"),i=c[0],f=c[1].toLowerCase(),m=0,r=1;for(;i;i=Math.floor(i/10))r=(r+i%10*(9-m++%6))%11;let s=r?r-1:"k";return f===s?!0:"El rut es incorrecto"}],dialog:!1,tableItems:[],formItems:[],editedIndex:-1,loadingSearch:!1,list:[],valid:null,formTitle:"Consulta Vacuna",urlSearch:"/consulta/vacuna/search"});j(async()=>{a.list=await L(a.endpoints)});function h(u){a.itemsView={...u},a.dialog=!0}function x(){a.dialog=!1}const k=async()=>{var u=await M(a);console.log(u)};return(u,t)=>{const c=o("v-toolbar-title"),i=o("v-spacer"),f=o("v-toolbar"),m=o("v-card-title"),r=o("v-text-field"),s=o("v-select"),d=o("v-col"),A=o("v-switch"),y=o("v-row"),V=o("v-card-text"),p=o("v-btn"),C=o("download-excel"),g=o("v-card-actions"),v=o("v-container"),Q=o("v-tooltip"),U=o("v-data-table"),_=o("v-sheet"),w=o("v-card"),I=o("v-form"),S=o("v-dialog");return E(),N(v,{fluid:""},{default:l(()=>[e(w,null,{default:l(()=>[e(m,null,{default:l(()=>[e(f,{flat:""},{default:l(()=>[e(c,null,{default:l(()=>[b(R(a.formTitle),1)]),_:1}),e(i)]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(_,{color:"white",elevation:4,class:D("rounded-lg ma-2 pa-2")},{default:l(()=>[e(v,{fluid:""},{default:l(()=>[e(V,null,{default:l(()=>[e(y,null,{default:l(()=>[e(d,null,{default:l(()=>[e(r,{clearable:"",label:"Rut",variant:"underlined",rules:a.rutRules,modelValue:a.searchQuery.rut,"onUpdate:modelValue":t[0]||(t[0]=n=>a.searchQuery.rut=n)},null,8,["rules","modelValue"]),e(s,{clearable:"",label:"Empresa",variant:"underlined",modelValue:a.searchQuery.empresa,"onUpdate:modelValue":t[1]||(t[1]=n=>a.searchQuery.empresa=n),items:a.list.empresa,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),e(s,{clearable:"",label:"Unidad",variant:"underlined",modelValue:a.searchQuery.unidad,"onUpdate:modelValue":t[2]||(t[2]=n=>a.searchQuery.unidad=n),items:a.list.unidad,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),e(s,{clearable:"",label:"Area",modelValue:a.searchQuery.area,"onUpdate:modelValue":t[3]||(t[3]=n=>a.searchQuery.area=n),variant:"underlined",items:a.list.area,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),e(s,{clearable:"",label:"Area (cecos)",modelValue:a.searchQuery.ceco,"onUpdate:modelValue":t[4]||(t[4]=n=>a.searchQuery.ceco=n),variant:"underlined",items:a.list.ceco,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"])]),_:1}),e(d,null,{default:l(()=>[e(r,{clearable:"",label:"Vacuna",variant:"underlined",type:"text",modelValue:a.searchQuery.vacuna,"onUpdate:modelValue":t[5]||(t[5]=n=>a.searchQuery.vacuna=n)},null,8,["modelValue"]),e(A,{modelValue:a.searchQuery.activo,"onUpdate:modelValue":t[6]||(t[6]=n=>a.searchQuery.activo=n),"hide-details":"","true-value":"true","false-value":"false",class:"ml-4 mb-4",variant:"underlined",color:"green-darken-3",inset:"",label:"Activo"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:l(()=>[e(p,{"prepend-icon":"mdi-file-search",variant:"tonal",loading:a.loadingSearch,color:"#009AA4",onClick:k},{default:l(()=>[b(" Buscar ")]),_:1},8,["loading"]),e(p,{"prepend-icon":"mdi-microsoft-excel",variant:"tonal",color:"#009AA4"},{default:l(()=>[e(C,{data:a.tableItems,name:"consulta_vacunas.xls"},{default:l(()=>[b(" Bajar archivo ")]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),e(v,{fluid:""},{default:l(()=>[e(U,{headers:a.headers,items:a.tableItems,"sort-by":[{key:"apellidos",order:"asc"}]},{"item.actions":l(({item:n})=>[e(Q,{text:"Ver detalles",location:"top"},{activator:l(({props:T})=>[e(p,$(T,{density:"compact",color:"#009AA4",class:"mr-2 ml-2",variant:"tonal",icon:"mdi-eye",onClick:G=>h(n)}),null,16,["onClick"])]),_:2},1024)]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),e(v,null,{default:l(()=>[e(S,{modelValue:a.dialog,"onUpdate:modelValue":t[12]||(t[12]=n=>a.dialog=n)},{default:l(()=>[e(_,{elevation:"4",class:"ma-4 pa-4"},{default:l(()=>[e(w,null,{default:l(()=>[e(I,{readonly:""},{default:l(()=>[e(_,{elevation:"2",class:"ma-2 pa-2"},{default:l(()=>[e(m,null,{default:l(()=>[K]),_:1})]),_:1}),e(V,null,{default:l(()=>[e(y,null,{default:l(()=>[e(d,null,{default:l(()=>[e(r,{modelValue:a.itemsView.fecha_vacuna,"onUpdate:modelValue":t[7]||(t[7]=n=>a.itemsView.fecha_vacuna=n),label:"Fecha Vacuna",type:"date",variant:"underlined",readonly:""},null,8,["modelValue"]),e(r,{modelValue:a.itemsView.tipo_vacuna,"onUpdate:modelValue":t[8]||(t[8]=n=>a.itemsView.tipo_vacuna=n),type:"text",label:"Tipo de vacuna",variant:"underlined",readonly:""},null,8,["modelValue"])]),_:1}),e(d,null,{default:l(()=>[e(r,{modelValue:a.itemsView.vacuna,"onUpdate:modelValue":t[9]||(t[9]=n=>a.itemsView.vacuna=n),readonly:"",type:"text",label:"Vacuna",variant:"underlined"},null,8,["modelValue"]),e(r,{modelValue:a.itemsView.comentario,"onUpdate:modelValue":t[10]||(t[10]=n=>a.itemsView.comentario=n),readonly:"",type:"text",label:"Comentario",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{elevation:"2",class:"ma-2 pa-2"},{default:l(()=>[e(g,null,{default:l(()=>[e(p,{class:"mr-2 ml-2",color:"#009AA4",text:"Cerrar",variant:"tonal",onClick:t[11]||(t[11]=n=>x())})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),ee=P(O,[["__file","/home/blueshadows/www/vulco/resources/js/Pages/Consultas/ConsultaVacuna.vue"]]);export{ee as default};
//# sourceMappingURL=ConsultaVacuna-CLJXrPtR.js.map
