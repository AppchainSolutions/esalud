{"version":3,"file":"ExamenAsma-B7dIXrTC.js","sources":["../../../resources/js/Pages/Examenes/ExamenAsma.vue"],"sourcesContent":["<script setup>\nimport { reactive, computed, onMounted } from \"vue\";\nimport { useDataStore } from \"@/store.js\";\nimport {\n    closeForm,\n    fetchData,\n    handleRemoveItem,\n    handleShowItem,\n    handleStoreItem,\n    openToCreate,\n    openToEdit,\n} from \"@/helper.js\";\nconst store = useDataStore();\nconst state = reactive({\n    endpoints: [\"estado_examen\"],\n\n    headers: [\n        {\n            title: \"IDPGP\",\n            align: \"start\",\n            sortable: true,\n            key: \"idpgp\",\n        },\n        {\n            title: \"Estado\",\n            align: \"start\",\n            sortable: true,\n            key: \"estado_examen.descripcion\",\n        },\n        {\n            title: \"Fecha Ingreso\",\n            align: \"start\",\n            sortable: true,\n            key: \"fecha_ingreso\",\n        },\n        {\n            title: \"Fecha Control\",\n            align: \"start\",\n            sortable: true,\n            key: \"fecha_control\",\n        },\n        {\n            title: \"Fecha Próx. Control\",\n            align: \"start\",\n            sortable: true,\n            key: \"fecha_prox_control\",\n        },\n        {\n            title: \"Fecha Últ. Control\",\n            align: \"start\",\n            sortable: true,\n            key: \"fecha_ult_control\",\n        },\n        { title: \"Acciones\", align: \"center\", key: \"actions\" },\n    ],\n\n    editedItem: {\n        paciente_id: null,\n        estado_examen:null, \n        idpgp: null,\n        fecha_ingreso: null,\n        fecha_control: null,\n        fecha_prox_control: null,\n        fecha_ult_control: null,\n        comentario: null,\n    },\n    defaultItem: {\n        paciente_id: null,\n        estado_examen: null,\n        idpgp: null,\n        fecha_ingreso: null,\n        fecha_control: null,\n        fecha_prox_control: null,\n        fecha_ult_control: null,\n        comentario: null,\n    },\n    searchQuery: {\n        paciente_id: null,\n    },\n    dialog: false,\n    tableItems: [],\n    editedIndex: -1,\n    list: [],\n    loading: false,\n    valid: null,\n    formTitle: \"Asma\",\n    formCrear: \"Nuevo\",\n    formEdit: \"Editar\",\n    urlShow: \"/examen/asma/show\",\n    urlUpdate: \"/examen/asma/update\",\n    urlDelete: \"/examen/asma/delete\",\n    urlStore: \"/examen/asma\",\n});\n//**********\\\\\\\\  LIFE CYCLE HOOKS ////*************/\nonMounted(async () => {\n    state.list = await fetchData(state.endpoints);\n});\n//**********\\\\\\\\  COMPUTE PROPERTIES ////*************/\nconst editedItemTitle = computed(() =>\n    state.editedIndex === -1 ? state.formCrear : state.formEdit,\n);\n\nfunction close() {\n    closeForm(state);\n}\n//**********\\\\\\\\  CRUD ////*************/\nconst showItem = async () => {\n    state.searchQuery.paciente_id = store.getSelected.id;\n    await handleShowItem(state);\n};\n\nfunction openFormCreate() {\n    openToCreate(state);\n}\n\nfunction storeItems(item) {\n    return state.editedIndex > -1 ? update() : create();\n}\n\nconst create = async () => {\n    await handleStoreItem(state, \"create\");\n    closeForm(state);\n};\n\nconst update = async () => {\n    await handleStoreItem(state, \"edit\");\n    closeForm(state);\n};\n\nfunction openFormEdit(item) {\n    openToEdit(state, item);\n}\n\nconst remove = async (item) => {\n    await handleRemoveItem(state, item);\n};\n</script>\n\n<template>\n    <v-container>\n        <v-data-table :headers=\"state.headers\" :items=\"state.tableItems\">\n            <template v-slot:top>\n                <v-toolbar flat>\n                    <v-toolbar-title>{{ state.formTitle }}</v-toolbar-title>\n                    <v-divider class=\"mx-4\" inset vertical></v-divider>\n                    <v-spacer></v-spacer>\n                    <v-dialog v-model=\"state.dialog\">\n                        <template v-slot:activator=\"{ props }\">\n                            <v-btn\n                                icon=\"mdi-update\"\n                                variant=\"tonal\"\n                                class=\"ma-2\"\n                                color=\"#009AA4\"\n                                @click=\"showItem\"\n                            >\n                            </v-btn>\n                            <v-btn\n                                icon=\"mdi-account-multiple-plus\"\n                                variant=\"tonal\"\n                                class=\"ma-2\"\n                                color=\"#009AA4\"\n                                @click=\"openFormCreate\"\n                            >\n                            </v-btn>\n                        </template>\n\n                        <v-card>\n                            <v-form>\n                                <v-card-title>\n                                    <span class=\"text-h5\"\n                                        >{{ editedItemTitle }}\n                                    </span>\n                                </v-card-title>\n\n                                <v-card-text>\n                                    <v-container>\n                                        <v-row>\n                                            <v-col>\n                                                <v-text-field\n                                                    v-model=\"\n                                                        state.editedItem.idpgp\n                                                    \"\n                                                    label=\"IDPGP\"\n                                                    type=\"number\"\n                                                    variant=\"underlined\"\n                                                ></v-text-field>\n\n                                                <v-select\n                                                    :items=\"\n                                                        state.list.estado_examen\n                                                    \"\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .estado_examen                                      \"\n                                                    item-title=\"descripcion\"\n                                                    item-value=\"id\"\n                                                    label=\"Estado\"\n                                                    variant=\"underlined\"\n                                                    clearable\n                                                ></v-select>\n\n                                                <v-text-field\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .fecha_ingreso\n                                                    \"\n                                                    label=\"Ingreso\"\n                                                    type=\"date\"\n                                                    variant=\"underlined\"\n                                                ></v-text-field>\n\n                                                <v-text-field\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .fecha_control\n                                                    \"\n                                                    label=\"Fecha control\"\n                                                    type=\"date\"\n                                                    variant=\"underlined\"\n                                                ></v-text-field>\n                                            </v-col>\n\n                                            <v-col>\n                                                <v-text-field\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .fecha_prox_control\n                                                    \"\n                                                    label=\"Fecha prox. control\"\n                                                    type=\"date\"\n                                                    variant=\"underlined\"\n                                                ></v-text-field>\n\n                                                <v-text-field\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .fecha_ult_control\n                                                    \"\n                                                    label=\"Fecha ult. control\"\n                                                    type=\"date\"\n                                                    variant=\"underlined\"\n                                                ></v-text-field>\n                                                <v-text-field\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .comentario\n                                                    \"\n                                                    label=\"Comentario\"\n                                                    type=\"text\"\n                                                    variant=\"underlined\"\n                                                ></v-text-field>\n                                            </v-col>\n                                        </v-row>\n                                    </v-container>\n                                </v-card-text>\n\n                                <v-card-actions>\n                                    <v-spacer></v-spacer>\n                                    <v-btn\n                                        color=\"blue-darken-1\"\n                                        variant=\"tonal\"\n                                        @click=\"close\"\n                                    >\n                                        Cancelar\n                                    </v-btn>\n                                    <v-btn\n                                        color=\"blue-darken-1\"\n                                        variant=\"tonal\"\n                                        @click=\"storeItems(item)\"\n                                    >\n                                        Guardar\n                                    </v-btn>\n                                </v-card-actions>\n                            </v-form>\n                        </v-card>\n                    </v-dialog>\n                </v-toolbar>\n            </template>\n\n            <template v-slot:item.actions=\"{ item }\">\n                <v-tooltip text=\"Editar\" location=\"top\">\n                    <template v-slot:activator=\"{ props }\">\n                        <v-btn\n                            v-bind=\"props\"\n                            density=\"compact\"\n                            class=\"mr-2 ml-2\"\n                            color=\"#009AA4\"\n                            variant=\"tonal\"\n                            :icon=\"'mdi-account-edit'\"\n                            @click=\"openFormEdit(item)\"\n                        ></v-btn>\n                    </template>\n                </v-tooltip>\n\n                <v-tooltip text=\"Eliminar\" location=\"top\">\n                    <template v-slot:activator=\"{ props }\">\n                        <v-btn\n                            v-bind=\"props\"\n                            density=\"compact\"\n                            class=\"mr-2 ml-2\"\n                            variant=\"tonal\"\n                            color=\"#009AA4\"\n                            :icon=\"'mdi-delete'\"\n                            @click=\"remove(item)\"\n                        ></v-btn>\n                    </template>\n                </v-tooltip>\n            </template>\n            <template v-slot:no-data>\n                <v-btn color=\"#009AA4\" variant=\"tonal\" @click=\"showItem\">\n                    Iniciar\n                </v-btn>\n            </template>\n        </v-data-table>\n    </v-container>\n</template>\n"],"names":["store","useDataStore","state","reactive","onMounted","fetchData","editedItemTitle","computed","close","closeForm","showItem","handleShowItem","openFormCreate","openToCreate","storeItems","item","update","create","handleStoreItem","openFormEdit","openToEdit","remove","handleRemoveItem"],"mappings":"wWAYA,MAAMA,EAAQC,EAAc,EACtBC,EAAQC,EAAS,CACnB,UAAW,CAAC,eAAe,EAE3B,QAAS,CACL,CACI,MAAO,QACP,MAAO,QACP,SAAU,GACV,IAAK,OACR,EACD,CACI,MAAO,SACP,MAAO,QACP,SAAU,GACV,IAAK,2BACR,EACD,CACI,MAAO,gBACP,MAAO,QACP,SAAU,GACV,IAAK,eACR,EACD,CACI,MAAO,gBACP,MAAO,QACP,SAAU,GACV,IAAK,eACR,EACD,CACI,MAAO,sBACP,MAAO,QACP,SAAU,GACV,IAAK,oBACR,EACD,CACI,MAAO,qBACP,MAAO,QACP,SAAU,GACV,IAAK,mBACR,EACD,CAAE,MAAO,WAAY,MAAO,SAAU,IAAK,SAAW,CACzD,EAED,WAAY,CACR,YAAa,KACb,cAAc,KACd,MAAO,KACP,cAAe,KACf,cAAe,KACf,mBAAoB,KACpB,kBAAmB,KACnB,WAAY,IACf,EACD,YAAa,CACT,YAAa,KACb,cAAe,KACf,MAAO,KACP,cAAe,KACf,cAAe,KACf,mBAAoB,KACpB,kBAAmB,KACnB,WAAY,IACf,EACD,YAAa,CACT,YAAa,IAChB,EACD,OAAQ,GACR,WAAY,CAAE,EACd,YAAa,GACb,KAAM,CAAE,EACR,QAAS,GACT,MAAO,KACP,UAAW,OACX,UAAW,QACX,SAAU,SACV,QAAS,oBACT,UAAW,sBACX,UAAW,sBACX,SAAU,cACd,CAAC,EAEDC,EAAU,SAAY,CAClBF,EAAM,KAAO,MAAMG,EAAUH,EAAM,SAAS,CAChD,CAAC,EAED,MAAMI,EAAkBC,EAAS,IAC7BL,EAAM,cAAgB,GAAKA,EAAM,UAAYA,EAAM,QACvD,EAEA,SAASM,GAAQ,CACbC,EAAUP,CAAK,CACnB,CAEA,MAAMQ,EAAW,SAAY,CACzBR,EAAM,YAAY,YAAcF,EAAM,YAAY,GAClD,MAAMW,EAAeT,CAAK,CAC9B,EAEA,SAASU,GAAiB,CACtBC,EAAaX,CAAK,CACtB,CAEA,SAASY,EAAWC,EAAM,CACtB,OAAOb,EAAM,YAAc,GAAKc,EAAM,EAAKC,EAAQ,CACvD,CAEA,MAAMA,EAAS,SAAY,CACvB,MAAMC,EAAgBhB,EAAO,QAAQ,EACrCO,EAAUP,CAAK,CACnB,EAEMc,EAAS,SAAY,CACvB,MAAME,EAAgBhB,EAAO,MAAM,EACnCO,EAAUP,CAAK,CACnB,EAEA,SAASiB,EAAaJ,EAAM,CACxBK,EAAWlB,EAAOa,CAAI,CAC1B,CAEA,MAAMM,EAAS,MAAON,GAAS,CAC3B,MAAMO,EAAiBpB,EAAOa,CAAI,CACtC"}