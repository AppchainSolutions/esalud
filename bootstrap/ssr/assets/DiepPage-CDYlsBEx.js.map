{"version":3,"file":"DiepPage-CDYlsBEx.js","sources":["../../../resources/js/Pages/SubPages/DiepPage.vue"],"sourcesContent":["<script setup>\nimport { reactive, computed, onMounted } from \"vue\";\nimport { useDataStore } from \"@/store.js\";\nimport {\n    closeForm,\n    fetchData,\n    handleEditItem,\n    handleRemoveItem,\n    handleShowItem,\n    handleStoreItem,\n    openToCreate,\n    openToEdit,\n} from \"@/helper.js\";\n\nconst store = useDataStore();\nconst state = reactive({\n    endpoints: [\"cie10\", \"seguro\", \"tipo_enfermedad\"],\n\n    headers: [\n        {\n            title: \"Folio\",\n            align: \"start\",\n            sortable: true,\n            key: \"folio\",\n        },\n        {\n            title: \"Tipo de enfermedad\",\n            align: \"start\",\n            sortable: true,\n            key: \"tipo_enfermedad.descripcion\",\n        },\n        {\n            title: \"Fecha de admision\",\n            align: \"start\",\n            sortable: true,\n            key: \"fecha_admision\",\n        },\n        {\n            title: \"Estado\",\n            align: \"start\",\n            sortable: true,\n            key: \"estado_diep\",\n        },\n\n        { title: \"Acciones\", align: \"center\", key: \"actions\" },\n    ],\n\n    editedItem: {\n        comentario: null,\n        enfermedad: null,\n        estado_diep: \"No Aprobado\",\n        fecha_admision: null,\n        folio: null,\n        idpgp: null,\n        numero_resolucion: null,\n        origen_denuncia: null,\n        paciente_id: null,\n        seguro: null,\n        sucursal: null,\n        tipo_enfermedad: null,\n        validado_por: null,\n    },\n\n    defaultItem: {\n        comentario: null,\n        enfermedad: null,\n        estado_diep: \"No Aprobado\",\n        fecha_admision: null,\n        folio: null,\n        idpgp: null,\n        numero_resolucion: null,\n        origen_denuncia: null,\n        paciente_id: null,\n        seguro: null,\n        sucursal: null,\n        tipo_enfermedad: null,\n        validado_por: null,\n    },\n    searchQuery: {\n        paciente_id: null,\n    },\n    dialog: false,\n    tableItems: [],\n    editedIndex: -1,\n    list: [],\n    loading: false,\n    valid: null,\n    formTitle: \"DIEP\",\n    formCrear: \"Nueva DIEP\",\n    formEdit: \"Editar DIEP\",\n    urlShow: \"/diep/show\",\n    urlUpdate: \"/diep/update\",\n    urlDelete: \"/diep/delete\",\n    urlStore: \"/diep\",\n});\n\n//**********\\\\\\\\  LIFE CYCLE HOOKS ////*************/\nonMounted(async () => {\n    state.list = await fetchData(state.endpoints);\n});\n\n//**********\\\\\\\\  COMPUTE PROPERTIES ////*************/\nconst editedItemTitle = computed(() =>\n    state.editedIndex === -1 ? state.formCrear : state.formEdit\n);\n\nfunction close() {\n    closeForm(state);\n}\n//**********\\\\\\\\  CRUD ////*************/\nconst handleShow = async () => {\n    state.searchQuery.paciente_id = store.getSelected.id;\n    await handleShowItem(state);\n};\n\nfunction openFormCreate() {\n    openToCreate(state);\n}\n\nfunction storeItems() {\n    return state.editedIndex > -1 ? update() : create();\n}\n\nconst create = async () => {\n    await handleStoreItem(state);\n    closeForm(state);\n};\n\nfunction openFormEdit(item) {\n    openToEdit(state, item);\n}\n\nconst update = async () => {\n    await handleEditItem(state);\n    closeForm(state);\n};\n\nconst remove = async (item) => {\n    await handleRemoveItem(state, item);\n};\n</script>\n\n<template>\n    <v-container>\n        <v-data-table :headers=\"state.headers\" :items=\"state.tableItems\">\n            <template v-slot:top>\n                <v-toolbar flat>\n                    <v-toolbar-title>{{ state.formTitle }}</v-toolbar-title>\n                    <v-divider class=\"mx-4\" inset vertical></v-divider>\n                    <v-spacer></v-spacer>\n                    <v-dialog v-model=\"state.dialog\">\n                        <template v-slot:activator=\"{ props }\">\n                            <v-btn\n                                icon=\"mdi-update\"\n                                color=\"#009AA4\"\n                                variant=\"tonal\"\n                                class=\"ma-2\"\n                                @click=\"handleShow\"\n                            >\n                            </v-btn>\n                            <v-btn\n                                icon=\"mdi-account-multiple-plus\"\n                                class=\"ma-2\"\n                                color=\"#009AA4\"\n                                variant=\"tonal\"\n                                @click=\"openFormCreate\"\n                            >\n                            </v-btn>\n                        </template>\n\n                        <v-card>\n                            <v-form>\n                                <v-card-title>\n                                    <span class=\"text-h5\"\n                                        >{{ editedItemTitle }}\n                                    </span>\n                                </v-card-title>\n\n                                <v-card-text>\n                                    <v-container>\n                                        <v-row>\n                                            <v-col>\n                                                <v-text-field\n                                                    v-model=\"\n                                                        state.editedItem.folio\n                                                    \"\n                                                    label=\"Folio\"\n                                                    type=\"number\"\n                                                    variant=\"underlined\"\n                                                    clearable\n                                                ></v-text-field>\n                                                <v-text-field\n                                                    v-model=\"\n                                                        state.editedItem.idpgp\n                                                    \"\n                                                    label=\"IDPGP\"\n                                                    type=\"number\"\n                                                    variant=\"underlined\"\n                                                    clearable\n                                                ></v-text-field>\n\n                                                <v-combobox\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .enfermedad\n                                                    \"\n                                                    :items=\"state.list.cie10\"\n                                                    item-title=\"descripcion\"\n                                                    item-value=\"id\"\n                                                    label=\"Enfermedad\"\n                                                    variant=\"underlined\"\n                                                    clearable\n                                                    single\n                                                ></v-combobox>\n\n                                                <v-select\n                                                    v-model=\"\n                                                        state.editedItem.seguro\n                                                    \"\n                                                    :items=\"state.list.seguro\"\n                                                    item-title=\"descripcion\"\n                                                    item-value=\"id\"\n                                                    label=\"Adm. Seguro de Vida\"\n                                                    variant=\"underlined\"\n                                                    clearable\n                                                ></v-select>\n                                            </v-col>\n                                            <v-col>\n                                                <v-switch\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .estado_diep\n                                                    \"\n                                                    hide-details\n                                                    true-value=\"Aprobado\"\n                                                    false-value=\"No Aprobado\"\n                                                    variant=\"underlined\"\n                                                    color=\"green-darken-3\"\n                                                    value=\"No Aprobado\"\n                                                    :inset=\"true\"\n                                                    :label=\"`Estatus Diep ${state.editedItem.estado_diep}`\"\n                                                ></v-switch>\n\n                                                <v-text-field\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .fecha_admision\n                                                    \"\n                                                    label=\"fecha_admision\"\n                                                    type=\"date\"\n                                                    variant=\"underlined\"\n                                                    class=\"mt-6\"\n                                                    clearable\n                                                ></v-text-field>\n\n                                                <v-text-field\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .numero_resolucion\n                                                    \"\n                                                    label=\"Número de resolución\"\n                                                    type=\"number\"\n                                                    variant=\"underlined\"\n                                                    clearable\n                                                ></v-text-field>\n\n                                                <v-text-field\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .origen_denuncia\n                                                    \"\n                                                    label=\"Origen denuncia\"\n                                                    type=\"text\"\n                                                    variant=\"underlined\"\n                                                    clearable\n                                                ></v-text-field>\n                                            </v-col>\n\n                                            <v-col>\n                                                <v-select\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .tipo_enfermedad\n                                                    \"\n                                                    label=\"Tipo de enfermedad\"\n                                                    variant=\"underlined\"\n                                                    :items=\"\n                                                        state.list\n                                                            .tipo_enfermedad\n                                                    \"\n                                                    item-title=\"descripcion\"\n                                                    item-value=\"id\"\n                                                    clearable\n                                                ></v-select>\n\n                                                <v-text-field\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .validado_por\n                                                    \"\n                                                    label=\"Validado por\"\n                                                    type=\"text\"\n                                                    variant=\"underlined\"\n                                                    clearable\n                                                ></v-text-field>\n                                            </v-col>\n                                        </v-row>\n                                    </v-container>\n                                </v-card-text>\n\n                                <v-card-actions>\n                                    <v-spacer></v-spacer>\n                                    <v-btn\n                                        color=\"#009AA4\"\n                                        variant=\"tonal\"\n                                        @click=\"close\"\n                                    >\n                                        Cancelar\n                                    </v-btn>\n                                    <v-btn\n                                        color=\"#009AA4\"\n                                        variant=\"tonal\"\n                                        @click=\"storeItems\"\n                                    >\n                                        Guardar\n                                    </v-btn>\n                                </v-card-actions>\n                            </v-form>\n                        </v-card>\n                    </v-dialog>\n                </v-toolbar>\n            </template>\n\n            <template v-slot:item.actions=\"{ item }\">\n                <v-tooltip text=\"Editar\" location=\"top\">\n                    <template v-slot:activator=\"{ props }\">\n                        <v-btn\n                            v-bind=\"props\"\n                            density=\"compact\"\n                            class=\"mr-2 ml-2\"\n                            color=\"#009AA4\"\n                            :icon=\"'mdi-account-edit'\"\n                            @click=\"openFormEdit(item)\"\n                        ></v-btn>\n                    </template>\n                </v-tooltip>\n\n                <v-tooltip text=\"Eliminar\" location=\"top\">\n                    <template v-slot:activator=\"{ props }\">\n                        <v-btn\n                            v-bind=\"props\"\n                            density=\"compact\"\n                            class=\"mr-2 ml-2\"\n                            color=\"#009AA4\"\n                            :icon=\"'mdi-delete'\"\n                            @click=\"remove(item)\"\n                        ></v-btn>\n                    </template>\n                </v-tooltip>\n            </template>\n            <template v-slot:no-data>\n                <v-btn color=\"#009AA4\" variant=\"tonal\" @click=\"handleShow\">\n                    Iniciar\n                </v-btn>\n            </template>\n        </v-data-table>\n    </v-container>\n</template>\n"],"names":[],"mappings":";;;;;;;;;;;;;AAcA,UAAM,QAAQ,aAAY;AAC1B,UAAM,QAAQ,SAAS;AAAA,MACnB,WAAW,CAAC,SAAS,UAAU,iBAAiB;AAAA,MAEhD,SAAS;AAAA,QACL;AAAA,UACI,OAAO;AAAA,UACP,OAAO;AAAA,UACP,UAAU;AAAA,UACV,KAAK;AAAA,QACR;AAAA,QACD;AAAA,UACI,OAAO;AAAA,UACP,OAAO;AAAA,UACP,UAAU;AAAA,UACV,KAAK;AAAA,QACR;AAAA,QACD;AAAA,UACI,OAAO;AAAA,UACP,OAAO;AAAA,UACP,UAAU;AAAA,UACV,KAAK;AAAA,QACR;AAAA,QACD;AAAA,UACI,OAAO;AAAA,UACP,OAAO;AAAA,UACP,UAAU;AAAA,UACV,KAAK;AAAA,QACR;AAAA,QAED,EAAE,OAAO,YAAY,OAAO,UAAU,KAAK,UAAW;AAAA,MACzD;AAAA,MAED,YAAY;AAAA,QACR,YAAY;AAAA,QACZ,YAAY;AAAA,QACZ,aAAa;AAAA,QACb,gBAAgB;AAAA,QAChB,OAAO;AAAA,QACP,OAAO;AAAA,QACP,mBAAmB;AAAA,QACnB,iBAAiB;AAAA,QACjB,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,iBAAiB;AAAA,QACjB,cAAc;AAAA,MACjB;AAAA,MAED,aAAa;AAAA,QACT,YAAY;AAAA,QACZ,YAAY;AAAA,QACZ,aAAa;AAAA,QACb,gBAAgB;AAAA,QAChB,OAAO;AAAA,QACP,OAAO;AAAA,QACP,mBAAmB;AAAA,QACnB,iBAAiB;AAAA,QACjB,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,iBAAiB;AAAA,QACjB,cAAc;AAAA,MACjB;AAAA,MACD,aAAa;AAAA,QACT,aAAa;AAAA,MAChB;AAAA,MACD,QAAQ;AAAA,MACR,YAAY,CAAE;AAAA,MACd,aAAa;AAAA,MACb,MAAM,CAAE;AAAA,MACR,SAAS;AAAA,MACT,OAAO;AAAA,MACP,WAAW;AAAA,MACX,WAAW;AAAA,MACX,UAAU;AAAA,MACV,SAAS;AAAA,MACT,WAAW;AAAA,MACX,WAAW;AAAA,MACX,UAAU;AAAA,IACd,CAAC;AAGD,cAAU,YAAY;AAClB,YAAM,OAAO,MAAM,UAAU,MAAM,SAAS;AAAA,IAChD,CAAC;AAGD,UAAM,kBAAkB;AAAA,MAAS,MAC7B,MAAM,gBAAgB,KAAK,MAAM,YAAY,MAAM;AAAA,IACvD;AAEA,aAAS,QAAQ;AACb,gBAAU,KAAK;AAAA,IACnB;AAEA,UAAM,aAAa,YAAY;AAC3B,YAAM,YAAY,cAAc,MAAM,YAAY;AAClD,YAAM,eAAe,KAAK;AAAA,IAC9B;AAEA,aAAS,iBAAiB;AACtB,mBAAa,KAAK;AAAA,IACtB;AAEA,aAAS,aAAa;AAClB,aAAO,MAAM,cAAc,KAAK,OAAM,IAAK;IAC/C;AAEA,UAAM,SAAS,YAAY;AACvB,YAAM,gBAAgB,KAAK;AAC3B,gBAAU,KAAK;AAAA,IACnB;AAEA,aAAS,aAAa,MAAM;AACxB,iBAAW,OAAO,IAAI;AAAA,IAC1B;AAEA,UAAM,SAAS,YAAY;AACvB,YAAM,eAAe,KAAK;AAC1B,gBAAU,KAAK;AAAA,IACnB;AAEA,UAAM,SAAS,OAAO,SAAS;AAC3B,YAAM,iBAAiB,OAAO,IAAI;AAAA,IACtC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}