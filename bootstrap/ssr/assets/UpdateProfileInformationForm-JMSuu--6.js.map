{"version":3,"file":"UpdateProfileInformationForm-JMSuu--6.js","sources":["../../../resources/js/Pages/Profile/Partials/UpdateProfileInformationForm.vue"],"sourcesContent":["<script setup>\nimport { ref } from 'vue';\nimport { Link, router, useForm } from '@inertiajs/vue3';\nimport ActionMessage from '@/Components/ActionMessage.vue';\nimport FormSection from '@/Components/FormSection.vue';\nimport InputError from '@/Components/InputError.vue';\nimport InputLabel from '@/Components/InputLabel.vue';\nimport PrimaryButton from '@/Components/PrimaryButton.vue';\nimport SecondaryButton from '@/Components/SecondaryButton.vue';\nimport TextInput from '@/Components/TextInput.vue';\n\nconst props = defineProps({\n    user: Object,\n});\n\nconst form = useForm({\n    _method: 'PUT',\n    name: props.user.name,\n    email: props.user.email,\n    photo: null,\n});\n\nconst verificationLinkSent = ref(null);\nconst photoPreview = ref(null);\nconst photoInput = ref(null);\n\nconst updateProfileInformation = () => {\n    if (photoInput.value) {\n        form.photo = photoInput.value.files[0];\n    }\n\n    form.post(route('user-profile-information.update'), {\n        errorBag: 'updateProfileInformation',\n        preserveScroll: true,\n        onSuccess: () => clearPhotoFileInput(),\n    });\n};\n\nconst sendEmailVerification = () => {\n    verificationLinkSent.value = true;\n};\n\nconst selectNewPhoto = () => {\n    photoInput.value.click();\n};\n\nconst updatePhotoPreview = () => {\n    const photo = photoInput.value.files[0];\n\n    if (! photo) return;\n\n    const reader = new FileReader();\n\n    reader.onload = (e) => {\n        photoPreview.value = e.target.result;\n    };\n\n    reader.readAsDataURL(photo);\n};\n\nconst deletePhoto = () => {\n    router.delete(route('current-user-photo.delete'), {\n        preserveScroll: true,\n        onSuccess: () => {\n            photoPreview.value = null;\n            clearPhotoFileInput();\n        },\n    });\n};\n\nconst clearPhotoFileInput = () => {\n    if (photoInput.value?.value) {\n        photoInput.value.value = null;\n    }\n};\n</script>\n\n<template>\n    <FormSection @submitted=\"updateProfileInformation\">\n        <template #title>\n            Profile Information\n        </template>\n\n        <template #description>\n            Update your account's profile information and email address.\n        </template>\n\n        <template #form>\n            <!-- Profile Photo -->\n            <div v-if=\"$page.props.jetstream.managesProfilePhotos\" class=\"col-span-6 sm:col-span-4\">\n                <!-- Profile Photo File Input -->\n                <input\n                    id=\"photo\"\n                    ref=\"photoInput\"\n                    type=\"file\"\n                    class=\"hidden\"\n                    @change=\"updatePhotoPreview\"\n                >\n\n                <InputLabel for=\"photo\" value=\"Photo\" />\n\n                <!-- Current Profile Photo -->\n                <div v-show=\"! photoPreview\" class=\"mt-2\">\n                    <img :src=\"user.profile_photo_url\" :alt=\"user.name\" class=\"rounded-full h-20 w-20 object-cover\">\n                </div>\n\n                <!-- New Profile Photo Preview -->\n                <div v-show=\"photoPreview\" class=\"mt-2\">\n                    <span\n                        class=\"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center\"\n                        :style=\"'background-image: url(\\'' + photoPreview + '\\');'\"\n                    />\n                </div>\n\n                <SecondaryButton class=\"mt-2 me-2\" type=\"button\" @click.prevent=\"selectNewPhoto\">\n                    Select A New Photo\n                </SecondaryButton>\n\n                <SecondaryButton\n                    v-if=\"user.profile_photo_path\"\n                    type=\"button\"\n                    class=\"mt-2\"\n                    @click.prevent=\"deletePhoto\"\n                >\n                    Remove Photo\n                </SecondaryButton>\n\n                <InputError :message=\"form.errors.photo\" class=\"mt-2\" />\n            </div>\n\n            <!-- Name -->\n            <div class=\"col-span-6 sm:col-span-4\">\n                <InputLabel for=\"name\" value=\"Name\" />\n                <TextInput\n                    id=\"name\"\n                    v-model=\"form.name\"\n                    type=\"text\"\n                    class=\"mt-1 block w-full\"\n                    required\n                    autocomplete=\"name\"\n                />\n                <InputError :message=\"form.errors.name\" class=\"mt-2\" />\n            </div>\n\n            <!-- Email -->\n            <div class=\"col-span-6 sm:col-span-4\">\n                <InputLabel for=\"email\" value=\"Email\" />\n                <TextInput\n                    id=\"email\"\n                    v-model=\"form.email\"\n                    type=\"email\"\n                    class=\"mt-1 block w-full\"\n                    required\n                    autocomplete=\"username\"\n                />\n                <InputError :message=\"form.errors.email\" class=\"mt-2\" />\n\n                <div v-if=\"$page.props.jetstream.hasEmailVerification && user.email_verified_at === null\">\n                    <p class=\"text-sm mt-2\">\n                        Your email address is unverified.\n\n                        <Link\n                            :href=\"route('verification.send')\"\n                            method=\"post\"\n                            as=\"button\"\n                            class=\"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                            @click.prevent=\"sendEmailVerification\"\n                        >\n                            Click here to re-send the verification email.\n                        </Link>\n                    </p>\n\n                    <div v-show=\"verificationLinkSent\" class=\"mt-2 font-medium text-sm text-green-600\">\n                        A new verification link has been sent to your email address.\n                    </div>\n                </div>\n            </div>\n        </template>\n\n        <template #actions>\n            <ActionMessage :on=\"form.recentlySuccessful\" class=\"me-3\">\n                Saved.\n            </ActionMessage>\n\n            <PrimaryButton :class=\"{ 'opacity-25': form.processing }\" :disabled=\"form.processing\">\n                Save\n            </PrimaryButton>\n        </template>\n    </FormSection>\n</template>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAWA,UAAM,QAAQ;AAId,UAAM,OAAO,QAAQ;AAAA,MACjB,SAAS;AAAA,MACT,MAAM,MAAM,KAAK;AAAA,MACjB,OAAO,MAAM,KAAK;AAAA,MAClB,OAAO;AAAA,IACX,CAAC;AAED,UAAM,uBAAuB,IAAI,IAAI;AACrC,UAAM,eAAe,IAAI,IAAI;AAC7B,UAAM,aAAa,IAAI,IAAI;AAE3B,UAAM,2BAA2B,MAAM;AACnC,UAAI,WAAW,OAAO;AAClB,aAAK,QAAQ,WAAW,MAAM,MAAM,CAAC;AAAA,MACxC;AAED,WAAK,KAAK,MAAM,iCAAiC,GAAG;AAAA,QAChD,UAAU;AAAA,QACV,gBAAgB;AAAA,QAChB,WAAW,MAAM,oBAAqB;AAAA,MAC9C,CAAK;AAAA,IACL;AAEA,UAAM,wBAAwB,MAAM;AAChC,2BAAqB,QAAQ;AAAA,IACjC;AAEA,UAAM,iBAAiB,MAAM;AACzB,iBAAW,MAAM;IACrB;AAEA,UAAM,qBAAqB,MAAM;AAC7B,YAAM,QAAQ,WAAW,MAAM,MAAM,CAAC;AAEtC,UAAI,CAAE,MAAO;AAEb,YAAM,SAAS,IAAI;AAEnB,aAAO,SAAS,CAAC,MAAM;AACnB,qBAAa,QAAQ,EAAE,OAAO;AAAA,MACtC;AAEI,aAAO,cAAc,KAAK;AAAA,IAC9B;AAEA,UAAM,cAAc,MAAM;AACtB,aAAO,OAAO,MAAM,2BAA2B,GAAG;AAAA,QAC9C,gBAAgB;AAAA,QAChB,WAAW,MAAM;AACb,uBAAa,QAAQ;AACrB;QACH;AAAA,MACT,CAAK;AAAA,IACL;AAEA,UAAM,sBAAsB,MAAM;;AAC9B,WAAI,gBAAW,UAAX,mBAAkB,OAAO;AACzB,mBAAW,MAAM,QAAQ;AAAA,MAC5B;AAAA,IACL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}