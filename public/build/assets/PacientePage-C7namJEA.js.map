{"version":3,"file":"PacientePage-C7namJEA.js","sources":["../../../resources/js/Pages/PacientePage.vue"],"sourcesContent":["<script setup>\nimport AppLayout from \"@/Layouts/AppLayout.vue\";\nimport { router } from \"@inertiajs/vue3\";\nimport { reactive, ref, onMounted, computed } from \"vue\";\nimport { useDataStore } from \"@/store.js\";\nimport moment from \"moment\";\nimport { useDate } from \"vuetify\";\nimport {\n    fetchAllData,\n    handleRemoveItem,\n    handleShowItem,\n    handleStoreItem,\n    handleEditItem,\n    closeForm,\n    openToCreate,\n    openToEdit,\n} from \"@/helper.js\";\n\n//**********\\\\\\\\  INI STATE VARIABLES AND CONST ////*************/\n\ndefineOptions({ layout: AppLayout });\n\nconst store = useDataStore();\nconst state = reactive({\n    endpoints: [\n        \"afps\",\n        \"Calless\",\n        \"estados_civiles\",\n        \"establecimientos_educacionales\",\n        \"generos\",\n        \"grupos_sanguineos\",\n        \"leyes_sociales\",\n        \"nacionalidades\",\n        \"niveles_instruccion\",\n        \"previsiones\",\n        \"pueblos_originarios\",\n        \"religiones\",\n        \"seguros_salud\",\n    ],\n    headers: [\n        { title: \"Rut\", align: \"center\", sortable: true, key: \"rut\" },\n        { title: \"Nombre\", align: \"center\", sortable: true, key: \"nombre\" },\n        {\n            title: \"Apellidos\",\n            align: \"center\",\n            sortable: true,\n            key: \"apellidos\",\n        },\n        {\n            title: \"Edad\",\n            align: \"center\",\n            sortable: true,\n            key: \"edad\",\n        },\n        {\n            title: \"Telefono contacto\",\n            align: \"center\",\n            sortable: true,\n            key: \"telefono1\",\n        },\n        { title: \"Acciones\", sortable: false, align: \"center\", key: \"actions\" },\n    ],\n    validationSchema: {\n        rutRules: [\n            (value) => {\n                const regex = /^[0-9]+[-|‐]{1}[0-9kK]{1}$/;\n                if (!regex.test(value)) {\n                    return false;\n                }\n\n                // Separar el número y el dígito verificador\n                let splitidRut = value.split(\"-\");\n                let num = splitidRut[0];\n                let dv = splitidRut[1].toLowerCase();\n                // Calcular el dígito verificador esperado\n                let m = 0,\n                    s = 1;\n                for (; num; num = Math.floor(num / 10)) {\n                    s = (s + (num % 10) * (9 - (m++ % 6))) % 11;\n                }\n                let dvEsperado = s ? s - 1 : \"k\";\n                const validate = dv === dvEsperado;\n                return validate\n                    ? true\n                    : \"El rut no es válido. Por favor, verifique el formato y los dígitos.\";\n            },\n        ],\n        emailRules: [\n            (value) => {\n                if (value) return true;\n                return \"Se necesita un email.\";\n            },\n            (value) => {\n                if (/.+@.+\\..+/.test(value)) return true;\n                return \"El email debe ser válido.\";\n            },\n        ],\n    },\n    searchQuery: {\n        id: null,\n        rut: null,\n        lista_espera: null,\n        afp_id: null,\n        establecimiento_educacional_id: null,\n        nacionalidad_id: null,\n        ley_social_id: null,\n        seguro_salud_id: null,\n        prevision_id: null,\n    },\n    editedItem: {\n        rut: null,\n        afp_id: null,\n        apellidos: null,\n        Calles_id: null,\n        ciudad: null,\n        direccion: null,\n        donante: false,\n        edad: null,\n        email: null,\n        establecimiento_educacional_id: null,\n        estado_civil_id: null,\n        fecha_nacimiento: null,\n        genero_id: null,\n        grupo_sanguineo_id: null,\n        ley_social_id: null,\n        nacionalidad_id: null,\n        nivel_instruccion_id: null,\n        nombre: null,\n        prevision_id: null,\n        pueblo_originario_id: null,\n        religion_id: null,\n        seguro_salud_id: null,\n        telefono1: null,\n        telefono2: null,\n        nombre_responsable: null,\n        apellido_responsable: null,\n        telefono_responsable: null,\n        rut_responsable: null,\n        direccion_responsable: null,\n        email_responsable: null,\n        parentesco_responsable: null,\n        ocupacion_responsable: null,\n        pueblo_originario_responsable_id: null,\n        nivel_instruccion_responsable_id: null,\n        religion_responsable_id: null,\n        fecha_nacimiento_responsable: null,\n        edad: null,\n        genero_responsable_id: null,\n        nacionalidad_responsable_id: null,\n        comunidad_lgtbq_responsable: null,\n        credencial_discapacidad_responsable_id: null,\n        estado_civil_responsable_id: null,\n        prevision_responsable_id: null,\n    },\n    defaultItem: {\n        afp_id: null,\n        apellido_responsable: null,\n        apellidos: null,\n        Calles_id: null,\n        ciudad: null,\n        comunidad_lgtbq_responsable: null,\n        credencial_discapacidad_responsable_id: null,\n        direccion_responsable: null,\n        direccion: null,\n        donante: false,\n        edad: null,\n        edad: null,\n        email_responsable: null,\n        email: null,\n        establecimiento_educacional_id: null,\n        estado_civil_id: null,\n        estado_civil_responsable_id: null,\n        fecha_nacimiento_responsable: null,\n        fecha_nacimiento: null,\n        genero_id: null,\n        genero_responsable_id: null,\n        grupo_sanguineo_id: null,\n        ley_social_id: null,\n        nacionalidad_id: null,\n        nacionalidad_responsable_id: null,\n        nivel_instruccion_id: null,\n        nivel_instruccion_responsable_id: null,\n        nombre_responsable: null,\n        nombre: null,\n        ocupacion_responsable: null,\n        parentesco_responsable: null,\n        prevision_id: null,\n        prevision_responsable_id: null,\n        pueblo_originario_id: null,\n        pueblo_originario_responsable_id: null,\n        religion_id: null,\n        religion_responsable_id: null,\n        rut_responsable: null,\n        rut: null,\n        seguro_salud_id: null,\n        telefono_responsable: null,\n        telefono1: null,\n        telefono2: null,\n    },\n    dialog: false,\n    editedIndex: -1,\n    formCrear: \"Nuevo Paciente\",\n    formEdit: \"Editar datos del Paciente\",\n    formItems: [],\n    formTitle: \"Gestión de Pacientes\",\n    list: [],\n    loadingSearch: false,\n    tableItems: [],\n    urlDelete: \"/paciente/delete\",\n    urlShow: \"/paciente/show\",\n    urlStore: \"/paciente\",\n    urlUpdate: \"/paciente/update\",\n});\nconst date = useDate();\n\n//**********\\\\\\\\  LIFE CYCLE HOOKS ////*************/\nonMounted(async () => {\n    state.list = await fetchAllData(state.endpoints);\n});\n\n//**********\\\\\\\\  COMPUTE PROPERTIES ////*************/\nconst editedItemTitle = computed(() =>\n    state.editedIndex === -1 ? state.formCrear : state.formEdit,\n);\n\n//**********\\\\\\\\ METHODS ////*************/\nconst formatDate = computed(() => {\n    let formatted = moment(state.editedItem.fecha_nacimiento).format(\n        \"DD/MM/YYYY\",\n    );\n    return formatted;\n});\nfunction fichaMedica(item) {\n    store.selected = item;\n    try {\n        router.get(\"ficha-medica\");\n    } catch (error) {\n        console.error(\n            '\"An error occurred while fetching daily attention data.\"',\n        );\n    }\n}\n\nfunction close() {\n    closeForm(state);\n}\n\nfunction calcEdad(fecNac) {\n    let now = new Date();\n    let birthDate = new Date(fecNac);\n    let age = now.getFullYear() - birthDate.getFullYear();\n    return age;\n}\n\nconst handleInputChange = () => {\n    let fecNac = state.editedItem.fecha_nacimiento;\n    let age = calcEdad(fecNac);\n    state.editedItem.edad = ref(age);\n};\n\n//**********\\\\\\\\  CRUD ////*************/\nconst show = async () => {\n    await handleShowItem(state);\n};\n\nfunction openFormCreate() {\n    openToCreate(state);\n}\n\nfunction storeItems() {\n    return state.editedIndex > -1 ? update() : create();\n}\n\nconst create = async () => {\n    await handleStoreItem(state);\n    closeForm(state);\n};\n\nfunction fichaPersonal(item) {\n    openToEdit(state, item);\n    handleInputChange();\n}\n\nconst update = async () => {\n    await handleEditItem(state);\n    closeForm(state);\n};\n\nconst remove = async (item) => {\n    handleRemoveItem(state, item);\n};\n</script>\n\n<template>\n    <v-container fluid>\n        <v-sheet :elevation=\"6\" :class=\"'rounded-lg ma-2 pa-2'\">\n            <v-expansion-panels>\n                <v-expansion-panel title=\"Ficha de Pacientes\" color=\"#009AA4\">\n                    <v-expansion-panel-text>\n                        <v-form fast-fail @submit.prevent>\n                            <v-row>\n                                <v-col>\n                                    <v-text-field\n                                        v-model=\"state.searchQuery.rut\"\n                                        :rules=\"state.validationSchema.rutRules\"\n                                        label=\"Rut del paciente * (12345678-9)\"\n                                        class=\"ma-2\"\n                                        type=\"text\"\n                                        variant=\"underlined\"\n                                        clearable\n                                    ></v-text-field>\n\n                                    <v-text-field\n                                        v-model=\"state.searchQuery.rut_responsable\"\n                                        :rules=\"state.validationSchema.rutRules\"\n                                        label=\"Rut persona encargada\"\n                                        class=\"ma-2\"\n                                        type=\"text\"\n                                        variant=\"underlined\"\n                                        clearable\n                                    ></v-text-field>\n                                    \n                                </v-col>\n                                <v-col>\n                                    <v-select\n                                        :items=\"\n                                            state.list\n                                                .establecimiento_educacional\n                                        \"\n                                        item-title=\"descripcion\"\n                                        item-value=\"id\"\n                                        v-model=\"\n                                            state.searchQuery\n                                                .establecimiento_educacional_id\n                                        \"\n                                        clearable\n                                        label=\"Establecimiento Educacional\"\n                                        class=\"ma-2\"\n                                        variant=\"underlined\"\n                                        single\n                                    />\n                                </v-col>\n                            </v-row>\n\n                            <v-row>\n                                <v-btn\n                                    prepend-icon=\"mdi-file-search\"\n                                    variant=\"tonal\"\n                                    class=\"ma-4\"\n                                    color=\"#009AA4\"\n                                    type=\"submit\"\n                                    @click=\"show\"\n                                >\n                                    Buscar\n                                </v-btn>\n\n                                <v-btn\n                                    prepend-icon=\"mdi-cloud-download\"\n                                    variant=\"tonal\"\n                                    class=\"ma-4\"\n                                    color=\"#009AA4\"\n                                >\n                                    <download-excel\n                                        :data=\"state.tableItems\"\n                                        name=\"consulta_paciente.xls\"\n                                    >\n                                        Bajar archivo\n                                    </download-excel>\n                                </v-btn>\n                            </v-row>\n                        </v-form>\n                    </v-expansion-panel-text>\n                </v-expansion-panel>\n            </v-expansion-panels>\n        </v-sheet>\n\n        <v-sheet color=\"white\" :elevation=\"6\" :class=\"'rounded-lg ma-2 pa-2'\">\n            <v-data-table\n                :headers=\"state.headers\"\n                :items=\"state.tableItems\"\n                :sort-by=\"[{ key: 'apellidos', order: 'asc' }]\"\n            >\n                <template v-slot:top>\n                    <v-toolbar flat>\n                        <v-btn\n                            icon=\"mdi-account-multiple-plus\"\n                            variant=\"tonal\"\n                            class=\"ma-2\"\n                            color=\"#009AA4\"\n                            @click=\"openFormCreate\"\n                        >\n                        </v-btn>\n\n                        <v-dialog v-model=\"state.dialog\" persistent>\n                            <v-form fast-fail @submit.prevent>\n                                <v-sheet\n                                    color=\"white\"\n                                    :elevation=\"6\"\n                                    :class=\"'rounded-lg ma-4 pa-4'\"\n                                >\n                                    <v-card>\n                                        <v-card-title>\n                                            <div class=\"text-h6 ma-2\">\n                                                {{ editedItemTitle }}\n                                            </div>\n                                            <v-divider\n                                                thickness=\"4px\"\n                                                color=\"#662d91\"\n                                            ></v-divider>\n                                        </v-card-title>\n                                        <v-card-text>\n                                            <div class=\"text-h6\">\n                                                Datos Personales\n                                            </div>\n\n                                            <v-row>\n                                                <v-col>\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem.rut\n                                                        \"\n                                                        label=\"Rut* (12345678-9)\"\n                                                        id=\"rut\"\n                                                        type=\"text\"\n                                                        required\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n                                                    <v-text-field\n                                                        label=\"Derivado por*\"\n                                                        type=\"text\"\n                                                        required\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .nombre\n                                                        \"\n                                                        label=\"Nombre*\"\n                                                        type=\"text\"\n                                                        id=\"nombre\"\n                                                        required\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .apellidos\n                                                        \"\n                                                        label=\"Apellidos*\"\n                                                        id=\"apellidos\"\n                                                        required\n                                                        type=\"text\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-switch\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .comunidad_lgbtq\n                                                        \"\n                                                        hide-details\n                                                        class=\"ml-2\"\n                                                        color=\"green-darken-3\"\n                                                        inset\n                                                        label=\"Comunidad LGTB+\"\n                                                    ></v-switch>\n\n                                                    <v-switch\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .donante\n                                                        \"\n                                                        class=\"ml-2\"\n                                                        label=\"Donante\"\n                                                        color=\"success\"\n                                                        hide-details\n                                                        inset\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-switch>\n\n                                                    <v-switch\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .credencial_discapacidad\n                                                        \"\n                                                        class=\"ml-2\"\n                                                        label=\"Credencial discapacidad\"\n                                                        color=\"success\"\n                                                        hide-details\n                                                        inset\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-switch>\n                                                </v-col>\n\n                                                <v-col>\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .email\n                                                        \"\n                                                        :rules=\"\n                                                            state\n                                                                .validationSchema\n                                                                .emailRules\n                                                        \"\n                                                        label=\"Email\"\n                                                        type=\"email\"\n                                                        required\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .fecha_nacimiento\n                                                        \"\n                                                        label=\"Fecha de nacimiento\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                        type=\"date\"\n                                                        :format=\"formatDate\"\n                                                        @input=\"\n                                                            handleInputChange\n                                                        \"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .edad\n                                                        \"\n                                                        label=\"Edad*\"\n                                                        type=\"text\"\n                                                        variant=\"underlined\"\n                                                        readonly\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .direccion\n                                                        \"\n                                                        label=\"Dirección\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        label=\"teléfono 1\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .telefono1\n                                                        \"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .telefono2\n                                                        \"\n                                                        label=\"teléfono 2\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n                                                </v-col>\n\n                                                <v-col>\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list\n                                                                .grupo_sanguineo\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .grupo_sanguineo_id\n                                                        \"\n                                                        label=\"Grupo sanguíneo\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list\n                                                                .estado_civil\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .estado_civil_id\n                                                        \"\n                                                        label=\"Estado civil\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list\n                                                                .nacionalidad\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .nacionalidad_id\n                                                        \"\n                                                        label=\"Nacionalidad\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list.religion\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        label=\"Religion / Culto\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .religion_id\n                                                        \"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list.genero\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        label=\"Género\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .genero_id\n                                                        \"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-text-field\n                                                        label=\"Ciudad\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .ciudad\n                                                        \"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n                                                </v-col>\n\n                                                <v-col>\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list.prevision\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .prevision_id\n                                                        \"\n                                                        label=\"Previsión de Salud\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list.pueblo\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .pueblo_originario_id\n                                                        \"\n                                                        label=\"Pueblo originario\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list\n                                                                .nivel_instruccion_id\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .instruccion\n                                                        \"\n                                                        label=\"Nivel de Instruccion\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n                                                    <v-select\n                                                        label=\"Diagnóstico NNE Transitoria\"\n                                                    ></v-select>\n                                                    <v-select\n                                                        label=\"Diagnóstico NNE Permanentes\"\n                                                    ></v-select>\n                                                </v-col>\n                                            </v-row>\n\n                                            <div class=\"text-h6\">\n                                                Datos Educacionales\n                                            </div>\n\n                                            <v-row>\n                                                <v-col>\n                                                    <v-select\n                                                        label=\"Establecimiento educacional\"\n                                                    ></v-select>\n                                                </v-col>\n                                                <v-col>\n                                                    <v-select\n                                                        label=\"Profesor/a Jefe\"\n                                                    ></v-select>\n                                                </v-col>\n                                                <v-col>\n                                                    <v-switch\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .pertenece_pie\n                                                        \"\n                                                        hide-details\n                                                        class=\"ml-2\"\n                                                        color=\"green-darken-3\"\n                                                        inset\n                                                        label=\"Pertenece PIE\"\n                                                    ></v-switch>\n                                                </v-col>\n                                            </v-row>\n\n                                            <div class=\"text-h6\">\n                                                Datos Persona Responsable\n                                            </div>\n\n                                            <v-row>\n                                                <v-col>\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .rut_responsable\n                                                        \"\n                                                        label=\"Rut* (12345678-9)\"\n                                                        id=\"rut\"\n                                                        type=\"text\"\n                                                        required\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .nombre_responsable\n                                                        \"\n                                                        label=\"Nombre*\"\n                                                        type=\"text\"\n                                                        id=\"nombre\"\n                                                        required\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .apellidos_responsable\n                                                        \"\n                                                        label=\"Apellidos*\"\n                                                        id=\"apellidos\"\n                                                        required\n                                                        type=\"text\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-switch\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .comunidad_lgbtq_responsable\n                                                        \"\n                                                        hide-details\n                                                        class=\"ml-2\"\n                                                        color=\"green-darken-3\"\n                                                        inset\n                                                        label=\"Comunidad LGTB+\"\n                                                    ></v-switch>\n\n                                                    <v-switch\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .donante\n                                                        \"\n                                                        class=\"ml-2\"\n                                                        label=\"Donante\"\n                                                        color=\"success\"\n                                                        hide-details\n                                                        inset\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-switch>\n                                                </v-col>\n                                                <v-switch\n                                                    v-model=\"\n                                                        state.editedItem\n                                                            .credencial_discapacidad_responsable_id\n                                                    \"\n                                                    class=\"ml-2\"\n                                                    label=\"Credencial discapacidad\"\n                                                    color=\"success\"\n                                                    hide-details\n                                                    inset\n                                                    clearable\n                                                    variant=\"underlined\"\n                                                ></v-switch>\n                                                <v-col>\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .email\n                                                        \"\n                                                        :rules=\"\n                                                            state\n                                                                .validationSchema\n                                                                .emailRules\n                                                        \"\n                                                        label=\"Email\"\n                                                        type=\"email\"\n                                                        required\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .fecha_nacimiento\n                                                        \"\n                                                        label=\"Fecha de nacimiento\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                        type=\"date\"\n                                                        :format=\"formatDate\"\n                                                        @input=\"\n                                                            handleInputChange\n                                                        \"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .edad\n                                                        \"\n                                                        label=\"Edad*\"\n                                                        type=\"text\"\n                                                        variant=\"underlined\"\n                                                        readonly\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .direccion\n                                                        \"\n                                                        label=\"Dirección\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        label=\"teléfono 1\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .telefono1\n                                                        \"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n\n                                                    <v-text-field\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .telefono2\n                                                        \"\n                                                        label=\"teléfono 2\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n                                                </v-col>\n                                                <v-col>\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list\n                                                                .grupo_sanguineo\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .grupo_sanguineo_id\n                                                        \"\n                                                        label=\"Grupo sanguíneo\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list\n                                                                .estado_civil\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .estado_civil_id\n                                                        \"\n                                                        label=\"Estado civil\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list\n                                                                .nacionalidad\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .nacionalidad_id\n                                                        \"\n                                                        label=\"Nacionalidad\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list.religion\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        label=\"Religion / Culto\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .religion_id\n                                                        \"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list.genero\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        label=\"Género\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .genero_id\n                                                        \"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-text-field\n                                                        label=\"Ciudad\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .ciudad\n                                                        \"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    ></v-text-field>\n                                                </v-col>\n                                                <v-col>\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list.prevision\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .prevision_id\n                                                        \"\n                                                        label=\"Previsión de Salud\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list.pueblo\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .pueblo_originario_id\n                                                        \"\n                                                        label=\"Pueblo originario\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n\n                                                    <v-select\n                                                        :items=\"\n                                                            state.list\n                                                                .nivel_instruccion_id\n                                                        \"\n                                                        item-title=\"descripcion\"\n                                                        item-value=\"id\"\n                                                        v-model=\"\n                                                            state.editedItem\n                                                                .instruccion\n                                                        \"\n                                                        label=\"Nivel de Instruccion\"\n                                                        clearable\n                                                        variant=\"underlined\"\n                                                    />\n                                                </v-col>\n                                            </v-row>\n                                        </v-card-text>\n                                        <v-card-actions>\n                                            <v-spacer></v-spacer>\n                                            <v-btn\n                                                color=\"#009AA4\"\n                                                variant=\"tonal\"\n                                                @click=\"close\"\n                                            >\n                                                Cancelar\n                                            </v-btn>\n                                            <v-btn\n                                                color=\"#009AA4\"\n                                                variant=\"tonal\"\n                                                @click=\"storeItems\"\n                                            >\n                                                Guardar\n                                            </v-btn>\n                                        </v-card-actions>\n                                    </v-card>\n                                </v-sheet>\n                            </v-form>\n                        </v-dialog>\n                    </v-toolbar>\n                </template>\n\n                <template v-slot:item.actions=\"{ item }\">\n                    <v-tooltip text=\"Ficha Médica\" location=\"top\">\n                        <template v-slot:activator=\"{ props }\">\n                            <v-btn\n                                v-bind=\"props\"\n                                density=\"compact\"\n                                color=\"#009AA4\"\n                                class=\"mr-2 ml-2\"\n                                variant=\"tonal\"\n                                :icon=\"'mdi-stethoscope'\"\n                                @click=\"fichaMedica(item)\"\n                            ></v-btn>\n                        </template>\n                    </v-tooltip>\n                    <v-tooltip text=\"Datos Personales\" location=\"top\">\n                        <template v-slot:activator=\"{ props }\">\n                            <v-btn\n                                v-bind=\"props\"\n                                density=\"compact\"\n                                class=\"mr-2 ml-2\"\n                                color=\"#009AA4\"\n                                variant=\"tonal\"\n                                :icon=\"'mdi-account-edit-outline'\"\n                                @click=\"fichaPersonal(item)\"\n                            ></v-btn>\n                        </template>\n                    </v-tooltip>\n                    <v-tooltip text=\"Eliminar\" location=\"top\">\n                        <template v-slot:activator=\"{ props }\">\n                            <v-btn\n                                v-bind=\"props\"\n                                density=\"compact\"\n                                class=\"mr-2 ml-2\"\n                                color=\"#009AA4\"\n                                variant=\"tonal\"\n                                :icon=\"'mdi-delete-outline'\"\n                                @click=\"remove(item)\"\n                            ></v-btn>\n                        </template>\n                    </v-tooltip>\n                </template>\n            </v-data-table>\n        </v-sheet>\n    </v-container>\n</template>\n"],"names":["store","useDataStore","state","reactive","value","splitidRut","num","dv","dvEsperado","useDate","onMounted","fetchAllData","editedItemTitle","computed","formatDate","moment","fichaMedica","item","router","close","closeForm","calcEdad","fecNac","now","birthDate","handleInputChange","age","ref","show","handleShowItem","openFormCreate","openToCreate","storeItems","update","create","handleStoreItem","fichaPersonal","openToEdit","handleEditItem","remove","handleRemoveItem"],"mappings":"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"}