{"version":3,"file":"DashExpoPlanta-BuLOFG6y.js","sources":["../../../resources/js/Pages/SubPages/DashExpoPlanta.vue"],"sourcesContent":["<script setup>\nimport axios from \"axios\";\nimport { Doughnut } from \"vue-chartjs\";\nimport { onMounted, reactive } from \"vue\";\nimport autocolors from \"chartjs-plugin-autocolors\";\nimport { fetchData } from \"@/helper.js\";\nimport {\n    Chart as ChartJS,\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement,\n    CategoryScale,\n    LinearScale,\n} from \"chart.js\";\n\nChartJS.register(\n    Title,\n    Tooltip,\n    Legend,\n    ArcElement,\n    CategoryScale,\n    LinearScale,\n    autocolors\n);\n\nconst state = reactive({\n    endpoints: [\"planta\"],\n    list: [],\n    planta: null,\n    loaded: false,\n});\n\nconst chartData = reactive({\n    labels: [],\n    datasets: [\n        {\n            data: [],\n        },\n    ],\n});\n\nconst chartOptions = {\n    responsive: true,\n    maintainAspectRatio: true,\n    plugins: {\n        autocolors: {\n            mode: \"data\",\n        },\n    },\n};\n\nconst onChange = async (value) => {\n    await getData(state.planta);\n    console.log(state.planta);\n    state.loaded = true;\n};\n\nconst getData = async (planta) => {\n    try {\n        state.loaded = false;\n        let id = planta;\n        const { data } = await axios.get(\"/dashboard/expo_planta\", {\n            params: { id },\n        });\n        const objArray = Object.values(data);\n        chartData.labels = objArray[0];\n        chartData.datasets[0].data = objArray[1];\n    } catch (error) {\n        console.log(\"Error al obtener los datos.\" + error);\n    }\n};\n\nonMounted(async () => {\n    try {\n        state.list = await fetchData(state.endpoints);\n    } catch (error) {\n        console.log(error);\n    }\n});\n</script>\n\n<template>\n    <div style=\"width: 80%\">\n        <v-select\n            :items=\"state.list.planta\"\n            item-title=\"descripcion\"\n            item-value=\"id\"\n            v-model=\"state.planta\"\n            label=\"Planta\"\n            clearable\n            class=\"ma-4 mt-8\"\n            variant=\"underlined\"\n            @update:modelValue=\"onChange()\"\n            single\n        ></v-select>\n\n        <Doughnut\n            :options=\"chartOptions\"\n            :data=\"chartData\"\n            v-if=\"state.loaded\"\n        />\n    </div>\n</template>\n"],"names":["ChartJS"],"mappings":";;;;;;;;;;;;;;;;AAgBAA,UAAQ;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACJ;AAEA,UAAM,QAAQ,SAAS;AAAA,MACnB,WAAW,CAAC,QAAQ;AAAA,MACpB,MAAM,CAAE;AAAA,MACR,QAAQ;AAAA,MACR,QAAQ;AAAA,IACZ,CAAC;AAED,UAAM,YAAY,SAAS;AAAA,MACvB,QAAQ,CAAE;AAAA,MACV,UAAU;AAAA,QACN;AAAA,UACI,MAAM,CAAE;AAAA,QACX;AAAA,MACJ;AAAA,IACL,CAAC;AAED,UAAM,eAAe;AAAA,MACjB,YAAY;AAAA,MACZ,qBAAqB;AAAA,MACrB,SAAS;AAAA,QACL,YAAY;AAAA,UACR,MAAM;AAAA,QACT;AAAA,MACJ;AAAA,IACL;AAEA,UAAM,WAAW,OAAO,UAAU;AAC9B,YAAM,QAAQ,MAAM,MAAM;AAC1B,cAAQ,IAAI,MAAM,MAAM;AACxB,YAAM,SAAS;AAAA,IACnB;AAEA,UAAM,UAAU,OAAO,WAAW;AAC9B,UAAI;AACA,cAAM,SAAS;AACf,YAAI,KAAK;AACT,cAAM,EAAE,KAAM,IAAG,MAAM,MAAM,IAAI,0BAA0B;AAAA,UACvD,QAAQ,EAAE,GAAI;AAAA,QAC1B,CAAS;AACD,cAAM,WAAW,OAAO,OAAO,IAAI;AACnC,kBAAU,SAAS,SAAS,CAAC;AAC7B,kBAAU,SAAS,CAAC,EAAE,OAAO,SAAS,CAAC;AAAA,MAC1C,SAAQ,OAAO;AACZ,gBAAQ,IAAI,gCAAgC,KAAK;AAAA,MACzD;AAAA,IACA;AAEA,cAAU,YAAY;AAClB,UAAI;AACA,cAAM,OAAO,MAAM,UAAU,MAAM,SAAS;AAAA,MAC/C,SAAQ,OAAO;AACZ,gBAAQ,IAAI,KAAK;AAAA,MACzB;AAAA,IACA,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}