import{s as B,x as N,h as n,c as S,o as F,w as t,b as e,f as b,t as w,n as R,m as T,a as $}from"./app-Bd0vU_sz.js";import{A as j}from"./AppLayout-DLm9dYBT.js";import{f as P,h as L}from"./helper-BFSVoXz5.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-DIp7Rf8v.js";import"./store-kpSnY_mw.js";const z={class:"text-h5"},K=Object.assign({layout:j},{__name:"ConsultaExEquilibrio",setup(O){const l=B({endpoints:["area","ceco","empresa","planta","unidad"],headers:[{title:"Rut",align:"start",sortable:!0,key:"rut"},{title:"Nombre",align:"start",sortable:!0,key:"nombre"},{title:"Apellidos",align:"start",sortable:!0,key:"apellidos"},{title:"Dias restantes",align:"start",sortable:!0,key:"dias_restantes"},{title:"Fecha exámen",align:"start",sortable:!0,key:"fecha_examen"},{title:"Acciones",align:"center",key:"actions"}],searchQuery:{activo:!0,area:null,ceco:null,empresa:null,planta:null,rut:null,unidad:null,fecha_examen:{desde:null,hasta:null}},rutRules:[u=>{if(!/^[0-9]+[-|‐]{1}[0-9kK]{1}$/.test(u))return!1;let d=u.split("-"),i=d[0],v=d[1].toLowerCase(),m=0,r=1;for(;i;i=Math.floor(i/10))r=(r+i%10*(9-m++%6))%11;let s=r?r-1:"k";return v==s?!0:"El rut es incorrecto"}],itemsView:{paciente_id:null,tipo_vehiculo:null,contraindicacion:null,fecha_examen:null,comentario:null},dialog:!1,tableItems:[],formItems:[],editedIndex:-1,list:[],valid:null,formTitle:"Exámen de Equilibrio",urlSearch:"/consulta/exequilibrio/search"});N(async()=>{l.list=await P(l.endpoints)});function Q(u){l.dialog=!0,l.itemsView={...u}}function k(){l.dialog=!1}const C=async()=>{await L(l)};return(u,a)=>{const d=n("v-toolbar-title"),i=n("v-spacer"),v=n("v-toolbar"),m=n("v-card-title"),r=n("v-text-field"),s=n("v-select"),x=n("v-switch"),f=n("v-col"),y=n("v-row"),V=n("v-card-text"),c=n("v-btn"),U=n("download-excel"),h=n("v-card-actions"),_=n("v-container"),E=n("v-tooltip"),D=n("v-data-table"),p=n("v-sheet"),g=n("v-card"),A=n("v-form"),q=n("v-dialog");return F(),S(_,{fluid:""},{default:t(()=>[e(g,null,{default:t(()=>[e(m,null,{default:t(()=>[e(v,{flat:""},{default:t(()=>[e(d,null,{default:t(()=>[b(w(l.formTitle),1)]),_:1}),e(i)]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(p,{color:"white",elevation:4,class:R("rounded-lg ma-2 pa-2")},{default:t(()=>[e(_,{fluid:""},{default:t(()=>[e(V,null,{default:t(()=>[e(y,null,{default:t(()=>[e(f,null,{default:t(()=>[e(r,{label:"Rut",variant:"underlined",rules:l.rutRules,modelValue:l.searchQuery.rut,"onUpdate:modelValue":a[0]||(a[0]=o=>l.searchQuery.rut=o)},null,8,["rules","modelValue"]),e(s,{items:l.list.empresa,"item-title":"descripcion","item-value":"id",label:"Empresa",modelValue:l.searchQuery.empresa,"onUpdate:modelValue":a[1]||(a[1]=o=>l.searchQuery.empresa=o),variant:"underlined",clearable:""},null,8,["items","modelValue"]),e(s,{label:"Unidad",variant:"underlined",modelValue:l.searchQuery.unidad,"onUpdate:modelValue":a[2]||(a[2]=o=>l.searchQuery.unidad=o),items:l.list.unidad,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),e(s,{label:"Area",modelValue:l.searchQuery.area,"onUpdate:modelValue":a[3]||(a[3]=o=>l.searchQuery.area=o),variant:"underlined",items:l.list.area,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),e(s,{label:"Area (cecos)",modelValue:l.searchQuery.ceco,"onUpdate:modelValue":a[4]||(a[4]=o=>l.searchQuery.ceco=o),variant:"underlined",items:l.list.ceco,"item-title":"descripcion","item-value":"id"},null,8,["modelValue","items"]),e(x,{modelValue:l.searchQuery.activo,"onUpdate:modelValue":a[5]||(a[5]=o=>l.searchQuery.activo=o),"hide-details":"","true-value":"true","false-value":"false",class:"ml-4 mb-4",variant:"underlined",color:"green-darken-3",value:"No Aprobado",inset:!0,label:`Paciente: ${l.searchQuery.activo.toString()}`},null,8,["modelValue","label"])]),_:1}),e(f,null,{default:t(()=>[e(r,{label:"Fecha exámen (desde)",variant:"underlined",modelValue:l.searchQuery.fecha_examen.desde,"onUpdate:modelValue":a[6]||(a[6]=o=>l.searchQuery.fecha_examen.desde=o),type:"date"},null,8,["modelValue"]),e(r,{label:"Fecha exámen (hasta)",variant:"underlined",modelValue:l.searchQuery.fecha_examen.hasta,"onUpdate:modelValue":a[7]||(a[7]=o=>l.searchQuery.fecha_examen.hasta=o),type:"date"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,null,{default:t(()=>[e(c,{"prepend-icon":"mdi-file-search",variant:"underlined",color:"#662D91",onClick:C},{default:t(()=>a[12]||(a[12]=[b(" Buscar ")])),_:1}),e(c,{"prepend-icon":"mdi-microsoft-excel",variant:"underlined",color:"#662D91"},{default:t(()=>[e(U,{data:l.tableItems,name:"consulta_exquilibrio.xls"},{default:t(()=>a[13]||(a[13]=[b(" Bajar archivo ")])),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),e(_,{fluid:""},{default:t(()=>[e(D,{headers:l.headers,items:l.tableItems,"sort-by":[{key:"apellidos",order:"asc"}]},{"item.actions":t(({item:o})=>[e(E,{text:"Ver detalles",location:"top"},{activator:t(({props:I})=>[e(c,T(I,{density:"compact",color:"#662D91",class:"mr-2 ml-2",icon:"mdi-eye",onClick:G=>Q(o)}),null,16,["onClick"])]),_:2},1024)]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(q,{modelValue:l.dialog,"onUpdate:modelValue":a[11]||(a[11]=o=>l.dialog=o)},{default:t(()=>[e(p,{elevation:"4",class:"ma-4 pa-4"},{default:t(()=>[e(g,null,{default:t(()=>[e(A,{readonly:""},{default:t(()=>[e(p,{elevation:"2",class:"ma-2 pa-2"},{default:t(()=>[e(m,null,{default:t(()=>[$("span",z,w(l.formTitle),1)]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(y,null,{default:t(()=>[e(f,null,{default:t(()=>[e(r,{modelValue:l.itemsView.fecha_examen,"onUpdate:modelValue":a[8]||(a[8]=o=>l.itemsView.fecha_examen=o),label:"Fecha exámen",type:"date",variant:"underlined"},null,8,["modelValue"]),e(r,{modelValue:l.itemsView.comentario,"onUpdate:modelValue":a[9]||(a[9]=o=>l.itemsView.comentario=o),label:"Comentario",type:"text",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{elevation:"2",class:"ma-2 pa-2"},{default:t(()=>[e(h,null,{default:t(()=>[e(c,{class:"mr-2 ml-2",color:"#662D91",text:"Cerrar",variant:"underlined",onClick:a[10]||(a[10]=o=>k())})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),ee=M(K,[["__file","/home/omar/www/esalud/resources/js/Pages/Consultas/ConsultaExEquilibrio.vue"]]);export{ee as default};
//# sourceMappingURL=ConsultaExEquilibrio-B6vm3jQo.js.map
