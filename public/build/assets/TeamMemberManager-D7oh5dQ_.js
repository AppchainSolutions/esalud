import{Q as H,T as x,r as _,o as n,d as l,b as a,w as t,e as u,f as r,a as o,u as s,F as w,g as T,n as v,t as g,i as J}from"./app-DO4cl_Qm.js";import{A as K}from"./ActionMessage-D1-V6h2v.js";import{A as P}from"./Modal-4L44e-vc.js";import{C as $}from"./ConfirmationModal-f7ijPyko.js";import{D as j}from"./DangerButton-Dg1JoeW9.js";import{D as W}from"./DialogModal-DhPzQfZQ.js";import{F as X}from"./FormSection-BxtetCFC.js";import{T as Y,I as F}from"./TextInput-DZwoO0jI.js";import{I as L}from"./InputLabel-5o2GFFKY.js";import{P as z}from"./PrimaryButton-CVMhtGqN.js";import{S}from"./SecondaryButton-CyjVUnGA.js";import{S as A}from"./SectionBorder-DDGm7EKD.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SectionTitle-D1fLZucx.js";const ee={key:0},te=o("div",{class:"col-span-6"},[o("div",{class:"max-w-xl text-sm text-gray-600"}," Please provide the email address of the person you would like to add to this team. ")],-1),se={class:"col-span-6 sm:col-span-4"},oe={key:0,class:"col-span-6 lg:col-span-4"},ae={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},ne=["onClick"],le={class:"flex items-center"},re={key:0,class:"ms-2 h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},ie=o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),me=[ie],ce={class:"mt-2 text-xs text-gray-600 text-start"},de={key:1},ue={class:"space-y-6"},ve={class:"text-gray-600"},be={class:"flex items-center"},fe=["onClick"],ge={key:2},ye={class:"space-y-6"},pe={class:"flex items-center"},he=["src","alt"],ke={class:"ms-4"},xe={class:"flex items-center"},_e=["onClick"],we={key:1,class:"ms-2 text-sm text-gray-400"},Te=["onClick"],Ce={key:0},Me={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},Re=["onClick"],Se={class:"flex items-center"},Ae={key:0,class:"ms-2 h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Be=o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),Pe=[Be],$e={class:"mt-2 text-xs text-gray-600"},je={__name:"TeamMemberManager",props:{team:Object,availableRoles:Array,userPermissions:Object},setup(i){const p=i,I=H(),c=x({email:"",role:null}),b=x({role:null}),C=x({}),M=x({}),h=_(!1),R=_(null),k=_(!1),y=_(null),V=()=>{c.post(route("team-members.store",p.team),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>c.reset()})},D=d=>{J.delete(route("team-invitations.destroy",d),{preserveScroll:!0})},N=d=>{R.value=d,b.role=d.membership.role,h.value=!0},O=()=>{b.put(route("team-members.update",[p.team,R.value]),{preserveScroll:!0,onSuccess:()=>h.value=!1})},E=()=>{k.value=!0},U=()=>{C.delete(route("team-members.destroy",[p.team,I.props.auth.user]))},Q=d=>{y.value=d},q=()=>{M.delete(route("team-members.destroy",[p.team,y.value]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>y.value=null})},B=d=>p.availableRoles.find(m=>m.key===d).name;return(d,m)=>(n(),l("div",null,[i.userPermissions.canAddTeamMembers?(n(),l("div",ee,[a(A),a(X,{onSubmitted:V},{title:t(()=>[r(" Add Team Member ")]),description:t(()=>[r(" Add a new team member to your team, allowing them to collaborate with you. ")]),form:t(()=>[te,o("div",se,[a(L,{for:"email",value:"Email"}),a(Y,{id:"email",modelValue:s(c).email,"onUpdate:modelValue":m[0]||(m[0]=e=>s(c).email=e),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),a(F,{message:s(c).errors.email,class:"mt-2"},null,8,["message"])]),i.availableRoles.length>0?(n(),l("div",oe,[a(L,{for:"roles",value:"Role"}),a(F,{message:s(c).errors.role,class:"mt-2"},null,8,["message"]),o("div",ae,[(n(!0),l(w,null,T(i.availableRoles,(e,f)=>(n(),l("button",{key:e.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",{"border-t border-gray-200 focus:border-none rounded-t-none":f>0,"rounded-b-none":f!=Object.keys(i.availableRoles).length-1}]),onClick:G=>s(c).role=e.key},[o("div",{class:v({"opacity-50":s(c).role&&s(c).role!=e.key})},[o("div",le,[o("div",{class:v(["text-sm text-gray-600",{"font-semibold":s(c).role==e.key}])},g(e.name),3),s(c).role==e.key?(n(),l("svg",re,[...me])):u("",!0)]),o("div",ce,g(e.description),1)],2)],10,ne))),128))])])):u("",!0)]),actions:t(()=>[a(K,{on:s(c).recentlySuccessful,class:"me-3"},{default:t(()=>[r(" Added. ")]),_:1},8,["on"]),a(z,{class:v({"opacity-25":s(c).processing}),disabled:s(c).processing},{default:t(()=>[r(" Add ")]),_:1},8,["class","disabled"])]),_:1})])):u("",!0),i.team.team_invitations.length>0&&i.userPermissions.canAddTeamMembers?(n(),l("div",de,[a(A),a(P,{class:"mt-10 sm:mt-0"},{title:t(()=>[r(" Pending Team Invitations ")]),description:t(()=>[r(" These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation. ")]),content:t(()=>[o("div",ue,[(n(!0),l(w,null,T(i.team.team_invitations,e=>(n(),l("div",{key:e.id,class:"flex items-center justify-between"},[o("div",ve,g(e.email),1),o("div",be,[i.userPermissions.canRemoveTeamMembers?(n(),l("button",{key:0,class:"cursor-pointer ms-6 text-sm text-red-500 focus:outline-none",onClick:f=>D(e)}," Cancel ",8,fe)):u("",!0)])]))),128))])]),_:1})])):u("",!0),i.team.users.length>0?(n(),l("div",ge,[a(A),a(P,{class:"mt-10 sm:mt-0"},{title:t(()=>[r(" Team Members ")]),description:t(()=>[r(" All of the people that are part of this team. ")]),content:t(()=>[o("div",ye,[(n(!0),l(w,null,T(i.team.users,e=>(n(),l("div",{key:e.id,class:"flex items-center justify-between"},[o("div",pe,[o("img",{class:"w-8 h-8 rounded-full object-cover",src:e.profile_photo_url,alt:e.name},null,8,he),o("div",ke,g(e.name),1)]),o("div",xe,[i.userPermissions.canUpdateTeamMembers&&i.availableRoles.length?(n(),l("button",{key:0,class:"ms-2 text-sm text-gray-400 underline",onClick:f=>N(e)},g(B(e.membership.role)),9,_e)):i.availableRoles.length?(n(),l("div",we,g(B(e.membership.role)),1)):u("",!0),d.$page.props.auth.user.id===e.id?(n(),l("button",{key:2,class:"cursor-pointer ms-6 text-sm text-red-500",onClick:E}," Leave ")):i.userPermissions.canRemoveTeamMembers?(n(),l("button",{key:3,class:"cursor-pointer ms-6 text-sm text-red-500",onClick:f=>Q(e)}," Remove ",8,Te)):u("",!0)])]))),128))])]),_:1})])):u("",!0),a(W,{show:h.value,onClose:m[2]||(m[2]=e=>h.value=!1)},{title:t(()=>[r(" Manage Role ")]),content:t(()=>[R.value?(n(),l("div",Ce,[o("div",Me,[(n(!0),l(w,null,T(i.availableRoles,(e,f)=>(n(),l("button",{key:e.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",{"border-t border-gray-200 focus:border-none rounded-t-none":f>0,"rounded-b-none":f!==Object.keys(i.availableRoles).length-1}]),onClick:G=>s(b).role=e.key},[o("div",{class:v({"opacity-50":s(b).role&&s(b).role!==e.key})},[o("div",Se,[o("div",{class:v(["text-sm text-gray-600",{"font-semibold":s(b).role===e.key}])},g(e.name),3),s(b).role==e.key?(n(),l("svg",Ae,[...Pe])):u("",!0)]),o("div",$e,g(e.description),1)],2)],10,Re))),128))])])):u("",!0)]),footer:t(()=>[a(S,{onClick:m[1]||(m[1]=e=>h.value=!1)},{default:t(()=>[r(" Cancel ")]),_:1}),a(z,{class:v(["ms-3",{"opacity-25":s(b).processing}]),disabled:s(b).processing,onClick:O},{default:t(()=>[r(" Save ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),a($,{show:k.value,onClose:m[4]||(m[4]=e=>k.value=!1)},{title:t(()=>[r(" Leave Team ")]),content:t(()=>[r(" Are you sure you would like to leave this team? ")]),footer:t(()=>[a(S,{onClick:m[3]||(m[3]=e=>k.value=!1)},{default:t(()=>[r(" Cancel ")]),_:1}),a(j,{class:v(["ms-3",{"opacity-25":s(C).processing}]),disabled:s(C).processing,onClick:U},{default:t(()=>[r(" Leave ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),a($,{show:y.value,onClose:m[6]||(m[6]=e=>y.value=null)},{title:t(()=>[r(" Remove Team Member ")]),content:t(()=>[r(" Are you sure you would like to remove this person from the team? ")]),footer:t(()=>[a(S,{onClick:m[5]||(m[5]=e=>y.value=null)},{default:t(()=>[r(" Cancel ")]),_:1}),a(j,{class:v(["ms-3",{"opacity-25":s(M).processing}]),disabled:s(M).processing,onClick:q},{default:t(()=>[r(" Remove ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}},Je=Z(je,[["__file","/home/blueshadows/www/vulco/resources/js/Pages/Teams/Partials/TeamMemberManager.vue"]]);export{Je as default};
//# sourceMappingURL=TeamMemberManager-D7oh5dQ_.js.map
